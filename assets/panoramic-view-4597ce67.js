import{d as a,f as e,r as l,o as s,b as t,V as n,W as i,a0 as o,k as c,$ as r,_ as d,a7 as p,X as u,G as v,a3 as m,u as f,F as h,a8 as g,a1 as w}from"./vendor-f41c3cc7.js";import{V as y,d as b,e as k,f as M,g as z,R as C,F as x,h as A,W as _}from"./icons-15893848.js";import{m as I,L as T,E as S,I as P}from"./antd-fa5730cf.js";import{_ as U}from"./index-28579a83.js";const D={amap:{apiKey:"0c125857f468ed6834d9490b6ee95c33",version:"1.4.15",defaultCenter:[116.6,35.4],defaultZoom:10,mapStyle:"amap://styles/normal",viewMode:"3D",features:["bg","road","building","point"],plugins:["AMap.Scale","AMap.ToolBar","AMap.MapType"]},mock:{center:[50,50],zoom:1,mapStyle:"water",viewMode:"2D"}},$={class:"panoramic-view"},Z={class:"page-header"},j={class:"map-status-indicator"},E={class:"content-wrapper"},W={class:"left-toolbar"},B={class:"info-item"},q={class:"value info"},K={class:"info-item"},R={class:"value warning"},N={class:"main-map"},O={key:0,class:"map-loading"},V={key:0,class:"error-text"},L={class:"right-panel"},F={class:"object-info"},H={class:"object-header"},Q={class:"info-content"},G={class:"info-row"},X={class:"info-row"},J={class:"value"},Y={class:"info-row"},aa={class:"value"},ea={class:"info-row"},la={class:"value"},sa={class:"info-row"},ta={class:"info-row"},na={class:"value"},ia={class:"info-row"},oa={class:"value"},ca={key:0,class:"info-row"},ra={class:"value warning"},da={class:"action-buttons"},pa={class:"info-row"},ua={class:"value"},va={class:"info-row"},ma={class:"value"},fa={class:"info-row"},ha={class:"value"},ga={class:"info-row"},wa={class:"value"},ya={class:"info-row"},ba={class:"value"},ka={class:"info-row"},Ma={class:"value"},za={class:"info-row"},Ca={class:"value"},xa={class:"info-row"},Aa={class:"value"},_a={class:"info-row"},Ia={class:"value"},Ta={class:"info-row"},Sa={class:"value"},Pa={key:0,class:"info-row"},Ua={class:"value warning"},Da={class:"action-buttons"},$a={class:"info-row"},Za={class:"value"},ja={class:"info-row"},Ea={class:"value"},Wa={class:"info-row"},Ba={class:"value"},qa={class:"info-row"},Ka={class:"value"},Ra={class:"info-row"},Na={class:"value"},Oa={class:"info-row"},Va={class:"value"},La={class:"info-row"},Fa={class:"value"},Ha={class:"info-row"},Qa={class:"value"},Ga={class:"info-row"},Xa={class:"value"},Ja={class:"info-row"},Ya={class:"value"},ae={class:"weather-alerts"},ee={class:"alert-tags"},le={class:"weather-forecast"},se={class:"forecast-list"},te={class:"time"},ne={class:"temp"},ie={class:"weather"},oe={class:"wind"},ce={class:"alarm-header"},re={class:"alarm-status"},de={class:"alarm-list"},pe=["onClick"],ue={class:"alarm-icon"},ve={class:"alarm-content"},me={class:"alarm-title"},fe={class:"alarm-description"},he={class:"alarm-meta"},ge={class:"alarm-time"},we={class:"alarm-device"},ye={key:0,class:"alarm-actions"},be={class:"action-buttons"},ke={class:"ptz-control-panel"},Me={class:"ptz-info"},ze={class:"value"},Ce={class:"ptz-sliders"},xe={class:"ptz-item"},Ae={class:"value"},_e={class:"ptz-item"},Ie={class:"value"},Te={class:"ptz-item"},Se={class:"value"},Pe={class:"ptz-actions"},Ue={class:"video-player-panel"},De={class:"video-info"},$e={class:"value"},Ze={class:"video-controls"},je={class:"video-quality"},Ee={class:"video-status"},We=U(a({__name:"panoramic-view",setup(a){const U=e(),We=e(null),Be=e(null);let qe=null,Ke=null,Re=[];const Ne=e("loading"),Oe=l({cameras:!0,ships:!0,weather:!0,radar:!1}),Ve=l({onlineCameras:156,totalCameras:180,onlineShips:23,weather:"晴朗"}),Le=e([{id:1,name:"济宁港码头1号",lng:116.58,lat:35.38,status:"online",statusText:"在线",ip:"192.168.1.101",location:"济宁港主码头前沿",resolution:"4K",ptz:{pan:0,tilt:0,zoom:1},recording:!0,lastMaintenance:"2025-08-26",nextMaintenance:"2025-08-15",videoUrl:"rtsp://192.168.1.101:554/stream1"},{id:2,name:"京杭运河监控1号",lng:116.575,lat:35.385,status:"online",statusText:"在线",ip:"192.168.1.102",location:"京杭大运河济宁段",resolution:"4K",ptz:{pan:45,tilt:15,zoom:1.2},recording:!0,lastMaintenance:"2025-08-20",nextMaintenance:"2025-08-20",videoUrl:"rtsp://192.168.1.102:554/stream1"},{id:3,name:"梁山港监控1号",lng:116.65,lat:35.35,status:"online",statusText:"在线",ip:"192.168.1.103",location:"梁山港主码头",resolution:"4K",ptz:{pan:90,tilt:0,zoom:1},recording:!0,lastMaintenance:"2025-08-10",nextMaintenance:"2025-08-10",videoUrl:"rtsp://192.168.1.103:554/stream1"},{id:4,name:"济宁港监控2号",lng:116.585,lat:35.375,status:"online",statusText:"在线",ip:"192.168.1.104",location:"济宁港集装箱码头",resolution:"4K",ptz:{pan:180,tilt:-10,zoom:1.5},recording:!0,lastMaintenance:"2025-08-25",nextMaintenance:"2025-08-25",videoUrl:"rtsp://192.168.1.104:554/stream1"}]),Fe=e([{mmsi:"123456789",name:"中交润杨001",lng:116.578,lat:35.378,status:"normal",speed:12,course:180,destination:"济宁港",shipType:"集装箱船",length:300,width:45,draft:15.5,eta:"2025-08-15 14:30",etd:"2025-08-16 08:00",cargo:"电子产品、机械设备",crew:25,lastUpdate:"2025-08-14 10:15:30",trajectory:[{lng:116.576,lat:35.374,time:"2025-08-14 09:00:00"},{lng:116.577,lat:35.375,time:"2025-08-14 09:30:00"},{lng:116.578,lat:35.378,time:"2025-08-14 10:00:00"}]},{mmsi:"987654321",name:"济宁物流002",lng:116.652,lat:35.348,status:"warning",speed:8,course:90,destination:"梁山港",shipType:"散货船",length:280,width:42,draft:14.8,eta:"2025-08-16 16:00",etd:"2025-08-17 10:00",cargo:"铁矿石、煤炭",crew:22,lastUpdate:"2025-08-14 10:20:15",warningReason:"偏离航道",trajectory:[{lng:116.65,lat:35.346,time:"2025-08-14 09:15:00"},{lng:116.651,lat:35.347,time:"2025-08-14 09:45:00"},{lng:116.652,lat:35.348,time:"2025-08-14 10:15:00"}]},{mmsi:"456789123",name:"济宁航运003",lng:116.575,lat:35.384,status:"normal",speed:15,course:270,destination:"青岛港",shipType:"油轮",length:320,width:48,draft:16.2,eta:"2025-08-18 12:00",etd:"2025-08-19 06:00",cargo:"原油",crew:28,lastUpdate:"2025-08-14 10:25:45",trajectory:[{lng:116.577,lat:35.386,time:"2025-08-14 09:30:00"},{lng:116.576,lat:35.385,time:"2025-08-14 10:00:00"},{lng:116.575,lat:35.384,time:"2025-08-14 10:25:00"}]}]),He=e([{id:1,name:"济宁港气象站1",lng:116.577,lat:35.389,temperature:25,humidity:65,windSpeed:3.2,visibility:15,pressure:1013.25,windDirection:135,rainfall:0,uvIndex:6,airQuality:"优",lastUpdate:"2025-08-14 10:30:00",alerts:["能见度良好","风力适中"],forecast:[{time:"12:00",temp:26,weather:"晴",wind:3.5},{time:"15:00",temp:27,weather:"晴",wind:4},{time:"18:00",temp:24,weather:"多云",wind:3}]},{id:2,name:"梁山港气象站1",lng:116.657,lat:35.355,temperature:24,humidity:68,windSpeed:2.8,visibility:18,pressure:1012.8,windDirection:120,rainfall:0,uvIndex:5,airQuality:"良",lastUpdate:"2025-08-14 10:32:00",alerts:["温度适宜","湿度正常"],forecast:[{time:"12:00",temp:25,weather:"晴",wind:3},{time:"15:00",temp:26,weather:"晴",wind:3.5},{time:"18:00",temp:23,weather:"多云",wind:2.8}]}]),Qe=l({enabled:!0,rules:[{id:1,name:"摄像头离线检测",type:"camera",condition:"offline",level:"high",enabled:!0},{id:2,name:"船舶偏离航道",type:"ship",condition:"course_deviation",level:"medium",enabled:!0},{id:3,name:"能见度预警",type:"weather",condition:"visibility_low",level:"low",enabled:!0},{id:4,name:"船舶碰撞预警",type:"ship",condition:"collision_risk",level:"high",enabled:!0},{id:5,name:"恶劣天气预警",type:"weather",condition:"storm_warning",level:"medium",enabled:!0}]}),Ge=e([{id:1,name:"济宁港雷达站",lng:116.58,lat:35.38,range:5e3,frequency:"X波段",status:"online"},{id:2,name:"梁山港雷达站",lng:116.65,lat:35.35,range:4e3,frequency:"S波段",status:"online"}]),Xe=e([{id:1,name:"济宁港主航道",points:[[116.575,35.375],[116.585,35.385],[116.59,35.39]],width:200,depth:15,status:"active"},{id:2,name:"梁山港航道",points:[[116.645,35.345],[116.655,35.355],[116.66,35.36]],width:180,depth:12,status:"active"}]),Je=l({enabled:!0,safeDistance:500,warningDistance:1e3,checkInterval:5e3}),Ye=l({isPlaying:!1,currentCamera:null,quality:"HD",recording:!1}),al=l({isActive:!1,currentCamera:null,pan:0,tilt:0,zoom:1}),el=e([{id:1,level:"high",title:"摄像头离线告警",time:"10:30:15",type:"camera",deviceId:3,deviceName:"梁山港监控1号",description:"网络连接异常，已持续15分钟",status:"active",actions:["重启设备","检查网络","联系维护人员"]},{id:2,level:"medium",title:"船舶偏离航道",time:"10:25:42",type:"ship",deviceId:"987654321",deviceName:"济宁物流002",description:"船舶偏离主航道，距离航道中心线150米",status:"active",actions:["发送警告信息","记录轨迹","通知海事部门"]},{id:3,level:"low",title:"能见度降低",time:"10:20:18",type:"weather",deviceId:1,deviceName:"济宁港气象站1",description:"能见度降至15公里，建议船舶减速航行",status:"resolved",actions:["发布航行警告","调整航速限制"]},{id:4,level:"high",title:"船舶碰撞风险预警",time:"10:35:20",type:"ship",deviceId:"123456789",deviceName:"中交润杨001",description:"与济宁物流002距离过近，存在碰撞风险",status:"active",actions:["紧急避让","发送碰撞警告","记录事件"]}]),ll=()=>{if("undefined"==typeof AMap)return console.error("高德地图API未加载"),void(Ne.value="error");try{Ke=new AMap.Map("amap-container",{zoom:D.amap.defaultZoom,center:D.amap.defaultCenter,mapStyle:D.amap.mapStyle,features:D.amap.features,viewMode:D.amap.viewMode});try{"function"==typeof AMap.Scale?(Ke.addControl(new AMap.Scale),console.log("比例尺控件添加成功")):console.warn("比例尺控件不可用，跳过")}catch(a){console.warn("添加比例尺控件失败:",a)}try{"function"==typeof AMap.ToolBar?(Ke.addControl(new AMap.ToolBar),console.log("工具栏控件添加成功")):console.warn("工具栏控件不可用，跳过")}catch(a){console.warn("添加工具栏控件失败:",a)}try{"function"==typeof AMap.MapType?(Ke.addControl(new AMap.MapType),console.log("地图类型控件添加成功")):console.warn("地图类型控件不可用，跳过")}catch(a){console.warn("添加地图类型控件失败:",a)}sl(),nl(),il(),cl(),Ne.value="ready",console.log("地图初始化成功")}catch(a){console.error("地图初始化失败:",a),Ne.value="error"}},sl=()=>{Ke&&(Re.forEach(a=>Ke.remove(a)),Re=[],Oe.cameras&&Le.value.forEach(a=>{const e=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"data:image/svg+xml;base64,"+btoa('\n            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n              <circle cx="16" cy="16" r="14" fill="white" stroke="#1890ff" stroke-width="2"/>\n              <path d="M12 12h8v8h-8z" fill="#1890ff"/>\n              <circle cx="16" cy="16" r="3" fill="#1890ff"/>\n            </svg>\n          ')})});e.on("click",()=>hl(a)),Ke.add(e),Re.push(e)}),Oe.ships&&Fe.value.forEach(a=>{const e=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"data:image/svg+xml;base64,"+btoa('\n            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n              <path d="M16 4l-4 8h8l-4-8z" fill="#52c41a"/>\n              <rect x="12" y="12" width="8" height="8" fill="#52c41a"/>\n            </svg>\n          ')})});e.on("click",()=>gl(a)),Ke.add(e),Re.push(e)}),Oe.weather&&He.value.forEach(a=>{const e=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"data:image/svg+xml;base64,"+btoa('\n            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n              <circle cx="16" cy="16" r="14" fill="white" stroke="#1890ff" stroke-width="2"/>\n              <path d="M8 16c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z" fill="#1890ff"/>\n            </svg>\n          ')})});e.on("click",()=>wl(a)),Ke.add(e),Re.push(e)}))},tl=a=>{console.log(`切换图层: ${a}`),"radar"===a?Oe.radar?il():ol():sl()},nl=()=>{Ke&&Xe.value.forEach(a=>{const e=new AMap.Polygon({path:a.points,strokeColor:"#1890ff",strokeWeight:2,strokeOpacity:.8,fillColor:"#1890ff",fillOpacity:.1,strokeStyle:"dashed"}),l=new AMap.Text({text:a.name,position:a.points[1],style:{color:"#1890ff",fontSize:"12px",fontWeight:"bold"}});Ke.add(e),Ke.add(l)})},il=()=>{Ke&&Oe.radar&&Ge.value.forEach(a=>{const e=new AMap.Circle({center:[a.lng,a.lat],radius:a.range,strokeColor:"#52c41a",strokeWeight:1,strokeOpacity:.6,fillColor:"#52c41a",fillOpacity:.1}),l=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(24,24),image:"data:image/svg+xml;base64,"+btoa('\n          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="12" cy="12" r="10" fill="white" stroke="#52c41a" stroke-width="2"/>\n            <path d="M12 2l3 9h-6l3-9z" fill="#52c41a"/>\n            <circle cx="12" cy="12" r="3" fill="#52c41a"/>\n          </svg>\n        ')})});Ke.add(e),Ke.add(l)})},ol=()=>{console.log("清除雷达覆盖")},cl=()=>{Je.enabled&&setInterval(()=>{rl()},Je.checkInterval)},rl=()=>{const a=Fe.value.length;for(let e=0;e<a;e++)for(let l=e+1;l<a;l++){const a=Fe.value[e],s=Fe.value[l],t=dl(a.lng,a.lat,s.lng,s.lat);t<Je.safeDistance?ul(a,s,"high",t):t<Je.warningDistance&&ul(a,s,"medium",t)}},dl=(a,e,l,s)=>{const t=(s-e)*Math.PI/180,n=(l-a)*Math.PI/180,i=Math.sin(t/2)*Math.sin(t/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},pl=l({lastWarningTime:0,warningInterval:2e4}),ul=(a,e,l,s)=>{const t=el.value.find(l=>l.deviceId===`${a.mmsi}-${e.mmsi}`&&"active"===l.status);if(t)return t.description=`两船距离${Math.round(s)}米，存在碰撞风险`,void(t.time=(new Date).toLocaleTimeString());const n={id:Date.now(),level:l,title:"船舶碰撞风险预警",time:(new Date).toLocaleTimeString(),type:"ship",deviceId:`${a.mmsi}-${e.mmsi}`,deviceName:`${a.name} 与 ${e.name}`,description:`两船距离${Math.round(s)}米，存在碰撞风险`,status:"active",actions:["紧急避让","发送碰撞警告","记录事件"]};el.value.unshift(n);const i=Date.now();"high"===l&&i-pl.lastWarningTime>=pl.warningInterval&&(I.error(`高风险碰撞预警：${a.name} 与 ${e.name}`),pl.lastWarningTime=i)},vl=()=>{Ke&&(Ke.setCenter(D.amap.defaultCenter),Ke.setZoom(D.amap.defaultZoom))},ml=()=>{Ke&&Ke.setZoom(D.amap.defaultZoom)},fl=()=>{Ke&&Ke.setFitView()},hl=a=>{We.value={...a,type:"camera"},Ke&&(Ke.setCenter([a.lng,a.lat]),Ke.setZoom(18))},gl=a=>{We.value={...a,type:"ship"},Ke&&(Ke.setCenter([a.lng,a.lat]),Ke.setZoom(17))},wl=a=>{We.value={...a,type:"weather"},Ke&&(Ke.setCenter([a.lng,a.lat]),Ke.setZoom(17))},yl=()=>{console.log("清除船舶轨迹")},bl=(a,e)=>{if(!al.currentCamera)return;const l=al.currentCamera;switch(a){case"pan":l.ptz.pan=e,al.pan=e;break;case"tilt":l.ptz.tilt=e,al.tilt=e;break;case"zoom":l.ptz.zoom=e,al.zoom=e}},kl=a=>{console.log("切换录制状态:",a.name),a.recording=!a.recording,a.recording?Ye.recording=!0:Ye.recording=!1},Ml=l({lastWarningTime:0,warningInterval:2e4}),zl=()=>{Fe.value.forEach(a=>{a.lng+=1e-4*(Math.random()-.5),a.lat+=1e-4*(Math.random()-.5),a.lastUpdate=(new Date).toLocaleString()})},Cl=()=>{He.value.forEach(a=>{a.temperature+=2*(Math.random()-.5),a.humidity+=5*(Math.random()-.5),a.lastUpdate=(new Date).toLocaleString()})},xl=()=>{Le.value.forEach(a=>{"offline"===a.status&&Math.random()>.8&&(a.status="online",a.statusText="在线",a.offlineReason=void 0)})},Al=a=>"camera"===a.type?"online"===a.status?"在线":"离线":"ship"===a.type?"normal"===a.status?"正常":"警告":"weather"===a.type?"正常":"未知",_l=()=>new Promise((a,e)=>{if("undefined"!=typeof AMap)return void a(AMap);const l=document.createElement("script");l.src=`https://webapi.amap.com/maps?v=${D.amap.version}&key=${D.amap.apiKey}&plugin=AMap.Scale,AMap.ToolBar,AMap.MapType`,l.onload=()=>{setTimeout(()=>{console.log("高德地图API加载完成，AMap对象:",AMap),AMap&&"object"==typeof AMap&&console.log("可用插件:",Object.keys(AMap).filter(a=>a.includes("Scale")||a.includes("ToolBar")||a.includes("MapType"))),a(AMap)},1e3)},l.onerror=e,document.head.appendChild(l)});s(async()=>{console.log("全景视图组件已挂载"),console.log("地图配置:",D);const a=(()=>{const a=[];return D.amap.defaultCenter&&Array.isArray(D.amap.defaultCenter)||a.push("高德地图默认中心点配置无效"),{isValid:0===a.length,errors:a}})();a.isValid||console.warn("地图配置警告:",a.errors);try{console.log("开始加载高德地图API..."),await _l(),console.log("高德地图API加载成功"),console.log("开始初始化地图..."),ll(),console.log("地图初始化完成"),qe=setInterval(()=>{zl(),Cl(),xl()},3e4)}catch(e){console.error("加载地图失败:",e),Ne.value="error"}}),t(()=>{console.log("全景视图组件已卸载"),qe&&(clearInterval(qe),qe=null),Ke&&Ke.destroy()});const Il=async()=>{Ne.value="loading";try{await _l(),ll(),Ne.value="ready"}catch(a){console.error("重试加载地图失败:",a),Ne.value="error"}};return(a,e)=>{const l=u("a-tag"),s=u("a-button"),t=u("a-checkbox"),D=u("a-space"),qe=u("a-card"),Re=u("a-spin"),Le=u("a-switch"),Fe=u("a-slider"),He=u("a-button-group"),Ge=u("a-select-option"),Xe=u("a-select");return n(),i("div",$,[o("div",Z,[e[27]||(e[27]=o("h2",null,"全景视图",-1)),e[28]||(e[28]=o("p",null,"在真实地图上，集成显示山东省济宁市济宁港和梁山港水域区域摄像头点位、船舶AIS位置、气象水文站等要素",-1)),o("div",j,[c(l,{color:"ready"===Ne.value?"success":"loading"===Ne.value?"processing":"error"},{default:r(()=>[v(m("ready"===Ne.value?"地图已加载":"loading"===Ne.value?"地图加载中":"地图加载失败"),1)]),_:1},8,["color"]),"error"===Ne.value?(n(),d(s,{key:0,size:"small",type:"primary",onClick:Il,style:{"margin-left":"8px"}},{default:r(()=>[...e[26]||(e[26]=[v(" 重试加载 ",-1)])]),_:1})):p("",!0)])]),o("div",E,[o("div",W,[c(qe,{title:"图层控制",size:"small",class:"toolbar-card"},{default:r(()=>[c(D,{direction:"vertical",style:{width:"100%"}},{default:r(()=>[c(t,{checked:Oe.cameras,"onUpdate:checked":e[0]||(e[0]=a=>Oe.cameras=a),onChange:e[1]||(e[1]=a=>tl("cameras"))},{icon:r(()=>[c(f(y))]),default:r(()=>[e[29]||(e[29]=v(" 摄像头点位 ",-1))]),_:1},8,["checked"]),c(t,{checked:Oe.ships,"onUpdate:checked":e[2]||(e[2]=a=>Oe.ships=a),onChange:e[3]||(e[3]=a=>tl("ships"))},{icon:r(()=>[c(f(b))]),default:r(()=>[e[30]||(e[30]=v(" 船舶AIS位置 ",-1))]),_:1},8,["checked"]),c(t,{checked:Oe.weather,"onUpdate:checked":e[4]||(e[4]=a=>Oe.weather=a),onChange:e[5]||(e[5]=a=>tl("weather"))},{icon:r(()=>[c(f(k))]),default:r(()=>[e[31]||(e[31]=v(" 气象水文站 ",-1))]),_:1},8,["checked"]),c(t,{checked:Oe.radar,"onUpdate:checked":e[6]||(e[6]=a=>Oe.radar=a),onChange:e[7]||(e[7]=a=>tl("radar"))},{icon:r(()=>[c(f(M))]),default:r(()=>[e[32]||(e[32]=v(" 雷达覆盖 ",-1))]),_:1},8,["checked"])]),_:1})]),_:1}),c(qe,{title:"快速操作",size:"small",class:"toolbar-card"},{default:r(()=>[c(D,{direction:"vertical",style:{width:"100%"}},{default:r(()=>[c(s,{type:"primary",size:"small",onClick:vl,class:"action-btn"},{icon:r(()=>[c(f(z))]),default:r(()=>[e[33]||(e[33]=v(" 居中显示 ",-1))]),_:1}),c(s,{size:"small",onClick:ml,class:"action-btn"},{icon:r(()=>[c(f(C))]),default:r(()=>[e[34]||(e[34]=v(" 重置缩放 ",-1))]),_:1}),c(s,{size:"small",onClick:fl,class:"action-btn"},{icon:r(()=>[c(f(x))]),default:r(()=>[e[35]||(e[35]=v(" 全屏显示 ",-1))]),_:1})]),_:1})]),_:1}),c(qe,{title:"实时信息",size:"small",class:"toolbar-card"},{default:r(()=>[e[38]||(e[38]=o("div",{class:"info-item"},[o("span",{class:"label"},"在线摄像头:"),o("span",{class:"value success"},m(70)+"/"+m(70))],-1)),o("div",B,[e[36]||(e[36]=o("span",{class:"label"},"在线船舶:",-1)),o("span",q,m(Ve.onlineShips),1)]),o("div",K,[e[37]||(e[37]=o("span",{class:"label"},"天气状况:",-1)),o("span",R,m(Ve.weather),1)])]),_:1})]),o("div",N,[o("div",{class:"map-container",ref_key:"mapContainer",ref:U},[e[44]||(e[44]=o("div",{id:"amap-container",class:"amap-container"},null,-1)),"ready"!==Ne.value?(n(),i("div",O,[c(Re,{size:"large"},{indicator:r(()=>[c(f(T),{style:{"font-size":"24px"}})]),_:1}),e[43]||(e[43]=o("div",{class:"loading-text"},"地图加载中...",-1)),"error"===Ne.value?(n(),i("div",V,[e[40]||(e[40]=o("p",null,"地图加载失败，可能的原因：",-1)),e[41]||(e[41]=o("ul",null,[o("li",null,"高德地图API密钥无效或过期"),o("li",null,"网络连接问题"),o("li",null,"API调用限制"),o("li",null,"GitHub Pages环境限制")],-1)),e[42]||(e[42]=o("p",null,"请检查环境变量配置或联系管理员",-1)),c(s,{type:"primary",onClick:Il},{default:r(()=>[...e[39]||(e[39]=[v("重试加载",-1)])]),_:1})])):p("",!0)])):p("",!0)],512)]),o("div",L,[We.value?(n(),d(qe,{key:0,title:"选中对象信息",size:"small",class:"info-card"},{default:r(()=>{return[o("div",F,[o("div",H,[o("h4",null,m(We.value.name||We.value.title),1),c(l,{color:(a=We.value,"camera"===a.type?"online"===a.status?"success":"error":"ship"===a.type?"normal"===a.status?"success":"warning":"weather"===a.type?"processing":"default"),size:"small"},{default:r(()=>[v(m(Al(We.value)),1)]),_:1},8,["color"])]),o("div",Q,["camera"===We.value.type?(n(),i(h,{key:0},[o("div",G,[e[45]||(e[45]=o("span",{class:"label"},"状态:",-1)),o("span",{class:g(["status",We.value.status])},m(We.value.statusText),3)]),o("div",X,[e[46]||(e[46]=o("span",{class:"label"},"IP地址:",-1)),o("span",J,m(We.value.ip),1)]),o("div",Y,[e[47]||(e[47]=o("span",{class:"label"},"位置:",-1)),o("span",aa,m(We.value.location),1)]),o("div",ea,[e[48]||(e[48]=o("span",{class:"label"},"分辨率:",-1)),o("span",la,m(We.value.resolution),1)]),o("div",sa,[e[49]||(e[49]=o("span",{class:"label"},"录像状态:",-1)),o("span",{class:g(["status",We.value.recording?"online":"offline"])},m(We.value.recording?"录制中":"未录制"),3)]),o("div",ta,[e[50]||(e[50]=o("span",{class:"label"},"PTZ控制:",-1)),o("span",na,"P:"+m(We.value.ptz.pan)+"° T:"+m(We.value.ptz.tilt)+"° Z:"+m(We.value.ptz.zoom)+"x",1)]),o("div",ia,[e[51]||(e[51]=o("span",{class:"label"},"维护信息:",-1)),o("span",oa,"上次:"+m(We.value.lastMaintenance)+" | 下次:"+m(We.value.nextMaintenance),1)]),"offline"===We.value.status&&We.value.offlineReason?(n(),i("div",ca,[e[52]||(e[52]=o("span",{class:"label"},"离线原因:",-1)),o("span",ra,m(We.value.offlineReason),1)])):p("",!0),o("div",da,[c(s,{type:"primary",size:"small",onClick:e[8]||(e[8]=a=>{return e=We.value,console.log("打开摄像头:",e.name),Ye.currentCamera=e,void(Ye.isPlaying=!0);var e}),class:"action-btn"},{icon:r(()=>[c(f(A))]),default:r(()=>[e[53]||(e[53]=v(" 打开视频 ",-1))]),_:1}),c(s,{size:"small",onClick:e[9]||(e[9]=a=>{return e=We.value,console.log("PTZ控制:",e.name),al.isActive=!0,al.currentCamera=e,al.pan=e.ptz.pan,al.tilt=e.ptz.tilt,void(al.zoom=e.ptz.zoom);var e}),class:"action-btn"},{icon:r(()=>[c(f(z))]),default:r(()=>[e[54]||(e[54]=v(" PTZ控制 ",-1))]),_:1}),c(s,{size:"small",onClick:e[10]||(e[10]=a=>kl(We.value)),class:"action-btn"},{icon:r(()=>[c(f(y))]),default:r(()=>[v(" "+m(We.value.recording?"停止录制":"开始录制"),1)]),_:1})])],64)):"ship"===We.value.type?(n(),i(h,{key:1},[o("div",pa,[e[55]||(e[55]=o("span",{class:"label"},"MMSI:",-1)),o("span",ua,m(We.value.mmsi),1)]),o("div",va,[e[56]||(e[56]=o("span",{class:"label"},"船舶类型:",-1)),o("span",ma,m(We.value.shipType),1)]),o("div",fa,[e[57]||(e[57]=o("span",{class:"label"},"航速:",-1)),o("span",ha,m(We.value.speed)+"节",1)]),o("div",ga,[e[58]||(e[58]=o("span",{class:"label"},"航向:",-1)),o("span",wa,m(We.value.course)+"°",1)]),o("div",ya,[e[59]||(e[59]=o("span",{class:"label"},"目的地:",-1)),o("span",ba,m(We.value.destination),1)]),o("div",ka,[e[60]||(e[60]=o("span",{class:"label"},"预计到达:",-1)),o("span",Ma,m(We.value.eta),1)]),o("div",za,[e[61]||(e[61]=o("span",{class:"label"},"预计离港:",-1)),o("span",Ca,m(We.value.etd),1)]),o("div",xa,[e[62]||(e[62]=o("span",{class:"label"},"货物:",-1)),o("span",Aa,m(We.value.cargo),1)]),o("div",_a,[e[63]||(e[63]=o("span",{class:"label"},"船员数量:",-1)),o("span",Ia,m(We.value.crew)+"人",1)]),o("div",Ta,[e[64]||(e[64]=o("span",{class:"label"},"最后更新:",-1)),o("span",Sa,m(We.value.lastUpdate),1)]),"warning"===We.value.status&&We.value.warningReason?(n(),i("div",Pa,[e[65]||(e[65]=o("span",{class:"label"},"警告原因:",-1)),o("span",Ua,m(We.value.warningReason),1)])):p("",!0),o("div",Da,[c(s,{type:"primary",size:"small",onClick:e[11]||(e[11]=a=>{return e=We.value,void console.log("跟踪船舶:",e.name);var e}),class:"action-btn"},{icon:r(()=>[c(f(M))]),default:r(()=>[e[66]||(e[66]=v(" 跟踪船舶 ",-1))]),_:1}),c(s,{size:"small",onClick:e[12]||(e[12]=a=>(a=>{if(console.log("显示船舶轨迹:",a.name),!Ke)return;yl();const e=a.trajectory.map(a=>[a.lng,a.lat]),l=new AMap.Polyline({path:e,strokeColor:"#1890ff",strokeWeight:3,strokeOpacity:.8,strokeStyle:"solid"});a.trajectory.forEach((e,l)=>{const s=new AMap.Marker({position:[e.lng,e.lat],title:`${a.name} - ${e.time}`,icon:new AMap.Icon({size:new AMap.Size(16,16),image:"data:image/svg+xml;base64,"+btoa(`\n        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n          <circle cx="8" cy="8" r="6" fill="#1890ff" stroke="white" stroke-width="2"/>\n          <text x="8" y="10" text-anchor="middle" fill="white" font-size="8">${l+1}</text>\n        </svg>\n      `)})});Ke.add(s)}),Ke.add(l),Ke.setFitView([l])})(We.value)),class:"action-btn"},{icon:r(()=>[c(f(z))]),default:r(()=>[e[67]||(e[67]=v(" 查看轨迹 ",-1))]),_:1}),c(s,{size:"small",onClick:e[13]||(e[13]=a=>(a=>{console.log("发送警告:",a.name);const e=Date.now();e-Ml.lastWarningTime>=Ml.warningInterval&&(I.warning(`已向船舶 ${a.name} 发送警告信息`),Ml.lastWarningTime=e)})(We.value)),class:"action-btn"},{icon:r(()=>[c(f(_))]),default:r(()=>[e[68]||(e[68]=v(" 发送警告 ",-1))]),_:1})])],64)):"weather"===We.value.type?(n(),i(h,{key:2},[o("div",$a,[e[69]||(e[69]=o("span",{class:"label"},"温度:",-1)),o("span",Za,m(We.value.temperature)+"°C",1)]),o("div",ja,[e[70]||(e[70]=o("span",{class:"label"},"湿度:",-1)),o("span",Ea,m(We.value.humidity)+"%",1)]),o("div",Wa,[e[71]||(e[71]=o("span",{class:"label"},"风速:",-1)),o("span",Ba,m(We.value.windSpeed)+"m/s",1)]),o("div",qa,[e[72]||(e[72]=o("span",{class:"label"},"风向:",-1)),o("span",Ka,m(We.value.windDirection)+"°",1)]),o("div",Ra,[e[73]||(e[73]=o("span",{class:"label"},"能见度:",-1)),o("span",Na,m(We.value.visibility)+"km",1)]),o("div",Oa,[e[74]||(e[74]=o("span",{class:"label"},"气压:",-1)),o("span",Va,m(We.value.pressure)+"hPa",1)]),o("div",La,[e[75]||(e[75]=o("span",{class:"label"},"降雨量:",-1)),o("span",Fa,m(We.value.rainfall)+"mm",1)]),o("div",Ha,[e[76]||(e[76]=o("span",{class:"label"},"紫外线指数:",-1)),o("span",Qa,m(We.value.uvIndex),1)]),o("div",Ga,[e[77]||(e[77]=o("span",{class:"label"},"空气质量:",-1)),o("span",Xa,m(We.value.airQuality),1)]),o("div",Ja,[e[78]||(e[78]=o("span",{class:"label"},"最后更新:",-1)),o("span",Ya,m(We.value.lastUpdate),1)]),o("div",ae,[e[79]||(e[79]=o("div",{class:"info-row"},[o("span",{class:"label"},"监测提醒:")],-1)),o("div",ee,[(n(!0),i(h,null,w(We.value.alerts,a=>(n(),d(l,{key:a,size:"small",color:"blue"},{default:r(()=>[v(m(a),1)]),_:2},1024))),128))])]),o("div",le,[e[80]||(e[80]=o("div",{class:"info-row"},[o("span",{class:"label"},"天气预报:")],-1)),o("div",se,[(n(!0),i(h,null,w(We.value.forecast,a=>(n(),i("div",{key:a.time,class:"forecast-item"},[o("span",te,m(a.time),1),o("span",ne,m(a.temp)+"°C",1),o("span",ie,m(a.weather),1),o("span",oe,m(a.wind)+"m/s",1)]))),128))])])],64)):p("",!0)])])];var a}),_:1})):p("",!0),c(qe,{title:"智能告警系统",size:"small",class:"info-card"},{default:r(()=>[o("div",ce,[c(Le,{checked:Qe.enabled,"onUpdate:checked":e[14]||(e[14]=a=>Qe.enabled=a),size:"small"},null,8,["checked"]),o("span",re,m(Qe.enabled?"已启用":"已禁用"),1)]),o("div",de,[(n(!0),i(h,null,w(el.value,a=>(n(),i("div",{key:a.id,class:g(["alarm-item",[a.level,a.status]]),onClick:e=>(a=>{Be.value=a,console.log("选中告警:",a.title)})(a)},[o("div",ue,["high"===a.level?(n(),d(f(S),{key:0})):"medium"===a.level?(n(),d(f(_),{key:1})):(n(),d(f(P),{key:2}))]),o("div",ve,[o("div",me,m(a.title),1),o("div",fe,m(a.description),1),o("div",he,[o("span",ge,m(a.time),1),o("span",we,m(a.deviceName),1),c(l,{color:"active"===a.status?"blue":"green",size:"small"},{default:r(()=>[v(m("active"===a.status?"活跃":"已解决"),1)]),_:2},1032,["color"])])])],10,pe))),128))]),Be.value?(n(),i("div",ye,[e[81]||(e[81]=o("div",{class:"action-title"},"建议操作:",-1)),o("div",be,[(n(!0),i(h,null,w(Be.value.actions,a=>(n(),d(s,{key:a,size:"small",type:"primary",onClick:e=>((a,e)=>{console.log("执行操作:",e,"告警:",a.title)})(Be.value,a)},{default:r(()=>[v(m(a),1)]),_:2},1032,["onClick"]))),128))])])):p("",!0)]),_:1}),al.isActive?(n(),d(qe,{key:1,title:"PTZ控制",size:"small",class:"info-card"},{default:r(()=>{var a;return[o("div",ke,[o("div",Me,[e[82]||(e[82]=o("span",{class:"label"},"当前摄像头:",-1)),o("span",ze,m(null==(a=al.currentCamera)?void 0:a.name),1)]),o("div",Ce,[o("div",xe,[e[83]||(e[83]=o("span",{class:"label"},"水平旋转 (Pan):",-1)),c(Fe,{value:al.pan,"onUpdate:value":e[15]||(e[15]=a=>al.pan=a),min:-180,max:180,step:1,onChange:e[16]||(e[16]=a=>bl("pan",a))},null,8,["value"]),o("span",Ae,m(al.pan)+"°",1)]),o("div",_e,[e[84]||(e[84]=o("span",{class:"label"},"垂直倾斜 (Tilt):",-1)),c(Fe,{value:al.tilt,"onUpdate:value":e[17]||(e[17]=a=>al.tilt=a),min:-90,max:90,step:1,onChange:e[18]||(e[18]=a=>bl("tilt",a))},null,8,["value"]),o("span",Ie,m(al.tilt)+"°",1)]),o("div",Te,[e[85]||(e[85]=o("span",{class:"label"},"缩放 (Zoom):",-1)),c(Fe,{value:al.zoom,"onUpdate:value":e[19]||(e[19]=a=>al.zoom=a),min:1,max:10,step:.1,onChange:e[20]||(e[20]=a=>bl("zoom",a))},null,8,["value"]),o("span",Se,m(al.zoom)+"x",1)])]),o("div",Pe,[c(s,{size:"small",onClick:e[21]||(e[21]=a=>al.isActive=!1)},{default:r(()=>[...e[86]||(e[86]=[v("关闭控制",-1)])]),_:1}),c(s,{size:"small",type:"primary",onClick:e[22]||(e[22]=a=>bl("reset",0))},{default:r(()=>[...e[87]||(e[87]=[v("重置位置",-1)])]),_:1})])])]}),_:1})):p("",!0),Ye.isPlaying?(n(),d(qe,{key:2,title:"视频监控",size:"small",class:"info-card"},{default:r(()=>{var a;return[o("div",Ue,[o("div",De,[e[88]||(e[88]=o("span",{class:"label"},"摄像头:",-1)),o("span",$e,m(null==(a=Ye.currentCamera)?void 0:a.name),1)]),o("div",Ze,[c(He,null,{default:r(()=>[c(s,{size:"small",onClick:e[23]||(e[23]=a=>Ye.isPlaying=!1)},{icon:r(()=>[c(f(A))]),default:r(()=>[e[89]||(e[89]=v(" 停止播放 ",-1))]),_:1}),c(s,{size:"small",onClick:e[24]||(e[24]=a=>kl(Ye.currentCamera))},{icon:r(()=>[c(f(y))]),default:r(()=>[v(" "+m(Ye.recording?"停止录制":"开始录制"),1)]),_:1})]),_:1})]),o("div",je,[e[92]||(e[92]=o("span",{class:"label"},"画质:",-1)),c(Xe,{value:Ye.quality,"onUpdate:value":e[25]||(e[25]=a=>Ye.quality=a),size:"small",style:{width:"80px"}},{default:r(()=>[c(Ge,{value:"HD"},{default:r(()=>[...e[90]||(e[90]=[v("HD",-1)])]),_:1}),c(Ge,{value:"4K"},{default:r(()=>[...e[91]||(e[91]=[v("4K",-1)])]),_:1})]),_:1},8,["value"])]),o("div",Ee,[c(l,{color:Ye.recording?"red":"green"},{default:r(()=>[v(m(Ye.recording?"录制中":"未录制"),1)]),_:1},8,["color"])])])]}),_:1})):p("",!0)])])])}}}),[["__scopeId","data-v-5c4f1905"]]);export{We as default};
