import{a4 as a,a5 as e,Y as l,r as t,a6 as i,a7 as n,a8 as s}from"./icons-15893848.js";import{d as o,f as u,c as d,r,o as c,V as v,W as p,a0 as m,k as f,$ as b,X as _,G as h,a3 as y,u as k,a8 as g,a9 as x,F as C,a1 as w,_ as z}from"./vendor-f41c3cc7.js";import{m as I,g as M,e as U,b as T}from"./antd-fa5730cf.js";import{_ as S}from"./index-a86697a3.js";const A={class:"whiteboard"},$={class:"property-bar"},j={class:"canvas-and-toolbar"},G={class:"left-tools"},R={class:"whiteboard-canvas"},B={class:"canvas-info"},K={class:"status-bar"},Q={class:"zoom-text"},P={class:"whiteboard-info"},W={class:"layers-panel"},D={class:"layer-actions"},E={class:"layer-list"},F={class:"collaboration-status"},L={class:"collaborators-list"},O={class:"collaborator-info"},V={class:"collaborator-name"},X={class:"collaborator-role"},Y={class:"collaborator-department"},q={class:"collaborator-last-action"},H={style:{"text-align":"center","margin-top":"8px"}},J={class:"template-grid"},N={class:"template-preview"},Z={class:"template-info"},aa={class:"history-time"},ea=S(o({__name:"whiteboard",setup(o){const S=u("pen"),ea=u(100),la=u([]),ta=u([]),ia=d(()=>la.value.length>0),na=d(()=>ta.value.length>0),sa=a=>{S.value=a,I.success(`已切换到 ${oa[a]} 工具`)},oa={pen:"画笔",highlighter:"高亮",text:"文字",image:"图片",shape:"图形",select:"选择"},ua=()=>{if(!ia.value)return;const a=la.value.pop();ta.value.push(a),I.info("已撤销一步")},da=()=>{if(!na.value)return;const a=ta.value.pop();la.value.push(a),I.info("已重做一步")},ra=()=>{la.value=[],ta.value=[],I.success("画布已清空")},ca=()=>{ea.value=Math.min(300,ea.value+10)},va=()=>{ea.value=Math.max(10,ea.value-10)},pa=()=>{ea.value=100},ma=u("#1677ff"),fa=u("#ffffff"),ba=u(4),_a=u(!0),ha=u(!0),ya=u(!1);let ka=null,ga=null;const xa=u([{id:1,name:"背景",visible:!0},{id:2,name:"标注",visible:!0},{id:3,name:"图形",visible:!0}]),Ca=u(3),wa=a=>xa.value.findIndex(e=>e.id===a)<xa.value.length-1,za=()=>{const a=Math.max(...xa.value.map(a=>a.id))+1;xa.value.unshift({id:a,name:`图层${a}`,visible:!0}),Ca.value=a,I.success("已新建图层")},Ia=r({activeBoards:8,onlineCollaborators:15,contentCount:125,collaborationQuality:88,todayCreated:23,totalCollaborationTime:67.5,avgParticipants:8.3,saveRate:97.8}),Ma=u([{id:1,name:"陈志强",avatar:"",status:"active",role:"主持人",department:"调度中心",lastAction:"绘制图形"},{id:2,name:"刘建国",avatar:"",status:"active",role:"参与者",department:"海事部门",lastAction:"添加文字"},{id:3,name:"王海峰",avatar:"",status:"active",role:"参与者",department:"港口管理",lastAction:"高亮标注"},{id:4,name:"赵明华",avatar:"",status:"active",role:"参与者",department:"应急响应",lastAction:"插入图片"},{id:5,name:"钱伟民",avatar:"",status:"active",role:"参与者",department:"船舶公司",lastAction:"绘制线条"},{id:6,name:"孙志刚",avatar:"",status:"idle",role:"参与者",department:"气象部门",lastAction:"查看内容"},{id:7,name:"周建军",avatar:"",status:"active",role:"参与者",department:"安全监督",lastAction:"编辑文字"},{id:8,name:"吴建华",avatar:"",status:"active",role:"参与者",department:"技术保障",lastAction:"移动元素"}]),Ua=r({current:1,pageSize:3}),Ta=d(()=>{const a=(Ua.current-1)*Ua.pageSize,e=a+Ua.pageSize;return Ma.value.slice(a,e)}),Sa=a=>{Ua.current=a};r({permission:"edit",realTimeSync:!0,conflictResolution:"last-wins"});const Aa=u([{id:1,name:"船舶调度方案讨论",creator:"陈志强",createTime:"2025-08-20 09:00:00",lastModified:"2025-08-20 10:30:00",collaborators:8,status:"活跃",department:"调度中心",type:"方案讨论"},{id:2,name:"港口安全设计评审",creator:"刘建国",createTime:"2025-08-20 08:00:00",lastModified:"2025-08-20 09:15:00",collaborators:6,status:"活跃",department:"安全监督",type:"设计评审"},{id:3,name:"应急预案流程图",creator:"王海峰",createTime:"2025-08-20 14:00:00",lastModified:"2025-08-20 15:45:00",collaborators:7,status:"活跃",department:"应急响应",type:"流程设计"},{id:4,name:"技术架构图",creator:"赵明华",createTime:"2025-08-19 10:00:00",lastModified:"2025-08-19 16:30:00",collaborators:5,status:"完成",department:"技术保障",type:"技术设计"},{id:5,name:"培训课程大纲",creator:"钱伟民",createTime:"2025-08-19 15:00:00",lastModified:"2025-08-19 17:00:00",collaborators:4,status:"完成",department:"技术保障",type:"培训材料"},{id:6,name:"项目进度跟踪",creator:"孙志刚",createTime:"2025-08-18 09:00:00",lastModified:"2025-08-18 11:30:00",collaborators:9,status:"活跃",department:"项目管理",type:"进度管理"},{id:7,name:"会议纪要整理",creator:"周建军",createTime:"2025-08-18 14:00:00",lastModified:"2025-08-18 15:15:00",collaborators:3,status:"完成",department:"调度中心",type:"会议记录"},{id:8,name:"问题分析图表",creator:"吴建华",createTime:"2025-08-17 16:00:00",lastModified:"2025-08-17 18:00:00",collaborators:6,status:"完成",department:"技术保障",type:"问题分析"}]),$a=[{title:"白板名称",dataIndex:"name",key:"name"},{title:"白板类型",dataIndex:"type",key:"type"},{title:"创建者",dataIndex:"creator",key:"creator"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"最后修改",dataIndex:"lastModified",key:"lastModified"},{title:"协作者",dataIndex:"collaborators",key:"collaborators"},{title:"负责部门",dataIndex:"department",key:"department"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",key:"action",slots:{customRender:"action"}}],ja=u([{id:1,name:"会议记录模板",description:"适用于会议记录和讨论",icon:"file-text"},{id:2,name:"流程图模板",description:"适用于流程设计和分析",icon:"share-alt"},{id:3,name:"思维导图模板",description:"适用于思维整理和规划",icon:"branches"}]),Ga=u([{id:1,action:"陈志强 添加了新的图形元素",time:"2分钟前"},{id:2,action:"刘建国 修改了文字内容",time:"5分钟前"},{id:3,action:"王海峰 上传了图片",time:"10分钟前"}]),Ra=r({canvasSize:"1920x1080",backgroundColor:"#ffffff",showGrid:!0,autoSave:!0,saveInterval:5}),Ba=u("boards"),Ka=u(!1),Qa=()=>{I.success("白板设置已保存"),Ka.value=!1},Pa=d(()=>"1920x1080");return c(()=>{ga=window.setInterval(()=>{Ia.onlineCollaborators=Math.floor(10*Math.random())+10,Ia.collaborationQuality=Math.floor(20*Math.random())+70},8e3),ka=window.setInterval(()=>{ya.value=!0,setTimeout(()=>{ya.value=!1},800)},12e3),window.addEventListener("beforeunload",()=>{null!==ga&&window.clearInterval(ga),null!==ka&&window.clearInterval(ka)})}),(o,u)=>{const d=_("a-statistic"),r=_("a-col"),c=_("a-row"),la=_("a-card"),ta=_("a-color-picker"),ka=_("a-slider"),ga=_("a-switch"),Wa=_("a-tag"),Da=_("a-space"),Ea=_("a-button"),Fa=_("a-tooltip"),La=_("a-divider"),Oa=_("a-icon"),Va=_("a-descriptions-item"),Xa=_("a-descriptions"),Ya=_("a-input"),qa=_("a-avatar"),Ha=_("a-pagination"),Ja=_("a-table"),Na=_("a-tab-pane"),Za=_("a-timeline-item"),ae=_("a-timeline"),ee=_("a-tabs"),le=_("a-select-option"),te=_("a-select"),ie=_("a-form-item"),ne=_("a-input-number"),se=_("a-form"),oe=_("a-modal");return v(),p("div",A,[u[51]||(u[51]=m("div",{class:"page-header"},[m("h1",null,"电子白板"),m("p",null,"支持多人协作绘图、标注、文档展示等功能的电子白板")],-1)),f(la,{class:"status-overview",title:"白板状态概览"},{default:b(()=>[f(c,{gutter:16},{default:b(()=>[f(r,{span:6},{default:b(()=>[f(d,{title:"当前白板数",value:Ia.activeBoards},null,8,["value"])]),_:1}),f(r,{span:6},{default:b(()=>[f(d,{title:"在线协作者",value:Ia.onlineCollaborators},null,8,["value"])]),_:1}),f(r,{span:6},{default:b(()=>[f(d,{title:"内容数量",value:Ia.contentCount},null,8,["value"])]),_:1}),f(r,{span:6},{default:b(()=>[f(d,{title:"协作质量",value:Ia.collaborationQuality,suffix:"%"},null,8,["value"])]),_:1})]),_:1}),f(c,{gutter:16,style:{"margin-top":"16px"}},{default:b(()=>[f(r,{span:6},{default:b(()=>[f(d,{title:"今日创建",value:Ia.todayCreated},null,8,["value"])]),_:1}),f(r,{span:6},{default:b(()=>[f(d,{title:"总协作时长",value:Ia.totalCollaborationTime,suffix:"小时"},null,8,["value"])]),_:1}),f(r,{span:6},{default:b(()=>[f(d,{title:"平均参与者",value:Ia.avgParticipants,suffix:"人"},null,8,["value"])]),_:1}),f(r,{span:6},{default:b(()=>[f(d,{title:"保存率",value:Ia.saveRate,suffix:"%"},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(c,{gutter:16,class:"whiteboard-workspace"},{default:b(()=>[f(r,{span:18},{default:b(()=>[f(la,{title:"白板工作区",class:"whiteboard-main"},{default:b(()=>[m("div",$,[f(Da,{wrap:""},{default:b(()=>[u[19]||(u[19]=m("span",null,"画笔颜色",-1)),f(ta,{value:ma.value,"onUpdate:value":u[0]||(u[0]=a=>ma.value=a)},null,8,["value"]),u[20]||(u[20]=m("span",null,"粗细",-1)),f(ka,{value:ba.value,"onUpdate:value":u[1]||(u[1]=a=>ba.value=a),min:1,max:20,style:{width:"160px"}},null,8,["value"]),u[21]||(u[21]=m("span",null,"填充",-1)),f(ta,{value:fa.value,"onUpdate:value":u[2]||(u[2]=a=>fa.value=a)},null,8,["value"]),f(ga,{checked:_a.value,"onUpdate:checked":u[3]||(u[3]=a=>_a.value=a)},null,8,["checked"]),u[22]||(u[22]=m("span",null,"显示网格",-1)),f(ga,{checked:ha.value,"onUpdate:checked":u[4]||(u[4]=a=>ha.value=a)},null,8,["checked"]),u[23]||(u[23]=m("span",null,"吸附对齐",-1)),f(Wa,{color:ya.value?"orange":"green"},{default:b(()=>[h(y(ya.value?"自动保存中…":"已自动保存"),1)]),_:1},8,["color"])]),_:1})]),m("div",j,[m("div",G,[f(Fa,{placement:"right",title:"画笔"},{default:b(()=>[f(Ea,{type:"pen"===S.value?"primary":"default",onClick:u[5]||(u[5]=a=>sa("pen"))},{default:b(()=>[f(k(M))]),_:1},8,["type"])]),_:1}),f(Fa,{placement:"right",title:"高亮"},{default:b(()=>[f(Ea,{type:"highlighter"===S.value?"primary":"default",onClick:u[6]||(u[6]=a=>sa("highlighter"))},{default:b(()=>[f(k(a))]),_:1},8,["type"])]),_:1}),f(Fa,{placement:"right",title:"文字"},{default:b(()=>[f(Ea,{type:"text"===S.value?"primary":"default",onClick:u[7]||(u[7]=a=>sa("text"))},{default:b(()=>[f(k(e))]),_:1},8,["type"])]),_:1}),f(Fa,{placement:"right",title:"图片"},{default:b(()=>[f(Ea,{type:"image"===S.value?"primary":"default",onClick:u[8]||(u[8]=a=>sa("image"))},{default:b(()=>[f(k(l))]),_:1},8,["type"])]),_:1}),f(Fa,{placement:"right",title:"图形"},{default:b(()=>[f(Ea,{type:"shape"===S.value?"primary":"default",onClick:u[9]||(u[9]=a=>sa("shape"))},{default:b(()=>[f(k(t))]),_:1},8,["type"])]),_:1}),f(Fa,{placement:"right",title:"选择"},{default:b(()=>[f(Ea,{type:"select"===S.value?"primary":"default",onClick:u[10]||(u[10]=a=>sa("select"))},{default:b(()=>[f(k(i))]),_:1},8,["type"])]),_:1}),f(La),f(Fa,{placement:"right",title:"撤销"},{default:b(()=>[f(Ea,{disabled:!ia.value,onClick:ua},{default:b(()=>[f(k(n))]),_:1},8,["disabled"])]),_:1}),f(Fa,{placement:"right",title:"重做"},{default:b(()=>[f(Ea,{disabled:!na.value,onClick:da},{default:b(()=>[f(k(s))]),_:1},8,["disabled"])]),_:1}),f(Fa,{placement:"right",title:"清除"},{default:b(()=>[f(Ea,{onClick:ra},{default:b(()=>[f(k(U))]),_:1})]),_:1})]),m("div",R,[m("div",{class:g(["canvas-placeholder",{"grid-bg":_a.value}])},[f(Oa,{type:"edit"}),u[25]||(u[25]=m("p",null,"白板画布区域",-1)),m("div",B,[m("span",null,"尺寸: "+y(Pa.value),1),m("span",null,"缩放: "+y(ea.value)+"%",1),u[24]||(u[24]=m("span",null,"模式: 协作模式",-1))])],2),u[26]||(u[26]=m("div",{class:"minimap"},[m("div",{class:"minimap-title"},"迷你地图"),m("div",{class:"minimap-box"})],-1))])]),m("div",K,[m("span",null,"工具: "+y(oa[S.value]),1),m("span",null,[u[27]||(u[27]=h("颜色: ",-1)),m("i",{class:"color-dot",style:x({background:ma.value})},null,4)]),m("span",null,"粗细: "+y(ba.value)+" px",1),f(Da,null,{default:b(()=>[f(Ea,{size:"small",onClick:va},{default:b(()=>[...u[28]||(u[28]=[h("-",-1)])]),_:1}),m("span",Q,y(ea.value)+"%",1),f(Ea,{size:"small",onClick:ca},{default:b(()=>[...u[29]||(u[29]=[h("+",-1)])]),_:1}),f(Ea,{size:"small",onClick:pa},{default:b(()=>[...u[30]||(u[30]=[h("重置",-1)])]),_:1})]),_:1})]),m("div",P,[f(Xa,{column:4,bordered:""},{default:b(()=>[f(Va,{label:"白板ID"},{default:b(()=>[...u[31]||(u[31]=[h("WB-2025-001",-1)])]),_:1}),f(Va,{label:"创建者"},{default:b(()=>[...u[32]||(u[32]=[h("陈志强",-1)])]),_:1}),f(Va,{label:"创建时间"},{default:b(()=>[...u[33]||(u[33]=[h("2025-08-26 09:00:00",-1)])]),_:1}),f(Va,{label:"最后修改"},{default:b(()=>[...u[34]||(u[34]=[h("2分钟前",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),f(r,{span:6},{default:b(()=>[f(la,{title:"图层与协作",class:"collaboration-panel"},{default:b(()=>[m("div",W,[u[39]||(u[39]=m("h4",null,"图层",-1)),m("div",D,[f(Ea,{size:"small",onClick:za},{default:b(()=>[...u[35]||(u[35]=[h("新建图层",-1)])]),_:1})]),m("div",E,[(v(!0),p(C,null,w(xa.value,a=>{return v(),p("div",{class:g(["layer-item",{active:a.id===Ca.value}]),key:a.id},[f(ga,{checked:a.visible,"onUpdate:checked":e=>a.visible=e,size:"small"},null,8,["checked","onUpdate:checked"]),f(Ya,{size:"small",value:a.name,"onUpdate:value":e=>a.name=e,style:{width:"90px",margin:"0 6px"}},null,8,["value","onUpdate:value"]),f(Ea,{size:"small",onClick:e=>(a=>{const e=xa.value.findIndex(e=>e.id===a);if(e<=0)return;const l=[...xa.value],[t]=l.splice(e,1);l.splice(e-1,0,t),xa.value=l})(a.id),disabled:(e=a.id,!(xa.value.findIndex(a=>a.id===e)>0))},{default:b(()=>[...u[36]||(u[36]=[h("上移",-1)])]),_:2},1032,["onClick","disabled"]),f(Ea,{size:"small",onClick:e=>(a=>{const e=xa.value.findIndex(e=>e.id===a);if(e<0||e>=xa.value.length-1)return;const l=[...xa.value],[t]=l.splice(e,1);l.splice(e+1,0,t),xa.value=l})(a.id),disabled:!wa(a.id)},{default:b(()=>[...u[37]||(u[37]=[h("下移",-1)])]),_:2},1032,["onClick","disabled"]),f(Ea,{size:"small",danger:"",onClick:e=>(a=>{if(xa.value.length<=1)return I.warning("至少保留一个图层");xa.value=xa.value.filter(e=>e.id!==a),Ca.value=xa.value[0].id})(a.id)},{default:b(()=>[...u[38]||(u[38]=[h("删",-1)])]),_:2},1032,["onClick"])],2);var e}),128))])]),m("div",F,[u[41]||(u[41]=m("h4",null,"协作状态",-1)),f(Wa,{color:"green"},{default:b(()=>[...u[40]||(u[40]=[h("协作中",-1)])]),_:1}),f(Wa,{color:"blue"},{default:b(()=>[h(y(Ia.onlineCollaborators)+"人在线",1)]),_:1})]),m("div",L,[u[42]||(u[42]=m("h4",null,"协作者",-1)),(v(!0),p(C,null,w(Ta.value,a=>(v(),p("div",{class:"collaborator-item",key:a.id},[f(qa,{src:a.avatar,size:32},null,8,["src"]),m("div",O,[m("div",V,y(a.name),1),m("div",X,y(a.role),1),m("div",Y,y(a.department),1),m("div",q,y(a.lastAction),1)]),f(Wa,{color:"active"===a.status?"green":"gray",size:"small"},{default:b(()=>[h(y("active"===a.status?"活跃":"空闲"),1)]),_:2},1032,["color"])]))),128)),m("div",H,[f(Ha,{current:Ua.current,"onUpdate:current":u[11]||(u[11]=a=>Ua.current=a),"page-size":Ua.pageSize,total:Ma.value.length,"show-size-changer":!1,size:"small",onChange:Sa},null,8,["current","page-size","total"])])])]),_:1})]),_:1})]),_:1}),f(la,{title:"内容管理",class:"content-management"},{default:b(()=>[f(ee,{activeKey:Ba.value,"onUpdate:activeKey":u[12]||(u[12]=a=>Ba.value=a)},{default:b(()=>[f(Na,{key:"boards",tab:"白板列表"},{default:b(()=>[f(Ja,{columns:$a,"data-source":Aa.value,pagination:{pageSize:10}},{action:b(({record:a})=>[f(Ea,{type:"link",size:"small",onClick:e=>{return l=a,void I.info(`打开白板: ${l.name}`);var l}},{icon:b(()=>[f(k(T))]),default:b(()=>[u[43]||(u[43]=h(" 打开 ",-1))]),_:2},1032,["onClick"]),f(Ea,{type:"link",size:"small",onClick:e=>{return l=a,void I.info(`编辑白板: ${l.name}`);var l}},{icon:b(()=>[f(k(M))]),default:b(()=>[u[44]||(u[44]=h(" 编辑 ",-1))]),_:2},1032,["onClick"]),f(Ea,{type:"link",size:"small",onClick:e=>{return l=a,void I.success(`删除白板: ${l.name}`);var l}},{icon:b(()=>[f(k(U))]),default:b(()=>[u[45]||(u[45]=h(" 删除 ",-1))]),_:2},1032,["onClick"])]),_:1},8,["data-source"])]),_:1}),f(Na,{key:"templates",tab:"模板库"},{default:b(()=>[m("div",J,[(v(!0),p(C,null,w(ja.value,a=>(v(),p("div",{class:"template-item",key:a.id},[m("div",N,[f(Oa,{type:a.icon},null,8,["type"])]),m("div",Z,[m("h4",null,y(a.name),1),m("p",null,y(a.description),1),f(Ea,{type:"primary",size:"small",onClick:e=>(a=>{I.success(`使用模板: ${a.name}`)})(a)},{default:b(()=>[...u[46]||(u[46]=[h(" 使用模板 ",-1)])]),_:2},1032,["onClick"])])]))),128))])]),_:1}),f(Na,{key:"history",tab:"历史记录"},{default:b(()=>[f(ae,null,{default:b(()=>[(v(!0),p(C,null,w(Ga.value,a=>(v(),z(Za,{key:a.id},{default:b(()=>[m("p",null,y(a.action),1),m("p",aa,y(a.time),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1}),f(oe,{visible:Ka.value,"onUpdate:visible":u[18]||(u[18]=a=>Ka.value=a),title:"白板设置",width:"600px",onOk:Qa},{default:b(()=>[f(se,{model:Ra,layout:"vertical"},{default:b(()=>[f(ie,{label:"画布尺寸"},{default:b(()=>[f(te,{value:Ra.canvasSize,"onUpdate:value":u[13]||(u[13]=a=>Ra.canvasSize=a)},{default:b(()=>[f(le,{value:"1920x1080"},{default:b(()=>[...u[47]||(u[47]=[h("1920x1080 (16:9)",-1)])]),_:1}),f(le,{value:"1366x768"},{default:b(()=>[...u[48]||(u[48]=[h("1366x768 (16:9)",-1)])]),_:1}),f(le,{value:"1024x768"},{default:b(()=>[...u[49]||(u[49]=[h("1024x768 (4:3)",-1)])]),_:1}),f(le,{value:"custom"},{default:b(()=>[...u[50]||(u[50]=[h("自定义",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),f(ie,{label:"背景颜色"},{default:b(()=>[f(ta,{value:Ra.backgroundColor,"onUpdate:value":u[14]||(u[14]=a=>Ra.backgroundColor=a)},null,8,["value"])]),_:1}),f(ie,{label:"网格显示"},{default:b(()=>[f(ga,{checked:Ra.showGrid,"onUpdate:checked":u[15]||(u[15]=a=>Ra.showGrid=a)},null,8,["checked"])]),_:1}),f(ie,{label:"自动保存"},{default:b(()=>[f(ga,{checked:Ra.autoSave,"onUpdate:checked":u[16]||(u[16]=a=>Ra.autoSave=a)},null,8,["checked"])]),_:1}),f(ie,{label:"保存间隔(分钟)"},{default:b(()=>[f(ne,{value:Ra.saveInterval,"onUpdate:value":u[17]||(u[17]=a=>Ra.saveInterval=a),min:1,max:60},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),[["__scopeId","data-v-b954c2ae"]]);export{ea as default};
