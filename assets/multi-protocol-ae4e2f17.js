import{d as e,f as t,r as a,o,V as l,W as s,a0 as i,k as r,$ as u,X as c,u as n,G as d,_ as v,a3 as p,a7 as m}from"./vendor-f41c3cc7.js";import{m as f,P as g}from"./antd-fa5730cf.js";import{q as y,m as _,h as P,A as b}from"./icons-15893848.js";import{_ as k}from"./index-781a1167.js";const C={class:"multi-protocol"},h={class:"protocol-overview"},w={class:"card-content"},S={class:"icon-wrapper gb28181"},I={class:"card-content"},T={class:"icon-wrapper onvif"},x={class:"card-content"},O={class:"icon-wrapper rtsp"},R={class:"card-content"},V={class:"icon-wrapper custom"},F={class:"protocol-management"},N=k(e({__name:"multi-protocol",setup(e){const k=[{title:"协议名称",dataIndex:"name",key:"name"},{title:"协议类型",dataIndex:"type",key:"type"},{title:"端口号",dataIndex:"port",key:"port"},{title:"状态",dataIndex:"status",key:"status"},{title:"设备数量",dataIndex:"deviceCount",key:"deviceCount"},{title:"操作",key:"action",width:150}],N=[{title:"源协议",dataIndex:"sourceProtocol",key:"sourceProtocol"},{title:"目标协议",dataIndex:"targetProtocol",key:"targetProtocol"},{title:"转换模式",dataIndex:"mode",key:"mode"},{title:"优先级",dataIndex:"priority",key:"priority"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",key:"action",width:200}],U=t(!1),j=t(!1),D=t(null),q=t(null),G=t(),z=t(),B=a({name:"",type:"",port:80,status:"active",description:"",config:""}),M=a({sourceProtocol:"",targetProtocol:"",mode:"",priority:5,rules:"",notes:""}),A={name:[{required:!0,message:"请输入协议名称"}],type:[{required:!0,message:"请选择协议类型"}],port:[{required:!0,message:"请输入端口号"}],status:[{required:!0,message:"请选择状态"}]},E={sourceProtocol:[{required:!0,message:"请选择源协议"}],targetProtocol:[{required:!0,message:"请选择目标协议"}],mode:[{required:!0,message:"请选择转换模式"}],priority:[{required:!0,message:"请输入优先级"}]},H=t([{id:"1",name:"GB28181-2022",type:"gb28181",port:5060,status:"active",deviceCount:324,description:"国标视频监控协议",config:'{"sipDomain": "3402000000", "localPort": 5060}'},{id:"2",name:"ONVIF-2.0",type:"onvif",port:80,status:"active",deviceCount:156,description:"网络视频接口标准",config:'{"wsdlPath": "/onvif/device_service", "username": "admin"}'},{id:"3",name:"RTSP-Server",type:"rtsp",port:554,status:"active",deviceCount:412,description:"实时流传输协议",config:'{"rtspPort": 554, "rtpPort": 8000}'},{id:"4",name:"Custom-API",type:"custom",port:8080,status:"inactive",deviceCount:78,description:"自定义API协议",config:'{"apiEndpoint": "/api/v1", "authType": "token"}'},{id:"5",name:"GB28181-2016",type:"gb28181",port:5061,status:"active",deviceCount:89,description:"国标2016版本协议",config:'{"sipDomain": "3402000000", "localPort": 5061, "version": "2016"}'},{id:"6",name:"ONVIF-Profile-S",type:"onvif",port:8080,status:"active",deviceCount:67,description:"ONVIF Profile S标准",config:'{"wsdlPath": "/onvif/device_service", "profile": "S", "username": "admin"}'},{id:"7",name:"RTSP-Multicast",type:"rtsp",port:554,status:"active",deviceCount:123,description:"RTSP组播流服务",config:'{"rtspPort": 554, "multicastEnabled": true, "multicastIP": "224.1.1.1"}'},{id:"8",name:"HikVision-SDK",type:"custom",port:8e3,status:"active",deviceCount:45,description:"海康威视SDK协议",config:'{"sdkVersion": "6.1.9", "port": 8000, "authMode": "digest"}'},{id:"9",name:"Dahua-SDK",type:"custom",port:37777,status:"active",deviceCount:33,description:"大华SDK协议",config:'{"sdkVersion": "3.0", "port": 37777, "keepAlive": 30}'},{id:"10",name:"RTMP-Server",type:"custom",port:1935,status:"inactive",deviceCount:0,description:"实时消息传输协议",config:'{"rtmpPort": 1935, "chunkSize": 4096, "maxConnections": 1000}'},{id:"11",name:"WebRTC-Gateway",type:"custom",port:8443,status:"active",deviceCount:28,description:"WebRTC网关协议",config:'{"httpsPort": 8443, "stunServer": "stun:stun.l.google.com:19302"}'},{id:"12",name:"ONVIF-Profile-T",type:"onvif",port:8081,status:"active",deviceCount:34,description:"ONVIF Profile T高级分析",config:'{"wsdlPath": "/onvif/device_service", "profile": "T", "analytics": true}'}]),K=t([{id:"1",sourceProtocol:"gb28181",targetProtocol:"rtsp",mode:"realtime",priority:1,status:"active",rules:'{"videoCodec": "H.264", "audioCodec": "G.711"}',notes:"国标转RTSP实时流"},{id:"2",sourceProtocol:"onvif",targetProtocol:"gb28181",mode:"on-demand",priority:2,status:"active",rules:'{"ptzControl": true, "eventNotification": true}',notes:"ONVIF转国标按需转换"},{id:"3",sourceProtocol:"rtsp",targetProtocol:"custom",mode:"batch",priority:3,status:"active",rules:'{"format": "mp4", "bitrate": "2Mbps", "resolution": "1920x1080"}',notes:"RTSP流转自定义格式批量处理"},{id:"4",sourceProtocol:"custom",targetProtocol:"onvif",mode:"realtime",priority:2,status:"active",rules:'{"profileMapping": {"S": "standard", "T": "advanced"}}',notes:"自定义协议转ONVIF实时转换"},{id:"5",sourceProtocol:"gb28181",targetProtocol:"custom",mode:"on-demand",priority:4,status:"inactive",rules:'{"webrtcEnabled": true, "iceServers": ["stun:stun.l.google.com:19302"]}',notes:"国标转WebRTC按需转换"},{id:"6",sourceProtocol:"onvif",targetProtocol:"rtsp",mode:"realtime",priority:1,status:"active",rules:'{"streamProfile": "main", "videoCodec": "H.265", "audioEnabled": false}',notes:"ONVIF转RTSP主码流实时转换"},{id:"7",sourceProtocol:"rtsp",targetProtocol:"gb28181",mode:"batch",priority:5,status:"active",rules:'{"sipDomain": "3402000000", "deviceType": "camera", "manufacturer": "generic"}',notes:"RTSP流转国标批量注册"},{id:"8",sourceProtocol:"custom",targetProtocol:"rtsp",mode:"realtime",priority:3,status:"active",rules:'{"transcoding": true, "targetCodec": "H.264", "bitrate": "adaptive"}',notes:"自定义协议转RTSP实时转码"}]),W=()=>{if(D.value)Object.assign(D.value,B),f.success("协议更新成功");else{const e={id:Date.now().toString(),...B,deviceCount:0};H.value.push(e),f.success("协议添加成功")}U.value=!1,L()},$=()=>{U.value=!1,L()},J=()=>{if(q.value)Object.assign(q.value,M),f.success("转换规则更新成功");else{const e={id:Date.now().toString(),...M,status:"active"};K.value.push(e),f.success("转换规则添加成功")}j.value=!1,Q()},X=()=>{j.value=!1,Q()},L=()=>{Object.assign(B,{name:"",type:"",port:80,status:"active",description:"",config:""}),D.value=null},Q=()=>{Object.assign(M,{sourceProtocol:"",targetProtocol:"",mode:"",priority:5,rules:"",notes:""}),q.value=null};return o(()=>{console.log("多协议适配页面已加载")}),(e,t)=>{const a=c("a-card"),o=c("a-col"),L=c("a-row"),Q=c("a-button"),Y=c("a-tag"),Z=c("a-space"),ee=c("a-table"),te=c("a-input"),ae=c("a-form-item"),oe=c("a-select-option"),le=c("a-select"),se=c("a-input-number"),ie=c("a-textarea"),re=c("a-form"),ue=c("a-modal");return l(),s("div",C,[t[41]||(t[41]=i("div",{class:"page-header"},[i("h2",null,"多协议适配"),i("p",null,"支持多种视频协议接入，实现协议间的智能转换和统一管理")],-1)),i("div",h,[r(L,{gutter:16},{default:u(()=>[r(o,{span:6},{default:u(()=>[r(a,{class:"overview-card"},{default:u(()=>[i("div",w,[i("div",S,[r(n(y))]),t[16]||(t[16]=i("div",{class:"stats"},[i("div",{class:"number"},"324"),i("div",{class:"label"},"GB/T 28181")],-1))])]),_:1})]),_:1}),r(o,{span:6},{default:u(()=>[r(a,{class:"overview-card"},{default:u(()=>[i("div",I,[i("div",T,[r(n(_))]),t[17]||(t[17]=i("div",{class:"stats"},[i("div",{class:"number"},"156"),i("div",{class:"label"},"ONVIF")],-1))])]),_:1})]),_:1}),r(o,{span:6},{default:u(()=>[r(a,{class:"overview-card"},{default:u(()=>[i("div",x,[i("div",O,[r(n(P))]),t[18]||(t[18]=i("div",{class:"stats"},[i("div",{class:"number"},"412"),i("div",{class:"label"},"RTSP")],-1))])]),_:1})]),_:1}),r(o,{span:6},{default:u(()=>[r(a,{class:"overview-card"},{default:u(()=>[i("div",R,[i("div",V,[r(n(b))]),t[19]||(t[19]=i("div",{class:"stats"},[i("div",{class:"number"},"78"),i("div",{class:"label"},"自定义协议")],-1))])]),_:1})]),_:1})]),_:1})]),i("div",F,[r(L,{gutter:16},{default:u(()=>[r(o,{span:12},{default:u(()=>[r(a,{title:"协议配置",class:"management-card"},{extra:u(()=>[r(Q,{type:"primary",onClick:t[0]||(t[0]=e=>U.value=!0)},{default:u(()=>[r(n(g)),t[20]||(t[20]=d(" 添加协议 ",-1))]),_:1})]),default:u(()=>[r(ee,{columns:k,"data-source":H.value,pagination:!1,size:"small",scroll:{y:300}},{bodyCell:u(({column:e,record:a})=>["status"===e.key?(l(),v(Y,{key:0,color:"active"===a.status?"green":"red"},{default:u(()=>[d(p("active"===a.status?"启用":"禁用"),1)]),_:2},1032,["color"])):"action"===e.key?(l(),v(Z,{key:1},{default:u(()=>[r(Q,{type:"link",size:"small",onClick:e=>(e=>{D.value=e,Object.assign(B,e),U.value=!0})(a)},{default:u(()=>[...t[21]||(t[21]=[d(" 编辑 ",-1)])]),_:2},1032,["onClick"]),r(Q,{type:"link",size:"small",danger:"active"===a.status,onClick:e=>(e=>{const t="active"===e.status?"inactive":"active";e.status=t,f.success(`协议${e.name}已${"active"===t?"启用":"禁用"}`)})(a)},{default:u(()=>[d(p("active"===a.status?"禁用":"启用"),1)]),_:2},1032,["danger","onClick"])]),_:2},1024)):m("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1}),r(o,{span:12},{default:u(()=>[r(a,{title:"协议转换规则",class:"management-card"},{extra:u(()=>[r(Q,{type:"primary",onClick:t[1]||(t[1]=e=>j.value=!0)},{default:u(()=>[r(n(g)),t[22]||(t[22]=d(" 添加转换规则 ",-1))]),_:1})]),default:u(()=>[r(ee,{columns:N,"data-source":K.value,pagination:!1,size:"small",scroll:{y:300}},{bodyCell:u(({column:e,record:a})=>["status"===e.key?(l(),v(Y,{key:0,color:"active"===a.status?"green":"red"},{default:u(()=>[d(p("active"===a.status?"启用":"禁用"),1)]),_:2},1032,["color"])):"action"===e.key?(l(),v(Z,{key:1},{default:u(()=>[r(Q,{type:"link",size:"small",onClick:e=>(e=>{q.value=e,Object.assign(M,e),j.value=!0})(a)},{default:u(()=>[...t[23]||(t[23]=[d(" 编辑 ",-1)])]),_:2},1032,["onClick"]),r(Q,{type:"link",size:"small",danger:"active"===a.status,onClick:e=>(e=>{const t="active"===e.status?"inactive":"active";e.status=t,f.success("转换规则已"+("active"===t?"启用":"禁用"))})(a)},{default:u(()=>[d(p("active"===a.status?"禁用":"启用"),1)]),_:2},1032,["danger","onClick"])]),_:2},1024)):m("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1})]),r(ue,{open:U.value,"onUpdate:open":t[8]||(t[8]=e=>U.value=e),title:"添加协议",width:"600px",onOk:W,onCancel:$},{default:u(()=>[r(re,{ref_key:"protocolFormRef",ref:G,model:B,rules:A,"label-col":{span:6},"wrapper-col":{span:18}},{default:u(()=>[r(ae,{label:"协议名称",name:"name"},{default:u(()=>[r(te,{value:B.name,"onUpdate:value":t[2]||(t[2]=e=>B.name=e),placeholder:"请输入协议名称"},null,8,["value"])]),_:1}),r(ae,{label:"协议类型",name:"type"},{default:u(()=>[r(le,{value:B.type,"onUpdate:value":t[3]||(t[3]=e=>B.type=e),placeholder:"请选择协议类型"},{default:u(()=>[r(oe,{value:"gb28181"},{default:u(()=>[...t[24]||(t[24]=[d("GB/T 28181",-1)])]),_:1}),r(oe,{value:"onvif"},{default:u(()=>[...t[25]||(t[25]=[d("ONVIF",-1)])]),_:1}),r(oe,{value:"rtsp"},{default:u(()=>[...t[26]||(t[26]=[d("RTSP",-1)])]),_:1}),r(oe,{value:"custom"},{default:u(()=>[...t[27]||(t[27]=[d("自定义协议",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),r(ae,{label:"端口号",name:"port"},{default:u(()=>[r(se,{value:B.port,"onUpdate:value":t[4]||(t[4]=e=>B.port=e),min:1,max:65535,style:{width:"100%"}},null,8,["value"])]),_:1}),r(ae,{label:"状态",name:"status"},{default:u(()=>[r(le,{value:B.status,"onUpdate:value":t[5]||(t[5]=e=>B.status=e),placeholder:"请选择状态"},{default:u(()=>[r(oe,{value:"active"},{default:u(()=>[...t[28]||(t[28]=[d("启用",-1)])]),_:1}),r(oe,{value:"inactive"},{default:u(()=>[...t[29]||(t[29]=[d("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),r(ae,{label:"协议描述",name:"description"},{default:u(()=>[r(ie,{value:B.description,"onUpdate:value":t[6]||(t[6]=e=>B.description=e),rows:3,placeholder:"请输入协议描述"},null,8,["value"])]),_:1}),r(ae,{label:"配置参数",name:"config"},{default:u(()=>[r(ie,{value:B.config,"onUpdate:value":t[7]||(t[7]=e=>B.config=e),rows:4,placeholder:"请输入JSON格式的配置参数"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),r(ue,{open:j.value,"onUpdate:open":t[15]||(t[15]=e=>j.value=e),title:"添加转换规则",width:"600px",onOk:J,onCancel:X},{default:u(()=>[r(re,{ref_key:"conversionFormRef",ref:z,model:M,rules:E,"label-col":{span:6},"wrapper-col":{span:18}},{default:u(()=>[r(ae,{label:"源协议",name:"sourceProtocol"},{default:u(()=>[r(le,{value:M.sourceProtocol,"onUpdate:value":t[9]||(t[9]=e=>M.sourceProtocol=e),placeholder:"请选择源协议"},{default:u(()=>[r(oe,{value:"gb28181"},{default:u(()=>[...t[30]||(t[30]=[d("GB/T 28181",-1)])]),_:1}),r(oe,{value:"onvif"},{default:u(()=>[...t[31]||(t[31]=[d("ONVIF",-1)])]),_:1}),r(oe,{value:"rtsp"},{default:u(()=>[...t[32]||(t[32]=[d("RTSP",-1)])]),_:1}),r(oe,{value:"custom"},{default:u(()=>[...t[33]||(t[33]=[d("自定义协议",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),r(ae,{label:"目标协议",name:"targetProtocol"},{default:u(()=>[r(le,{value:M.targetProtocol,"onUpdate:value":t[10]||(t[10]=e=>M.targetProtocol=e),placeholder:"请选择目标协议"},{default:u(()=>[r(oe,{value:"gb28181"},{default:u(()=>[...t[34]||(t[34]=[d("GB/T 28181",-1)])]),_:1}),r(oe,{value:"onvif"},{default:u(()=>[...t[35]||(t[35]=[d("ONVIF",-1)])]),_:1}),r(oe,{value:"rtsp"},{default:u(()=>[...t[36]||(t[36]=[d("RTSP",-1)])]),_:1}),r(oe,{value:"custom"},{default:u(()=>[...t[37]||(t[37]=[d("自定义协议",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),r(ae,{label:"转换模式",name:"mode"},{default:u(()=>[r(le,{value:M.mode,"onUpdate:value":t[11]||(t[11]=e=>M.mode=e),placeholder:"请选择转换模式"},{default:u(()=>[r(oe,{value:"realtime"},{default:u(()=>[...t[38]||(t[38]=[d("实时转换",-1)])]),_:1}),r(oe,{value:"batch"},{default:u(()=>[...t[39]||(t[39]=[d("批量转换",-1)])]),_:1}),r(oe,{value:"on-demand"},{default:u(()=>[...t[40]||(t[40]=[d("按需转换",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),r(ae,{label:"优先级",name:"priority"},{default:u(()=>[r(se,{value:M.priority,"onUpdate:value":t[12]||(t[12]=e=>M.priority=e),min:1,max:10,style:{width:"100%"}},null,8,["value"])]),_:1}),r(ae,{label:"转换规则",name:"rules"},{default:u(()=>[r(ie,{value:M.rules,"onUpdate:value":t[13]||(t[13]=e=>M.rules=e),rows:4,placeholder:"请输入转换规则配置"},null,8,["value"])]),_:1}),r(ae,{label:"备注",name:"notes"},{default:u(()=>[r(ie,{value:M.notes,"onUpdate:value":t[14]||(t[14]=e=>M.notes=e),rows:2,placeholder:"请输入备注信息"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])])}}}),[["__scopeId","data-v-8ff111d7"]]);export{N as default};
