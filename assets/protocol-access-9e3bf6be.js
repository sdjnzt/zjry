import{f as e,m as a,P as l,S as t,b as s,g as i,e as o,M as r}from"./antd-fa5730cf.js";import{V as n,m as d,h as u,p as c,R as m,y as v,z as p}from"./icons-15893848.js";import{d as f,f as b,r as g,c as y,o as h,V as _,W as k,a0 as D,k as w,$ as I,a7 as x,X as C,u as T,G as P,_ as H,a3 as Y,F as U,a1 as R}from"./vendor-f41c3cc7.js";import{_ as z}from"./index-6bb65380.js";const M={class:"protocol-access"},S={class:"protocol-overview"},V={class:"protocol-content"},F={class:"protocol-section"},q={class:"protocol-header"},G={key:0,class:"protocol-config"},W={class:"config-item"},O={class:"config-item"},$={class:"config-item"},B={class:"config-item"},L={class:"config-item"},N={class:"config-item"},K={class:"config-item"},j={class:"config-item"},X={class:"config-item"},E={class:"protocol-section"},A={class:"protocol-header"},Q={key:0,class:"protocol-config"},J={class:"config-item"},Z={class:"config-item"},ee={class:"config-item"},ae={class:"config-item"},le={class:"config-item"},te={class:"config-item"},se={class:"protocol-section"},ie={class:"protocol-header"},oe={key:0,class:"protocol-config"},re={class:"config-item"},ne={class:"config-item"},de={class:"config-item"},ue={class:"config-item"},ce={class:"config-item"},me={class:"config-item"},ve={class:"config-actions"},pe={key:0,class:"device-info"},fe={class:"device-icon"},be={class:"device-details"},ge={class:"device-name"},ye={class:"device-id"},he={class:"device-address"},_e={key:2,class:"status-info"},ke={key:0,class:"online-time"},De={key:3,class:"streams-info"},we={class:"stream-count"},Ie={class:"stream-quality"},xe={key:0,class:"discovery-section"},Ce={key:0,class:"device-info"},Te={class:"device-details"},Pe={class:"device-name"},He={class:"device-address"},Ye={key:2,class:"capabilities-info"},Ue={key:0,class:"device-detail"},Re={class:"streams-detail"},ze={class:"capabilities-detail"},Me={class:"capabilities-list"},Se=z(f({__name:"protocol-access",setup(f){const z=b(!1),Se=g({protocol:"",status:""}),Ve=g({visible:!1,title:"添加设备",isEdit:!1}),Fe=g({visible:!1}),qe=b(null),Ge=b([{id:"discovery-1",name:"济宁港主码头-高清监控",protocol:"gb28181",address:"192.168.1.110",port:5060,manufacturer:"海康威视",model:"DS-2CD2T47G1-L",capabilities:["视频","音频","云台控制","智能识别"],deviceId:"34020000001320000005"},{id:"discovery-2",name:"京杭大运河-航道监控",protocol:"onvif",address:"192.168.1.111",port:80,manufacturer:"大华",model:"DH-IPC-HFW4433M-I2",capabilities:["视频","音频","WDR","智能分析"]},{id:"discovery-3",name:"济宁港锚地-船舶监控",protocol:"rtsp",address:"192.168.1.112",port:554,manufacturer:"宇视",model:"IPC6322LR-X22P-VF",capabilities:["视频","红外夜视","变焦"]},{id:"discovery-4",name:"济宁港集装箱堆场-全景监控",protocol:"gb28181",address:"192.168.1.113",port:5060,manufacturer:"海康威视",model:"DS-2CD2T47G1-L",capabilities:["视频","音频","云台控制","智能识别","车牌识别"],deviceId:"34020000001320000006"},{id:"discovery-5",name:"济宁港船舶靠泊-作业监控",protocol:"onvif",address:"192.168.1.114",port:80,manufacturer:"大华",model:"DH-IPC-HFW4433M-I2",capabilities:["视频","音频","WDR","智能分析","行为分析"]}]),We=b([]),Oe=g({gb28181:45,onvif:38,rtsp:67,online:127,totalDevices:150,offlineDevices:23,errorDevices:8,totalStreams:312,activeStreams:289});g({gb28181:{avgResponseTime:45,successRate:98.5,activeConnections:42,totalRegistrations:156},onvif:{avgResponseTime:78,successRate:96.2,activeConnections:35,totalDiscoveries:89},rtsp:{avgResponseTime:23,successRate:99.1,activeConnections:58,totalStreams:289}}),g({byManufacturer:{"海康威视":67,"大华":45,"宇视":38},byModel:{"DS-2CD2T47G1-L":34,"DH-IPC-HFW4433M-I2":28,"IPC6322LR-X22P-VF":25},byQuality:{"4K":45,FHD:78,HD:67,SD:20}});const $e=g({gb28181:{enabled:!0,serverId:"34020000002000000001",domain:"3402000000",port:5060,username:"admin",password:"123456",heartbeatInterval:60,registerInterval:3600,maxRetries:3,timeout:30},onvif:{enabled:!0,discoveryPort:3702,servicePort:80,authType:"digest",discoveryTimeout:10,maxDevices:100,autoDiscovery:!0},rtsp:{enabled:!0,port:554,transport:"tcp",bufferTime:1e3,maxConnections:50,keepAlive:!0,authentication:!0}}),Be=g({name:"",protocol:"gb28181",address:"",port:5060,username:"admin",password:"",deviceId:"",manufacturer:"",model:"",rtspPath:"",notes:""}),Le={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],protocol:[{required:!0,message:"请选择协议类型",trigger:"change"}],address:[{required:!0,message:"请输入设备地址",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},Ne=g({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}),Ke=b([{id:"1",name:"济宁港主码头-GB28181监控01",protocol:"gb28181",address:"192.168.1.100",port:5060,deviceId:"34020000001320000001",username:"admin",password:"123456",status:"online",manufacturer:"海康威视",model:"DS-2CD2142FWD-I",firmwareVersion:"V5.5.0",onlineTime:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"1",name:"主码流",quality:"HD",resolution:"1920x1080",bitrate:4096,fps:25,active:!0,url:"rtmp://192.168.1.100:1935/live/main"},{id:"2",name:"子码流",quality:"SD",resolution:"704x576",bitrate:1024,fps:15,active:!0,url:"rtmp://192.168.1.100:1935/live/sub"}],capabilities:["视频","音频","云台控制","录像回放"]},{id:"2",name:"京杭大运河-ONVIF监控01",protocol:"onvif",address:"192.168.1.101",port:80,username:"admin",password:"123456",status:"online",manufacturer:"大华",model:"DH-IPC-HFW4433M-I2",firmwareVersion:"V2.800.0000000.25.R",onlineTime:e().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"3",name:"主码流",quality:"4K",resolution:"3840x2160",bitrate:8192,fps:30,active:!0,url:"rtsp://192.168.1.101:554/cam/realmonitor?channel=1&subtype=0"}],capabilities:["视频","音频","WDR","智能分析"]},{id:"3",name:"济宁港锚地-RTSP监控01",protocol:"rtsp",address:"192.168.1.102",port:554,username:"admin",password:"123456",status:"offline",manufacturer:"宇视",model:"IPC6322LR-X22P-VF",onlineTime:e().subtract(30,"minute").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"4",name:"主码流",quality:"FHD",resolution:"1920x1080",bitrate:6144,fps:25,active:!1,url:"rtsp://192.168.1.102:554/live/ch1"}],capabilities:["视频","红外夜视","变焦"],rtspPath:"/live/ch1"},{id:"4",name:"济宁港集装箱堆场-GB28181监控02",protocol:"gb28181",address:"192.168.1.103",port:5060,deviceId:"34020000001320000002",username:"admin",password:"123456",status:"online",manufacturer:"海康威视",model:"DS-2CD2T47G1-L",firmwareVersion:"V5.6.0",onlineTime:e().subtract(45,"minute").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"5",name:"主码流",quality:"4K",resolution:"3840x2160",bitrate:8192,fps:30,active:!0,url:"rtmp://192.168.1.103:1935/live/main"},{id:"6",name:"子码流",quality:"HD",resolution:"1920x1080",bitrate:4096,fps:25,active:!0,url:"rtmp://192.168.1.103:1935/live/sub"}],capabilities:["视频","音频","云台控制","智能识别","车牌识别"]},{id:"5",name:"济宁港船舶靠泊-ONVIF监控02",protocol:"onvif",address:"192.168.1.104",port:80,username:"admin",password:"123456",status:"online",manufacturer:"大华",model:"DH-IPC-HFW4433M-I2",firmwareVersion:"V2.800.0000000.25.R",onlineTime:e().subtract(3,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"7",name:"主码流",quality:"FHD",resolution:"1920x1080",bitrate:6144,fps:25,active:!0,url:"rtsp://192.168.1.104:554/cam/realmonitor?channel=1&subtype=0"}],capabilities:["视频","音频","WDR","智能分析","行为分析"]},{id:"6",name:"济宁港航道交通-RTSP监控02",protocol:"rtsp",address:"192.168.1.105",port:554,username:"admin",password:"123456",status:"online",manufacturer:"宇视",model:"IPC6322LR-X22P-VF",onlineTime:e().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"8",name:"主码流",quality:"HD",resolution:"1920x1080",bitrate:4096,fps:25,active:!0,url:"rtsp://192.168.1.105:554/live/ch1"}],capabilities:["视频","红外夜视","变焦","智能跟踪"],rtspPath:"/live/ch1"},{id:"7",name:"济宁港安全巡检-GB28181监控03",protocol:"gb28181",address:"192.168.1.106",port:5060,deviceId:"34020000001320000003",username:"admin",password:"123456",status:"online",manufacturer:"海康威视",model:"DS-2CD2T47G1-L",firmwareVersion:"V5.6.0",onlineTime:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"9",name:"主码流",quality:"4K",resolution:"3840x2160",bitrate:8192,fps:30,active:!0,url:"rtmp://192.168.1.106:1935/live/main"}],capabilities:["视频","音频","云台控制","智能识别","人脸识别"]},{id:"8",name:"济宁港环境监测-ONVIF监控03",protocol:"onvif",address:"192.168.1.107",port:80,username:"admin",password:"123456",status:"error",manufacturer:"大华",model:"DH-IPC-HFW4433M-I2",firmwareVersion:"V2.800.0000000.25.R",onlineTime:e().subtract(6,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"10",name:"主码流",quality:"FHD",resolution:"1920x1080",bitrate:6144,fps:25,active:!1,url:"rtsp://192.168.1.107:554/cam/realmonitor?channel=1&subtype=0"}],capabilities:["视频","音频","WDR","智能分析","环境监测"]},{id:"9",name:"济宁港船舶维修-RTSP监控03",protocol:"rtsp",address:"192.168.1.108",port:554,username:"admin",password:"123456",status:"offline",manufacturer:"宇视",model:"IPC6322LR-X22P-VF",onlineTime:e().subtract(8,"hour").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"11",name:"主码流",quality:"HD",resolution:"1920x1080",bitrate:4096,fps:25,active:!1,url:"rtsp://192.168.1.108:554/live/ch1"}],capabilities:["视频","红外夜视","变焦","智能跟踪"],rtspPath:"/live/ch1"},{id:"10",name:"济宁港应急通信-GB28181监控04",protocol:"gb28181",address:"192.168.1.109",port:5060,deviceId:"34020000001320000004",username:"admin",password:"123456",status:"online",manufacturer:"海康威视",model:"DS-2CD2T47G1-L",firmwareVersion:"V5.6.0",onlineTime:e().subtract(30,"minute").format("YYYY-MM-DD HH:mm:ss"),streams:[{id:"12",name:"主码流",quality:"4K",resolution:"3840x2160",bitrate:8192,fps:30,active:!0,url:"rtmp://192.168.1.109:1935/live/main"}],capabilities:["视频","音频","云台控制","智能识别","应急通信"]}]),je=y(()=>{let e=Ke.value;return Se.protocol&&(e=e.filter(e=>e.protocol===Se.protocol)),Se.status&&(e=e.filter(e=>e.status===Se.status)),e}),Xe=[{title:"设备信息",key:"deviceInfo",width:250},{title:"协议",key:"protocol",width:100},{title:"状态",key:"status",width:120},{title:"视频流",key:"streams",width:150},{title:"操作",key:"action",width:200,fixed:"right"}],Ee=[{title:"设备信息",key:"deviceInfo",width:200},{title:"协议",key:"protocol",width:100},{title:"制造商",dataIndex:"manufacturer",key:"manufacturer",width:120},{title:"型号",dataIndex:"model",key:"model",width:150},{title:"能力",key:"capabilities",width:200}],Ae=[{title:"流名称",dataIndex:"name",key:"name"},{title:"质量",key:"quality"},{title:"分辨率",dataIndex:"resolution",key:"resolution"},{title:"码率",dataIndex:"bitrate",key:"bitrate",customRender:({text:e})=>`${e}kbps`},{title:"帧率",dataIndex:"fps",key:"fps",customRender:({text:e})=>`${e}fps`},{title:"状态",key:"status"}],Qe=e=>({gb28181:"blue",onvif:"green",rtsp:"orange"}[e]||"default"),Je=e=>({gb28181:"GB/T 28181",onvif:"ONVIF",rtsp:"RTSP"}[e]||e),Ze=e=>({online:"green",offline:"red",error:"red"}[e]||"default"),ea=e=>({online:"在线",offline:"离线",error:"错误"}[e]||e),aa=e=>({"4K":"purple",FHD:"blue",HD:"green",SD:"orange"}[e]||"default"),la=a=>{const l=e(),t=e(a),s=l.diff(t,"minute");return s<60?`${s}分钟`:s<1440?`${Math.floor(s/60)}小时`:`${Math.floor(s/1440)}天`},ta=()=>{a.success("协议配置已刷新")},sa=e=>{const l=$e[e].enabled;a.success(`${Je(e)} ${l?"已启用":"已禁用"}`)},ia=()=>{a.success("协议配置保存成功")},oa=()=>{a.loading("正在测试协议连接...",2).then(()=>{a.success("协议连接测试成功")})},ra=()=>{console.log("设备过滤条件变化:",Se)},na=()=>{Ve.visible=!0,Ve.title="添加设备",Ve.isEdit=!1,fa()},da=()=>{a.loading("正在搜索网络设备...",3).then(()=>{Ge.value=[{id:"disc1",protocol:"onvif",address:"192.168.1.200",port:80,manufacturer:"海康威视",model:"DS-2CD2143G0-I",capabilities:["视频","音频","云台控制"]},{id:"disc2",protocol:"gb28181",address:"192.168.1.201",port:5060,manufacturer:"大华",model:"DH-IPC-HFW2431S-S2",capabilities:["视频","音频"],deviceId:"34020000001320000002"}],a.success(`发现 ${Ge.value.length} 台设备`)})},ua=()=>{Ge.value=[],We.value=[]},ca=e=>{We.value=e},ma=()=>{0!==We.value.length?(a.success(`已添加 ${We.value.length} 台设备`),ua()):a.warning("请先选择要添加的设备")},va=()=>{Ve.isEdit?a.success("设备信息更新成功"):a.success("设备添加成功"),Ve.visible=!1,fa()},pa=()=>{Ve.visible=!1,fa()},fa=()=>{Object.assign(Be,{name:"",protocol:"gb28181",address:"",port:5060,username:"admin",password:"",deviceId:"",manufacturer:"",model:"",rtspPath:"",notes:""})};return h(()=>{Ne.total=Ke.value.length,console.log("标准协议接入页面已加载，共",Ke.value.length,"个设备"),setInterval(()=>{const a=Ke.value[Math.floor(Math.random()*Ke.value.length)];a&&"online"===a.status&&(a.onlineTime=e().subtract(Math.floor(60*Math.random()),"minute").format("YYYY-MM-DD HH:mm:ss"))},3e4)}),(e,f)=>{const b=C("a-statistic"),g=C("a-card"),y=C("a-col"),h=C("a-row"),Ke=C("a-button"),fa=C("a-switch"),ba=C("a-input"),ga=C("a-input-number"),ya=C("a-input-password"),ha=C("a-select-option"),_a=C("a-select"),ka=C("a-space"),Da=C("a-tag"),wa=C("a-table"),Ia=C("a-form-item"),xa=C("a-textarea"),Ca=C("a-form"),Ta=C("a-modal"),Pa=C("a-descriptions-item"),Ha=C("a-descriptions");return _(),k("div",M,[f[96]||(f[96]=D("div",{class:"page-header"},[D("h2",null,"标准协议接入"),D("p",null,"支持GB/T 28181、ONVIF、RTSP等多种标准协议的设备接入和管理")],-1)),D("div",S,[w(h,{gutter:16},{default:I(()=>[w(y,{span:4},{default:I(()=>[w(g,{class:"overview-card"},{default:I(()=>[w(b,{title:"GB/T 28181设备",value:Oe.gb28181,"value-style":{color:"#1890ff"}},{suffix:I(()=>[w(T(n),{style:{color:"#1890ff","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),w(y,{span:4},{default:I(()=>[w(g,{class:"overview-card"},{default:I(()=>[w(b,{title:"ONVIF设备",value:Oe.onvif,"value-style":{color:"#52c41a"}},{suffix:I(()=>[w(T(d),{style:{color:"#52c41a","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),w(y,{span:4},{default:I(()=>[w(g,{class:"overview-card"},{default:I(()=>[w(b,{title:"RTSP流",value:Oe.rtsp,"value-style":{color:"#faad14"}},{suffix:I(()=>[w(T(u),{style:{color:"#faad14","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),w(y,{span:4},{default:I(()=>[w(g,{class:"overview-card"},{default:I(()=>[w(b,{title:"在线设备",value:Oe.online,"value-style":{color:"#722ed1"}},{suffix:I(()=>[w(T(c),{style:{color:"#722ed1","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),w(y,{span:4},{default:I(()=>[w(g,{class:"overview-card"},{default:I(()=>[w(b,{title:"总视频流",value:Oe.totalStreams,"value-style":{color:"#eb2f96"}},{suffix:I(()=>[w(T(n),{style:{color:"#eb2f96","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),w(y,{span:4},{default:I(()=>[w(g,{class:"overview-card"},{default:I(()=>[w(b,{title:"活跃流",value:Oe.activeStreams,"value-style":{color:"#13c2c2"}},{suffix:I(()=>[w(T(u),{style:{color:"#13c2c2","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),D("div",V,[w(h,{gutter:16},{default:I(()=>[w(y,{span:8},{default:I(()=>[w(g,{title:"协议配置",class:"protocol-config-card"},{extra:I(()=>[w(Ke,{size:"small",onClick:ta},{default:I(()=>[w(T(m)),f[42]||(f[42]=P(" 刷新 ",-1))]),_:1})]),default:I(()=>[D("div",F,[D("div",q,[f[43]||(f[43]=D("h4",null,"GB/T 28181",-1)),w(fa,{checked:$e.gb28181.enabled,"onUpdate:checked":f[0]||(f[0]=e=>$e.gb28181.enabled=e),size:"small",onChange:f[1]||(f[1]=e=>sa("gb28181"))},null,8,["checked"])]),$e.gb28181.enabled?(_(),k("div",G,[D("div",W,[f[44]||(f[44]=D("span",{class:"config-label"},"SIP服务器ID:",-1)),w(ba,{value:$e.gb28181.serverId,"onUpdate:value":f[2]||(f[2]=e=>$e.gb28181.serverId=e),size:"small",placeholder:"34020000002000000001"},null,8,["value"])]),D("div",O,[f[45]||(f[45]=D("span",{class:"config-label"},"SIP域:",-1)),w(ba,{value:$e.gb28181.domain,"onUpdate:value":f[3]||(f[3]=e=>$e.gb28181.domain=e),size:"small",placeholder:"3402000000"},null,8,["value"])]),D("div",$,[f[46]||(f[46]=D("span",{class:"config-label"},"SIP端口:",-1)),w(ga,{value:$e.gb28181.port,"onUpdate:value":f[4]||(f[4]=e=>$e.gb28181.port=e),size:"small",min:1024,max:65535,style:{width:"100%"}},null,8,["value"])]),D("div",B,[f[47]||(f[47]=D("span",{class:"config-label"},"用户名:",-1)),w(ba,{value:$e.gb28181.username,"onUpdate:value":f[5]||(f[5]=e=>$e.gb28181.username=e),size:"small",placeholder:"admin"},null,8,["value"])]),D("div",L,[f[48]||(f[48]=D("span",{class:"config-label"},"密码:",-1)),w(ya,{value:$e.gb28181.password,"onUpdate:value":f[6]||(f[6]=e=>$e.gb28181.password=e),size:"small",placeholder:"请输入密码"},null,8,["value"])]),D("div",N,[f[49]||(f[49]=D("span",{class:"config-label"},"心跳间隔:",-1)),w(ga,{value:$e.gb28181.heartbeatInterval,"onUpdate:value":f[7]||(f[7]=e=>$e.gb28181.heartbeatInterval=e),size:"small",min:30,max:300,"addon-after":"秒",style:{width:"100%"}},null,8,["value"])]),D("div",K,[f[50]||(f[50]=D("span",{class:"config-label"},"注册间隔:",-1)),w(ga,{value:$e.gb28181.registerInterval,"onUpdate:value":f[8]||(f[8]=e=>$e.gb28181.registerInterval=e),size:"small",min:1800,max:7200,"addon-after":"秒",style:{width:"100%"}},null,8,["value"])]),D("div",j,[f[51]||(f[51]=D("span",{class:"config-label"},"最大重试:",-1)),w(ga,{value:$e.gb28181.maxRetries,"onUpdate:value":f[9]||(f[9]=e=>$e.gb28181.maxRetries=e),size:"small",min:1,max:10,style:{width:"100%"}},null,8,["value"])]),D("div",X,[f[52]||(f[52]=D("span",{class:"config-label"},"超时时间:",-1)),w(ga,{value:$e.gb28181.timeout,"onUpdate:value":f[10]||(f[10]=e=>$e.gb28181.timeout=e),size:"small",min:10,max:60,"addon-after":"秒",style:{width:"100%"}},null,8,["value"])])])):x("",!0)]),D("div",E,[D("div",A,[f[53]||(f[53]=D("h4",null,"ONVIF",-1)),w(fa,{checked:$e.onvif.enabled,"onUpdate:checked":f[11]||(f[11]=e=>$e.onvif.enabled=e),size:"small",onChange:f[12]||(f[12]=e=>sa("onvif"))},null,8,["checked"])]),$e.onvif.enabled?(_(),k("div",Q,[D("div",J,[f[54]||(f[54]=D("span",{class:"config-label"},"发现端口:",-1)),w(ga,{value:$e.onvif.discoveryPort,"onUpdate:value":f[13]||(f[13]=e=>$e.onvif.discoveryPort=e),size:"small",min:1024,max:65535,style:{width:"100%"}},null,8,["value"])]),D("div",Z,[f[55]||(f[55]=D("span",{class:"config-label"},"服务端口:",-1)),w(ga,{value:$e.onvif.servicePort,"onUpdate:value":f[14]||(f[14]=e=>$e.onvif.servicePort=e),size:"small",min:1024,max:65535,style:{width:"100%"}},null,8,["value"])]),D("div",ee,[f[59]||(f[59]=D("span",{class:"config-label"},"认证方式:",-1)),w(_a,{value:$e.onvif.authType,"onUpdate:value":f[15]||(f[15]=e=>$e.onvif.authType=e),size:"small",style:{width:"100%"}},{default:I(()=>[w(ha,{value:"none"},{default:I(()=>[...f[56]||(f[56]=[P("无认证",-1)])]),_:1}),w(ha,{value:"digest"},{default:I(()=>[...f[57]||(f[57]=[P("摘要认证",-1)])]),_:1}),w(ha,{value:"wsse"},{default:I(()=>[...f[58]||(f[58]=[P("WS-Security",-1)])]),_:1})]),_:1},8,["value"])]),D("div",ae,[f[60]||(f[60]=D("span",{class:"config-label"},"发现超时:",-1)),w(ga,{value:$e.onvif.discoveryTimeout,"onUpdate:value":f[16]||(f[16]=e=>$e.onvif.discoveryTimeout=e),size:"small",min:5,max:30,"addon-after":"秒",style:{width:"100%"}},null,8,["value"])]),D("div",le,[f[61]||(f[61]=D("span",{class:"config-label"},"最大设备数:",-1)),w(ga,{value:$e.onvif.maxDevices,"onUpdate:value":f[17]||(f[17]=e=>$e.onvif.maxDevices=e),size:"small",min:10,max:500,style:{width:"100%"}},null,8,["value"])]),D("div",te,[f[62]||(f[62]=D("span",{class:"config-label"},"自动发现:",-1)),w(fa,{checked:$e.onvif.autoDiscovery,"onUpdate:checked":f[18]||(f[18]=e=>$e.onvif.autoDiscovery=e),size:"small"},null,8,["checked"])])])):x("",!0)]),D("div",se,[D("div",ie,[f[63]||(f[63]=D("h4",null,"RTSP",-1)),w(fa,{checked:$e.rtsp.enabled,"onUpdate:checked":f[19]||(f[19]=e=>$e.rtsp.enabled=e),size:"small",onChange:f[20]||(f[20]=e=>sa("rtsp"))},null,8,["checked"])]),$e.rtsp.enabled?(_(),k("div",oe,[D("div",re,[f[64]||(f[64]=D("span",{class:"config-label"},"服务端口:",-1)),w(ga,{value:$e.rtsp.port,"onUpdate:value":f[21]||(f[21]=e=>$e.rtsp.port=e),size:"small",min:1024,max:65535,style:{width:"100%"}},null,8,["value"])]),D("div",ne,[f[68]||(f[68]=D("span",{class:"config-label"},"传输协议:",-1)),w(_a,{value:$e.rtsp.transport,"onUpdate:value":f[22]||(f[22]=e=>$e.rtsp.transport=e),size:"small",style:{width:"100%"}},{default:I(()=>[w(ha,{value:"tcp"},{default:I(()=>[...f[65]||(f[65]=[P("TCP",-1)])]),_:1}),w(ha,{value:"udp"},{default:I(()=>[...f[66]||(f[66]=[P("UDP",-1)])]),_:1}),w(ha,{value:"auto"},{default:I(()=>[...f[67]||(f[67]=[P("自动",-1)])]),_:1})]),_:1},8,["value"])]),D("div",de,[f[69]||(f[69]=D("span",{class:"config-label"},"缓冲时间:",-1)),w(ga,{value:$e.rtsp.bufferTime,"onUpdate:value":f[23]||(f[23]=e=>$e.rtsp.bufferTime=e),size:"small",min:100,max:5e3,step:100,"addon-after":"ms",style:{width:"100%"}},null,8,["value"])]),D("div",ue,[f[70]||(f[70]=D("span",{class:"config-label"},"最大连接数:",-1)),w(ga,{value:$e.rtsp.maxConnections,"onUpdate:value":f[24]||(f[24]=e=>$e.rtsp.maxConnections=e),size:"small",min:10,max:200,style:{width:"100%"}},null,8,["value"])]),D("div",ce,[f[71]||(f[71]=D("span",{class:"config-label"},"保活连接:",-1)),w(fa,{checked:$e.rtsp.keepAlive,"onUpdate:checked":f[25]||(f[25]=e=>$e.rtsp.keepAlive=e),size:"small"},null,8,["checked"])]),D("div",me,[f[72]||(f[72]=D("span",{class:"config-label"},"身份认证:",-1)),w(fa,{checked:$e.rtsp.authentication,"onUpdate:checked":f[26]||(f[26]=e=>$e.rtsp.authentication=e),size:"small"},null,8,["checked"])])])):x("",!0)]),D("div",ve,[w(Ke,{type:"primary",onClick:ia},{default:I(()=>[w(T(v)),f[73]||(f[73]=P(" 保存配置 ",-1))]),_:1}),w(Ke,{onClick:oa},{default:I(()=>[w(T(p)),f[74]||(f[74]=P(" 测试连接 ",-1))]),_:1})])]),_:1})]),_:1}),w(y,{span:16},{default:I(()=>[w(g,{title:"协议设备管理",class:"device-card"},{extra:I(()=>[w(ka,null,{default:I(()=>[w(_a,{value:Se.protocol,"onUpdate:value":f[27]||(f[27]=e=>Se.protocol=e),placeholder:"协议类型",style:{width:"120px"},onChange:ra},{default:I(()=>[w(ha,{value:""},{default:I(()=>[...f[75]||(f[75]=[P("全部协议",-1)])]),_:1}),w(ha,{value:"gb28181"},{default:I(()=>[...f[76]||(f[76]=[P("GB/T 28181",-1)])]),_:1}),w(ha,{value:"onvif"},{default:I(()=>[...f[77]||(f[77]=[P("ONVIF",-1)])]),_:1}),w(ha,{value:"rtsp"},{default:I(()=>[...f[78]||(f[78]=[P("RTSP",-1)])]),_:1})]),_:1},8,["value"]),w(_a,{value:Se.status,"onUpdate:value":f[28]||(f[28]=e=>Se.status=e),placeholder:"设备状态",style:{width:"120px"},onChange:ra},{default:I(()=>[w(ha,{value:""},{default:I(()=>[...f[79]||(f[79]=[P("全部状态",-1)])]),_:1}),w(ha,{value:"online"},{default:I(()=>[...f[80]||(f[80]=[P("在线",-1)])]),_:1}),w(ha,{value:"offline"},{default:I(()=>[...f[81]||(f[81]=[P("离线",-1)])]),_:1}),w(ha,{value:"error"},{default:I(()=>[...f[82]||(f[82]=[P("错误",-1)])]),_:1})]),_:1},8,["value"]),w(Ke,{type:"primary",onClick:na},{default:I(()=>[w(T(l)),f[83]||(f[83]=P(" 添加设备 ",-1))]),_:1}),w(Ke,{onClick:da},{default:I(()=>[w(T(t)),f[84]||(f[84]=P(" 自动发现 ",-1))]),_:1})]),_:1})]),default:I(()=>[w(wa,{columns:Xe,"data-source":je.value,loading:z.value,pagination:Ne,"row-key":"id",size:"small"},{bodyCell:I(({column:e,record:l})=>["deviceInfo"===e.key?(_(),k("div",pe,[D("div",fe,["gb28181"===l.protocol?(_(),H(T(n),{key:0})):"onvif"===l.protocol?(_(),H(T(d),{key:1})):(_(),H(T(u),{key:2}))]),D("div",be,[D("div",ge,Y(l.name),1),D("div",ye,"ID: "+Y(l.deviceId),1),D("div",he,Y(l.address),1)])])):"protocol"===e.key?(_(),H(Da,{key:1,color:Qe(l.protocol)},{default:I(()=>[P(Y(Je(l.protocol)),1)]),_:2},1032,["color"])):"status"===e.key?(_(),k("div",_e,[w(Da,{color:Ze(l.status)},{default:I(()=>[P(Y(ea(l.status)),1)]),_:2},1032,["color"]),"online"===l.status?(_(),k("div",ke," 在线: "+Y(la(l.onlineTime)),1)):x("",!0)])):"streams"===e.key?(_(),k("div",De,[D("div",we,Y(l.streams.length)+"路流",1),D("div",Ie,[(_(!0),k(U,null,R(l.streams,e=>(_(),H(Da,{key:e.id,size:"small",color:aa(e.quality)},{default:I(()=>[P(Y(e.quality),1)]),_:2},1032,["color"]))),128))])])):"action"===e.key?(_(),H(ka,{key:4},{default:I(()=>[w(Ke,{type:"link",size:"small",onClick:e=>{return a=l,qe.value=a,void(Fe.visible=!0);var a}},{default:I(()=>[w(T(s)),f[85]||(f[85]=P(" 查看 ",-1))]),_:2},1032,["onClick"]),w(Ke,{type:"link",size:"small",onClick:e=>{return t=l,void a.loading(`正在测试设备 ${t.name}...`,2).then(()=>{"online"===t.status?a.success("设备连接正常"):a.error("设备连接失败")});var t}},{default:I(()=>[w(T(p)),f[86]||(f[86]=P(" 测试 ",-1))]),_:2},1032,["onClick"]),w(Ke,{type:"link",size:"small",onClick:e=>{return a=l,Ve.visible=!0,Ve.title="编辑设备",Ve.isEdit=!0,void Object.assign(Be,a);var a}},{default:I(()=>[w(T(i)),f[87]||(f[87]=P(" 编辑 ",-1))]),_:2},1032,["onClick"]),w(Ke,{type:"link",size:"small",onClick:e=>{return t=l,void r.confirm({title:"确认删除",content:`确定要删除设备"${t.name}"吗？`,onOk:()=>{a.success("设备删除成功")}});var t}},{default:I(()=>[w(T(o)),f[88]||(f[88]=P(" 删除 ",-1))]),_:2},1032,["onClick"])]),_:2},1024)):x("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1})]),_:1})]),_:1})]),Ge.value.length>0?(_(),k("div",xe,[w(g,{title:"设备发现结果",class:"discovery-card"},{extra:I(()=>[w(ka,null,{default:I(()=>[w(Ke,{onClick:ua},{default:I(()=>[...f[89]||(f[89]=[P("清空",-1)])]),_:1}),w(Ke,{type:"primary",onClick:ma},{default:I(()=>[w(T(l)),f[90]||(f[90]=P(" 添加选中设备 ",-1))]),_:1})]),_:1})]),default:I(()=>[w(wa,{columns:Ee,"data-source":Ge.value,pagination:!1,"row-key":"id",size:"small","row-selection":{selectedRowKeys:We.value,onChange:ca}},{bodyCell:I(({column:e,record:a})=>["deviceInfo"===e.key?(_(),k("div",Ce,[D("div",Te,[D("div",Pe,Y(a.name||a.manufacturer+" "+a.model),1),D("div",He,Y(a.address)+":"+Y(a.port),1)])])):"protocol"===e.key?(_(),H(Da,{key:1,color:Qe(a.protocol)},{default:I(()=>[P(Y(Je(a.protocol)),1)]),_:2},1032,["color"])):"capabilities"===e.key?(_(),k("div",Ye,[(_(!0),k(U,null,R(a.capabilities,e=>(_(),H(Da,{key:e,size:"small"},{default:I(()=>[P(Y(e),1)]),_:2},1024))),128))])):x("",!0)]),_:1},8,["data-source","row-selection"])]),_:1})])):x("",!0),w(Ta,{open:Ve.visible,"onUpdate:open":f[40]||(f[40]=e=>Ve.visible=e),title:Ve.title,width:"700px",onOk:va,onCancel:pa},{default:I(()=>[w(Ca,{ref:"deviceFormRef",model:Be,rules:Le,"label-col":{span:6},"wrapper-col":{span:18}},{default:I(()=>[w(Ia,{label:"设备名称",name:"name"},{default:I(()=>[w(ba,{value:Be.name,"onUpdate:value":f[29]||(f[29]=e=>Be.name=e),placeholder:"请输入设备名称"},null,8,["value"])]),_:1}),w(Ia,{label:"协议类型",name:"protocol"},{default:I(()=>[w(_a,{value:Be.protocol,"onUpdate:value":f[30]||(f[30]=e=>Be.protocol=e),placeholder:"请选择协议类型"},{default:I(()=>[w(ha,{value:"gb28181"},{default:I(()=>[...f[91]||(f[91]=[P("GB/T 28181",-1)])]),_:1}),w(ha,{value:"onvif"},{default:I(()=>[...f[92]||(f[92]=[P("ONVIF",-1)])]),_:1}),w(ha,{value:"rtsp"},{default:I(()=>[...f[93]||(f[93]=[P("RTSP",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),w(Ia,{label:"设备地址",name:"address"},{default:I(()=>[w(ba,{value:Be.address,"onUpdate:value":f[31]||(f[31]=e=>Be.address=e),placeholder:"请输入IP地址或域名"},null,8,["value"])]),_:1}),w(Ia,{label:"端口号",name:"port"},{default:I(()=>[w(ga,{value:Be.port,"onUpdate:value":f[32]||(f[32]=e=>Be.port=e),min:1,max:65535,placeholder:"请输入端口号",style:{width:"100%"}},null,8,["value"])]),_:1}),w(Ia,{label:"用户名",name:"username"},{default:I(()=>[w(ba,{value:Be.username,"onUpdate:value":f[33]||(f[33]=e=>Be.username=e),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),w(Ia,{label:"密码",name:"password"},{default:I(()=>[w(ya,{value:Be.password,"onUpdate:value":f[34]||(f[34]=e=>Be.password=e),placeholder:"请输入密码"},null,8,["value"])]),_:1}),"gb28181"===Be.protocol?(_(),H(Ia,{key:0,label:"设备ID",name:"deviceId"},{default:I(()=>[w(ba,{value:Be.deviceId,"onUpdate:value":f[35]||(f[35]=e=>Be.deviceId=e),placeholder:"请输入GB/T 28181设备ID"},null,8,["value"])]),_:1})):x("",!0),"rtsp"===Be.protocol?(_(),H(Ia,{key:1,label:"RTSP路径",name:"rtspPath"},{default:I(()=>[w(ba,{value:Be.rtspPath,"onUpdate:value":f[36]||(f[36]=e=>Be.rtspPath=e),placeholder:"请输入RTSP流路径"},null,8,["value"])]),_:1})):x("",!0),w(Ia,{label:"制造商",name:"manufacturer"},{default:I(()=>[w(ba,{value:Be.manufacturer,"onUpdate:value":f[37]||(f[37]=e=>Be.manufacturer=e),placeholder:"请输入制造商"},null,8,["value"])]),_:1}),w(Ia,{label:"型号",name:"model"},{default:I(()=>[w(ba,{value:Be.model,"onUpdate:value":f[38]||(f[38]=e=>Be.model=e),placeholder:"请输入设备型号"},null,8,["value"])]),_:1}),w(Ia,{label:"备注",name:"notes"},{default:I(()=>[w(xa,{value:Be.notes,"onUpdate:value":f[39]||(f[39]=e=>Be.notes=e),placeholder:"请输入备注信息",rows:2},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),w(Ta,{open:Fe.visible,"onUpdate:open":f[41]||(f[41]=e=>Fe.visible=e),title:"设备详情",width:"800px",footer:null},{default:I(()=>[qe.value?(_(),k("div",Ue,[w(Ha,{column:2,bordered:""},{default:I(()=>[w(Pa,{label:"设备名称"},{default:I(()=>[P(Y(qe.value.name),1)]),_:1}),w(Pa,{label:"协议类型"},{default:I(()=>[P(Y(Je(qe.value.protocol)),1)]),_:1}),w(Pa,{label:"设备地址"},{default:I(()=>[P(Y(qe.value.address)+":"+Y(qe.value.port),1)]),_:1}),w(Pa,{label:"设备状态"},{default:I(()=>[w(Da,{color:Ze(qe.value.status)},{default:I(()=>[P(Y(ea(qe.value.status)),1)]),_:1},8,["color"])]),_:1}),w(Pa,{label:"制造商"},{default:I(()=>[P(Y(qe.value.manufacturer),1)]),_:1}),w(Pa,{label:"型号"},{default:I(()=>[P(Y(qe.value.model),1)]),_:1}),w(Pa,{label:"固件版本"},{default:I(()=>[P(Y(qe.value.firmwareVersion||"未知"),1)]),_:1}),w(Pa,{label:"在线时间"},{default:I(()=>[P(Y("online"===qe.value.status?la(qe.value.onlineTime):"离线"),1)]),_:1})]),_:1}),D("div",Re,[f[94]||(f[94]=D("h4",null,"视频流信息",-1)),w(wa,{columns:Ae,"data-source":qe.value.streams,pagination:!1,"row-key":"id",size:"small"},{bodyCell:I(({column:e,record:a})=>["quality"===e.key?(_(),H(Da,{key:0,color:aa(a.quality)},{default:I(()=>[P(Y(a.quality),1)]),_:2},1032,["color"])):"status"===e.key?(_(),H(Da,{key:1,color:a.active?"green":"red"},{default:I(()=>[P(Y(a.active?"活跃":"停止"),1)]),_:2},1032,["color"])):x("",!0)]),_:1},8,["data-source"])]),D("div",ze,[f[95]||(f[95]=D("h4",null,"设备能力",-1)),D("div",Me,[(_(!0),k(U,null,R(qe.value.capabilities,e=>(_(),H(Da,{key:e,style:{"margin-bottom":"8px"}},{default:I(()=>[P(Y(e),1)]),_:2},1024))),128))])])])):x("",!0)]),_:1},8,["open"])])}}}),[["__scopeId","data-v-ce59ae02"]]);export{Se as default};
