import{f as e,m as a,E as l,h as t,P as i,g as n,e as s,M as d}from"./antd-88345056.js";import{d as u,r,f as c,c as o,o as v,V as p,W as m,a0 as f,k as y,$ as b,X as _,u as Y,G as g,F as h,a1 as M,a7 as N,a3 as D,_ as w,a6 as k}from"./vendor-fea347d2.js";import{k as x,E as T,h as I}from"./icons-2f62823c.js";import{_ as C}from"./index-2d914034.js";const U={class:"intelligent-maintenance"},H={class:"maintenance-overview"},S={class:"maintenance-content"},E={class:"fault-list"},J={class:"fault-header"},R={class:"fault-title"},j={class:"fault-status"},q={class:"fault-info"},A={class:"fault-device"},O={class:"fault-time"},$={class:"fault-description"},z={class:"fault-actions"},F={class:"repair-history"},L={class:"repair-header"},B={class:"repair-title"},P={class:"repair-result"},G={class:"repair-info"},V={class:"repair-device"},W={class:"repair-technician"},X={class:"repair-time"},K={class:"repair-duration"},Q={class:"repair-actions"},Z={class:"maintenance-planning"},ee={key:0,class:"plan-info"},ae={class:"plan-name"},le={class:"plan-device"},te={key:2,class:"next-maintenance"},ie={class:"countdown"},ne={key:0,class:"fault-detail"},se={key:0,class:"repair-detail"},de=C(u({__name:"intelligent-maintenance",setup(u){const C=r({status:""}),de=r({type:""}),ue=c([]),re=r({visible:!1}),ce=r({visible:!1}),oe=c(["王技师","李技师","赵技师","钱技师","孙技师","周技师"]),ve=c(null),pe=c(null),me=c(null),fe=r({visible:!1}),ye=r({visible:!1});r({visible:!1});const be=r({visible:!1}),_e=r({visible:!1}),Ye=r({visible:!1}),ge=r({title:"",deviceId:"",type:"hardware",level:"medium",description:"",reporter:""}),he=r({planName:"",deviceId:"",type:"routine",cycle:30,nextMaintenance:"",content:"",responsible:""}),Me=r({technician:"",estimatedTime:"",notes:""}),Ne=r({status:"pending",notes:"",resolution:""}),De=r({planName:"",deviceId:"",type:"routine",cycle:30,nextMaintenance:"",content:"",responsible:""}),we={title:[{required:!0,message:"请输入故障标题",trigger:"blur"}],deviceId:[{required:!0,message:"请选择故障设备",trigger:"change"}],type:[{required:!0,message:"请选择故障类型",trigger:"change"}],level:[{required:!0,message:"请选择故障等级",trigger:"change"}],description:[{required:!0,message:"请输入故障描述",trigger:"blur"}],reporter:[{required:!0,message:"请输入报告人姓名",trigger:"blur"}]},ke={planName:[{required:!0,message:"请输入计划名称",trigger:"blur"}],deviceId:[{required:!0,message:"请选择保养设备",trigger:"change"}],type:[{required:!0,message:"请选择保养类型",trigger:"change"}],cycle:[{required:!0,message:"请输入保养周期",trigger:"blur"}],nextMaintenance:[{required:!0,message:"请选择下次保养时间",trigger:"change"}],content:[{required:!0,message:"请输入保养内容",trigger:"blur"}],responsible:[{required:!0,message:"请输入负责人姓名",trigger:"blur"}]},xe=r({pendingFaults:7,maintenanceDevices:4,todayMaintenance:12,avgRepairTime:6.2}),Te=c([{id:"1",title:"济宁港主码头摄像头画面模糊",deviceName:"济宁港主码头-高清监控01",deviceId:"JN-CAM-001",type:"hardware",level:"medium",status:"pending",description:"摄像头镜头表面有污渍，画面出现模糊现象，影响港口作业监控效果，需要清洁镜头",reporter:"张运维",reportTime:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"2",title:"梁山港航道传感器数据异常",deviceName:"梁山港航道-潮汐传感器01",deviceId:"LS-SEN-001",type:"software",level:"high",status:"processing",description:"潮汐传感器数据采集异常，显示错误数值，影响航道安全监测，需要重新校准",reporter:"李监控",reportTime:e().subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),assignedTechnician:"王技师"},{id:"3",title:"京杭运河监控设备网络中断",deviceName:"京杭运河济宁段-航道监控01",deviceId:"YH-CAM-001",type:"network",level:"critical",status:"pending",description:"监控设备网络连接中断，无法传输视频信号，影响运河航道安全监控",reporter:"陈安全",reportTime:e().subtract(4,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"4",title:"济宁港锚地气象传感器故障",deviceName:"济宁港锚地-气象传感器01",deviceId:"JN-SEN-004",type:"hardware",level:"high",status:"processing",description:"气象传感器温度读数异常，超出正常范围(-20°C~50°C)，可能是传感器损坏",reporter:"刘气象",reportTime:e().subtract(6,"hour").format("YYYY-MM-DD HH:mm:ss"),assignedTechnician:"赵技师"},{id:"5",title:"济宁港控制中心交换机过热",deviceName:"济宁港控制中心-核心交换机01",deviceId:"JN-NET-003",type:"hardware",level:"medium",status:"pending",description:"核心交换机CPU温度过高，达到85°C，超过正常工作温度，需要检查散热系统",reporter:"王网络",reportTime:e().subtract(8,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"6",title:"济宁港散货码头粉尘传感器离线",deviceName:"济宁港散货码头-粉尘传感器01",deviceId:"JN-SEN-005",type:"power",level:"medium",status:"resolved",description:"粉尘传感器电源模块故障，设备离线，已更换电源模块，恢复正常工作",reporter:"孙环保",reportTime:e().subtract(2,"day").format("YYYY-MM-DD HH:mm:ss"),assignedTechnician:"李技师",resolution:"更换电源模块，设备恢复正常",resolveTime:e().subtract(1,"day").format("YYYY-MM-DD HH:mm:ss")},{id:"7",title:"梁山港存储设备硬盘故障",deviceName:"梁山港数据中心-存储设备01",deviceId:"LS-STR-001",type:"hardware",level:"critical",status:"processing",description:"存储设备RAID阵列中一块硬盘故障，影响数据存储稳定性，需要更换硬盘",reporter:"周数据",reportTime:e().subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss"),assignedTechnician:"钱技师"}]),Ie=c([{id:"1",title:"修复济宁港锚地通信基站故障",deviceName:"济宁港锚地-通信基站01",deviceId:"JN-NET-001",technician:"王技师",repairTime:e().subtract(3,"day").format("YYYY-MM-DD HH:mm:ss"),duration:2.5,success:!0,description:"更换老化网线，重新配置网络参数，恢复通信基站正常连接",parts:["网线","网络模块"],cost:1200},{id:"2",title:"修复济宁港数据中心存储阵列故障",deviceName:"济宁港数据中心-存储阵列01",deviceId:"JN-STR-001",technician:"赵技师",repairTime:e().subtract(1,"week").format("YYYY-MM-DD HH:mm:ss"),duration:8,success:!0,description:"更换故障硬盘，重建RAID阵列，恢复数据存储系统正常运行",parts:["硬盘","RAID控制器","散热风扇"],cost:3800},{id:"3",title:"修复梁山港码头监控设备故障",deviceName:"梁山港码头-高清监控01",deviceId:"LS-CAM-001",technician:"李技师",repairTime:e().subtract(2,"week").format("YYYY-MM-DD HH:mm:ss"),duration:4,success:!0,description:"更换损坏的图像传感器，重新校准摄像头参数，恢复高清监控画面",parts:["图像传感器","镜头组件"],cost:2800},{id:"4",title:"修复京杭运河流速传感器故障",deviceName:"京杭运河-水流传感器01",deviceId:"YH-SEN-001",technician:"钱技师",repairTime:e().subtract(3,"week").format("YYYY-MM-DD HH:mm:ss"),duration:6,success:!0,description:"清理传感器表面水草，更换防水密封圈，重新校准传感器精度",parts:["防水密封圈","校准工具"],cost:1500},{id:"5",title:"修复济宁港散货码头网络设备故障",deviceName:"济宁港散货码头-通信设备01",deviceId:"JN-NET-002",technician:"孙技师",repairTime:e().subtract(1,"month").format("YYYY-MM-DD HH:mm:ss"),duration:3,success:!1,description:"尝试修复网络设备，但设备老化严重，最终决定更换新设备",parts:["网络模块","电源适配器"],cost:2200}]),Ce=c([{id:"1",planName:"济宁港主码头摄像头月度保养",deviceName:"济宁港主码头-高清监控01",deviceId:"JN-CAM-001",type:"routine",cycle:30,nextMaintenance:e().add(5,"day").format("YYYY-MM-DD"),content:"清洁镜头表面，检查云台转动，测试变焦功能，校准图像参数",responsible:"王技师",status:"active",lastMaintenance:e().subtract(25,"day").format("YYYY-MM-DD")},{id:"2",planName:"梁山港航道传感器季度保养",deviceName:"梁山港航道-潮汐传感器01",deviceId:"LS-SEN-001",type:"preventive",cycle:90,nextMaintenance:e().add(15,"day").format("YYYY-MM-DD"),content:"校准传感器精度，检查防水密封性能，更新固件版本，测试数据传输",responsible:"李技师",status:"active",lastMaintenance:e().subtract(75,"day").format("YYYY-MM-DD")},{id:"3",planName:"济宁港控制中心网络设备月度保养",deviceName:"济宁港控制中心-核心交换机01",deviceId:"JN-NET-003",type:"routine",cycle:30,nextMaintenance:e().add(8,"day").format("YYYY-MM-DD"),content:"清洁设备散热器，检查风扇运行状态，更新网络配置，测试端口连接",responsible:"赵技师",status:"active",lastMaintenance:e().subtract(22,"day").format("YYYY-MM-DD")},{id:"4",planName:"京杭运河监控设备紧急保养",deviceName:"京杭运河济宁段-航道监控01",deviceId:"YH-CAM-001",type:"emergency",cycle:7,nextMaintenance:e().add(2,"day").format("YYYY-MM-DD"),content:"紧急清洁镜头，检查网络连接，测试监控功能，确保航道安全监控",responsible:"钱技师",status:"active",lastMaintenance:e().subtract(5,"day").format("YYYY-MM-DD")},{id:"5",planName:"济宁港数据中心存储设备季度保养",deviceName:"济宁港数据中心-存储阵列01",deviceId:"JN-STR-001",type:"preventive",cycle:90,nextMaintenance:e().add(20,"day").format("YYYY-MM-DD"),content:"检查硬盘健康状态，清理设备灰尘，测试RAID阵列，备份重要数据",responsible:"孙技师",status:"active",lastMaintenance:e().subtract(70,"day").format("YYYY-MM-DD")},{id:"6",planName:"济宁港锚地气象传感器月度保养",deviceName:"济宁港锚地-气象传感器01",deviceId:"JN-SEN-004",type:"routine",cycle:30,nextMaintenance:e().add(12,"day").format("YYYY-MM-DD"),content:"清洁传感器表面，校准温度湿度读数，检查防水性能，测试数据传输",responsible:"周技师",status:"active",lastMaintenance:e().subtract(18,"day").format("YYYY-MM-DD")}]),Ue=c([{id:"JN-CAM-001",deviceName:"济宁港主码头-高清监控01",deviceType:"摄像头",status:"online"},{id:"LS-SEN-001",deviceName:"梁山港航道-潮汐传感器01",deviceType:"传感器",status:"online"},{id:"JN-NET-001",deviceName:"济宁港锚地-通信基站01",deviceType:"网络设备",status:"online"},{id:"YH-CAM-001",deviceName:"京杭运河济宁段-航道监控01",deviceType:"摄像头",status:"online"},{id:"JN-SEN-004",deviceName:"济宁港锚地-气象传感器01",deviceType:"传感器",status:"fault"},{id:"JN-NET-003",deviceName:"济宁港控制中心-核心交换机01",deviceType:"网络设备",status:"online"},{id:"JN-STR-001",deviceName:"济宁港数据中心-存储阵列01",deviceType:"存储设备",status:"online"},{id:"LS-STR-001",deviceName:"梁山港数据中心-存储设备01",deviceType:"存储设备",status:"online"},{id:"JN-SEN-005",deviceName:"济宁港散货码头-粉尘传感器01",deviceType:"传感器",status:"online"},{id:"JN-NET-002",deviceName:"济宁港散货码头-通信设备01",deviceType:"网络设备",status:"maintenance"}]),He=o(()=>C.status?Te.value.filter(e=>e.status===C.status):Te.value),Se=o(()=>{if(!ue.value||2!==ue.value.length)return Ie.value;const[a,l]=ue.value;return Ie.value.filter(t=>{const i=e(t.repairTime);return i.isAfter(a)&&i.isBefore(l)})}),Ee=o(()=>de.type?Ce.value.filter(e=>e.type===de.type):Ce.value),Je=[{title:"计划信息",key:"planName",width:200},{title:"保养类型",dataIndex:"type",key:"type",width:120,customRender:({text:e})=>Ae(e)},{title:"状态",key:"status",width:100},{title:"下次保养",key:"nextMaintenance",width:150},{title:"负责人",dataIndex:"responsible",key:"responsible",width:100},{title:"操作",key:"action",width:200,fixed:"right"}],Re=e=>({pending:"red",processing:"orange",resolved:"green",closed:"default"}[e]||"default"),je=e=>({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"}[e]||e),qe=e=>({active:"进行中",completed:"已完成",cancelled:"已取消"}[e]||e),Ae=e=>({routine:"例行保养",preventive:"预防性保养",emergency:"紧急保养"}[e]||e),Oe=e=>({hardware:"硬件故障",software:"软件故障",network:"网络故障",power:"电源故障",environmental:"环境故障",other:"其他故障"}[e]||e),$e=e=>({low:"低",medium:"中",high:"高",critical:"紧急"}[e]||e),ze=a=>e(a).format("YYYY-MM-DD HH:mm:ss"),Fe=a=>{const l=e(),t=e(a).diff(l,"day");return t<0?"已过期":0===t?"今天":1===t?"明天":`${t}天后`},Le=()=>{console.log("故障过滤条件变化:",C.status)},Be=()=>{console.log("计划过滤条件变化:",de.type)},Pe=()=>{console.log("维修日期范围变化:",ue.value)},Ge=()=>{re.visible=!0,ea()},Ve=()=>{ce.visible=!0,aa()},We=()=>{const l=Se.value.map(e=>({"维修标题":e.title,"维修设备":e.deviceName,"维修技师":e.technician,"维修时间":e.repairTime,"维修耗时":`${e.duration}小时`,"维修结果":e.success?"成功":"失败","维修描述":e.description,"更换配件":e.parts.join(", ")||"无","维修成本":`¥${e.cost}`})),t=Object.keys(l[0]||{}),i=[t.join(","),...l.map(e=>t.map(a=>`"${e[a]}"`).join(","))].join("\n"),n=new Blob(["\ufeff"+i],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),d=URL.createObjectURL(n);s.setAttribute("href",d),s.setAttribute("download",`维修历史_${e().format("YYYY-MM-DD")}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),a.success("维修历史导出成功")},Xe=()=>{const l=Ue.value.find(e=>e.id===ge.deviceId);if(!l)return void a.error("设备不存在");const t={id:Date.now().toString(),title:ge.title,deviceName:l.deviceName,deviceId:ge.deviceId,type:ge.type,level:ge.level,status:"pending",description:ge.description,reporter:ge.reporter,reportTime:e().format("YYYY-MM-DD HH:mm:ss")};Te.value.unshift(t),xe.pendingFaults+=1,a.success("故障记录添加成功"),re.visible=!1,ea()},Ke=()=>{re.visible=!1,ea()},Qe=()=>{const e=Ue.value.find(e=>e.id===he.deviceId);if(!e)return void a.error("设备不存在");const l={id:Date.now().toString(),planName:he.planName,deviceName:e.deviceName,deviceId:he.deviceId,type:he.type,cycle:he.cycle,nextMaintenance:he.nextMaintenance,content:he.content,responsible:he.responsible,status:"active"};Ce.value.unshift(l),xe.todayMaintenance+=1,a.success("保养计划添加成功"),ce.visible=!1,aa()},Ze=()=>{ce.visible=!1,aa()},ea=()=>{Object.assign(ge,{title:"",deviceId:"",type:"hardware",level:"medium",description:"",reporter:""})},aa=()=>{Object.assign(he,{planName:"",deviceId:"",type:"routine",cycle:30,nextMaintenance:"",content:"",responsible:""})},la=()=>{if(!ve.value||!Me.technician)return void a.error("请选择技师");ve.value.assignedTechnician=Me.technician,ve.value.status="processing";const l={id:Date.now().toString(),title:`修复${ve.value.deviceName}故障`,deviceName:ve.value.deviceName,deviceId:ve.value.deviceId,technician:Me.technician,repairTime:e().format("YYYY-MM-DD HH:mm:ss"),duration:0,success:!1,description:ve.value.description,parts:[],cost:0};Ie.value.unshift(l),be.visible=!1,a.success("技师分配成功")},ta=()=>{ve.value&&(ve.value.status=Ne.status,Ne.resolution&&(ve.value.resolution=Ne.resolution,ve.value.resolveTime=e().format("YYYY-MM-DD HH:mm:ss")),"resolved"===Ne.status&&(xe.pendingFaults=Math.max(0,xe.pendingFaults-1)),_e.visible=!1,a.success("故障状态更新成功"))},ia=()=>{me.value&&(Object.assign(me.value,De),Ye.visible=!1,a.success("保养计划更新成功"))};return v(()=>{console.log("智能运维页面已加载")}),(u,r)=>{const c=_("a-statistic"),o=_("a-card"),v=_("a-col"),Te=_("CalendarCircleOutlined"),Ie=_("a-row"),Ae=_("a-select-option"),ea=_("a-select"),aa=_("a-button"),na=_("a-space"),sa=_("a-tag"),da=_("a-range-picker"),ua=_("a-table"),ra=_("a-input"),ca=_("a-form-item"),oa=_("a-textarea"),va=_("a-form"),pa=_("a-modal"),ma=_("a-input-number"),fa=_("a-date-picker"),ya=_("a-descriptions-item"),ba=_("a-descriptions");return p(),m("div",U,[r[79]||(r[79]=f("div",{class:"page-header"},[f("h2",null,"智能运维"),f("p",null,"设备故障记录、维修历史、保养计划等运维管理功能")],-1)),f("div",H,[y(Ie,{gutter:16},{default:b(()=>[y(v,{span:6},{default:b(()=>[y(o,{class:"overview-card"},{default:b(()=>[y(c,{title:"待处理故障",value:xe.pendingFaults,"value-style":{color:"#ff4d4f"}},{suffix:b(()=>[y(Y(l),{style:{color:"#ff4d4f","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),y(v,{span:6},{default:b(()=>[y(o,{class:"overview-card"},{default:b(()=>[y(c,{title:"维修中设备",value:xe.maintenanceDevices,"value-style":{color:"#faad14"}},{suffix:b(()=>[y(Y(x),{style:{color:"#faad14","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),y(v,{span:6},{default:b(()=>[y(o,{class:"overview-card"},{default:b(()=>[y(c,{title:"今日保养计划",value:xe.todayMaintenance,"value-style":{color:"#1890ff"}},{suffix:b(()=>[y(Te,{style:{color:"#1890ff","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),y(v,{span:6},{default:b(()=>[y(o,{class:"overview-card"},{default:b(()=>[y(c,{title:"平均修复时间",value:xe.avgRepairTime,suffix:"小时","value-style":{color:"#52c41a"}},{suffix:b(()=>[y(Y(t),{style:{color:"#52c41a","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),f("div",S,[y(Ie,{gutter:16},{default:b(()=>[y(v,{span:12},{default:b(()=>[y(o,{title:"故障记录管理",class:"maintenance-card"},{extra:b(()=>[y(na,null,{default:b(()=>[y(ea,{value:C.status,"onUpdate:value":r[0]||(r[0]=e=>C.status=e),placeholder:"故障状态",style:{width:"120px"},onChange:Le},{default:b(()=>[y(Ae,{value:""},{default:b(()=>[...r[39]||(r[39]=[g("全部状态",-1)])]),_:1}),y(Ae,{value:"pending"},{default:b(()=>[...r[40]||(r[40]=[g("待处理",-1)])]),_:1}),y(Ae,{value:"processing"},{default:b(()=>[...r[41]||(r[41]=[g("处理中",-1)])]),_:1}),y(Ae,{value:"resolved"},{default:b(()=>[...r[42]||(r[42]=[g("已解决",-1)])]),_:1}),y(Ae,{value:"closed"},{default:b(()=>[...r[43]||(r[43]=[g("已关闭",-1)])]),_:1})]),_:1},8,["value"]),y(aa,{type:"primary",onClick:Ge},{default:b(()=>[y(Y(i)),r[44]||(r[44]=g(" 添加故障 ",-1))]),_:1})]),_:1})]),default:b(()=>[f("div",E,[(p(!0),m(h,null,M(He.value,e=>(p(),m("div",{key:e.id,class:N(["fault-item",`fault-${e.status}`])},[f("div",J,[f("div",R,D(e.title),1),f("div",j,[y(sa,{color:Re(e.status)},{default:b(()=>[g(D(je(e.status)),1)]),_:2},1032,["color"])])]),f("div",q,[f("div",A,D(e.deviceName),1),f("div",O,D(ze(e.reportTime)),1)]),f("div",$,D(e.description),1),f("div",z,[y(aa,{type:"link",size:"small",onClick:a=>(e=>{ve.value=e,fe.visible=!0})(e)},{default:b(()=>[...r[45]||(r[45]=[g(" 查看详情 ",-1)])]),_:2},1032,["onClick"]),y(aa,{type:"link",size:"small",onClick:a=>(e=>{ve.value=e,Me.technician=e.assignedTechnician||"",Me.estimatedTime="",Me.notes="",be.visible=!0})(e)},{default:b(()=>[...r[46]||(r[46]=[g(" 分配技师 ",-1)])]),_:2},1032,["onClick"]),y(aa,{type:"link",size:"small",onClick:a=>(e=>{ve.value=e,Ne.status=e.status,Ne.notes="",Ne.resolution=e.resolution||"",_e.visible=!0})(e)},{default:b(()=>[...r[47]||(r[47]=[g(" 更新状态 ",-1)])]),_:2},1032,["onClick"])])],2))),128))])]),_:1})]),_:1}),y(v,{span:12},{default:b(()=>[y(o,{title:"维修历史记录",class:"maintenance-card"},{extra:b(()=>[y(na,null,{default:b(()=>[y(da,{value:ue.value,"onUpdate:value":r[1]||(r[1]=e=>ue.value=e),onChange:Pe},null,8,["value"]),y(aa,{onClick:We},{default:b(()=>[y(Y(T)),r[48]||(r[48]=g(" 导出 ",-1))]),_:1})]),_:1})]),default:b(()=>[f("div",F,[(p(!0),m(h,null,M(Se.value,e=>(p(),m("div",{key:e.id,class:"repair-item"},[f("div",L,[f("div",B,D(e.title),1),f("div",P,[y(sa,{color:e.success?"green":"red"},{default:b(()=>[g(D(e.success?"成功":"失败"),1)]),_:2},1032,["color"])])]),f("div",G,[f("div",V,D(e.deviceName),1),f("div",W,"技师: "+D(e.technician),1),f("div",X,D(ze(e.repairTime)),1)]),f("div",K," 耗时: "+D(e.duration)+"小时 ",1),f("div",Q,[y(aa,{type:"link",size:"small",onClick:a=>(e=>{pe.value=e,ye.visible=!0})(e)},{default:b(()=>[...r[49]||(r[49]=[g(" 查看详情 ",-1)])]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),f("div",Z,[y(o,{title:"保养计划管理",class:"planning-card"},{extra:b(()=>[y(na,null,{default:b(()=>[y(ea,{value:de.type,"onUpdate:value":r[2]||(r[2]=e=>de.type=e),placeholder:"保养类型",style:{width:"120px"},onChange:Be},{default:b(()=>[y(Ae,{value:""},{default:b(()=>[...r[50]||(r[50]=[g("全部类型",-1)])]),_:1}),y(Ae,{value:"routine"},{default:b(()=>[...r[51]||(r[51]=[g("例行保养",-1)])]),_:1}),y(Ae,{value:"preventive"},{default:b(()=>[...r[52]||(r[52]=[g("预防性保养",-1)])]),_:1}),y(Ae,{value:"emergency"},{default:b(()=>[...r[53]||(r[53]=[g("紧急保养",-1)])]),_:1})]),_:1},8,["value"]),y(aa,{type:"primary",onClick:Ve},{default:b(()=>[y(Y(i)),r[54]||(r[54]=g(" 添加计划 ",-1))]),_:1})]),_:1})]),default:b(()=>[y(ua,{columns:Je,"data-source":Ee.value,pagination:!1,"row-key":"id",size:"small"},{bodyCell:b(({column:l,record:t})=>{return["planName"===l.key?(p(),m("div",ee,[f("div",ae,D(t.planName),1),f("div",le,D(t.deviceName),1)])):"status"===l.key?(p(),w(sa,{key:1,color:(u=t.status,{active:"green",completed:"blue",cancelled:"red"}[u]||"default")},{default:b(()=>[g(D(qe(t.status)),1)]),_:2},1032,["color"])):"nextMaintenance"===l.key?(p(),m("div",te,[f("div",null,D((i=t.nextMaintenance,e(i).format("YYYY-MM-DD"))),1),f("div",ie,D(Fe(t.nextMaintenance)),1)])):"action"===l.key?(p(),w(na,{key:3},{default:b(()=>[y(aa,{type:"link",size:"small",onClick:l=>{return i=t,void d.confirm({title:"确认执行",content:`确定要执行保养计划"${i.planName}"吗？`,onOk:()=>{i.status="completed",i.lastMaintenance=e().format("YYYY-MM-DD"),i.nextMaintenance=e().add(i.cycle,"day").format("YYYY-MM-DD"),a.success("保养计划执行成功")}});var i}},{default:b(()=>[y(Y(I)),r[55]||(r[55]=g(" 执行 ",-1))]),_:2},1032,["onClick"]),y(aa,{type:"link",size:"small",onClick:e=>{return a=t,me.value=a,Object.assign(De,{planName:a.planName,deviceId:a.deviceId,type:a.type,cycle:a.cycle,nextMaintenance:a.nextMaintenance,content:a.content,responsible:a.responsible}),void(Ye.visible=!0);var a}},{default:b(()=>[y(Y(n)),r[56]||(r[56]=g(" 编辑 ",-1))]),_:2},1032,["onClick"]),y(aa,{type:"link",size:"small",onClick:e=>{return l=t,void d.confirm({title:"确认删除",content:`确定要删除保养计划"${l.planName}"吗？`,onOk:()=>{const e=Ce.value.findIndex(e=>e.id===l.id);e>-1&&(Ce.value.splice(e,1),a.success("保养计划删除成功"))}});var l}},{default:b(()=>[y(Y(s)),r[57]||(r[57]=g(" 删除 ",-1))]),_:2},1032,["onClick"])]),_:2},1024)):k("",!0)];var i,u}),_:1},8,["data-source"])]),_:1})]),y(pa,{open:re.visible,"onUpdate:open":r[9]||(r[9]=e=>re.visible=e),title:"添加故障记录",width:"600px",onOk:Xe,onCancel:Ke},{default:b(()=>[y(va,{ref:"faultFormRef",model:ge,rules:we,"label-col":{span:6},"wrapper-col":{span:18}},{default:b(()=>[y(ca,{label:"故障标题",name:"title"},{default:b(()=>[y(ra,{value:ge.title,"onUpdate:value":r[3]||(r[3]=e=>ge.title=e),placeholder:"请输入故障标题"},null,8,["value"])]),_:1}),y(ca,{label:"故障设备",name:"deviceId"},{default:b(()=>[y(ea,{value:ge.deviceId,"onUpdate:value":r[4]||(r[4]=e=>ge.deviceId=e),placeholder:"请选择故障设备"},{default:b(()=>[(p(!0),m(h,null,M(Ue.value,e=>(p(),w(Ae,{key:e.id,value:e.id},{default:b(()=>[g(D(e.deviceName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),y(ca,{label:"故障类型",name:"type"},{default:b(()=>[y(ea,{value:ge.type,"onUpdate:value":r[5]||(r[5]=e=>ge.type=e),placeholder:"请选择故障类型"},{default:b(()=>[y(Ae,{value:"hardware"},{default:b(()=>[...r[58]||(r[58]=[g("硬件故障",-1)])]),_:1}),y(Ae,{value:"software"},{default:b(()=>[...r[59]||(r[59]=[g("软件故障",-1)])]),_:1}),y(Ae,{value:"network"},{default:b(()=>[...r[60]||(r[60]=[g("网络故障",-1)])]),_:1}),y(Ae,{value:"power"},{default:b(()=>[...r[61]||(r[61]=[g("电源故障",-1)])]),_:1}),y(Ae,{value:"environmental"},{default:b(()=>[...r[62]||(r[62]=[g("环境故障",-1)])]),_:1}),y(Ae,{value:"other"},{default:b(()=>[...r[63]||(r[63]=[g("其他故障",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),y(ca,{label:"故障等级",name:"level"},{default:b(()=>[y(ea,{value:ge.level,"onUpdate:value":r[6]||(r[6]=e=>ge.level=e),placeholder:"请选择故障等级"},{default:b(()=>[y(Ae,{value:"low"},{default:b(()=>[...r[64]||(r[64]=[g("低 - 轻微影响，可延后处理",-1)])]),_:1}),y(Ae,{value:"medium"},{default:b(()=>[...r[65]||(r[65]=[g("中 - 影响部分功能，需及时处理",-1)])]),_:1}),y(Ae,{value:"high"},{default:b(()=>[...r[66]||(r[66]=[g("高 - 影响主要功能，需优先处理",-1)])]),_:1}),y(Ae,{value:"critical"},{default:b(()=>[...r[67]||(r[67]=[g("紧急 - 影响安全监控，需立即处理",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),y(ca,{label:"故障描述",name:"description"},{default:b(()=>[y(oa,{value:ge.description,"onUpdate:value":r[7]||(r[7]=e=>ge.description=e),placeholder:"请详细描述故障现象、影响范围、发现时间等关键信息",rows:4},null,8,["value"]),r[68]||(r[68]=f("div",{style:{"margin-top":"8px","font-size":"12px",color:"#999"}}," 提示：建议包含故障现象、影响范围、发现时间、是否影响安全监控等关键信息 ",-1))]),_:1}),y(ca,{label:"报告人",name:"reporter"},{default:b(()=>[y(ra,{value:ge.reporter,"onUpdate:value":r[8]||(r[8]=e=>ge.reporter=e),placeholder:"请输入报告人姓名"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),y(pa,{open:ce.visible,"onUpdate:open":r[17]||(r[17]=e=>ce.visible=e),title:"添加保养计划",width:"600px",onOk:Qe,onCancel:Ze},{default:b(()=>[y(va,{ref:"planFormRef",model:he,rules:ke,"label-col":{span:6},"wrapper-col":{span:18}},{default:b(()=>[y(ca,{label:"计划名称",name:"planName"},{default:b(()=>[y(ra,{value:he.planName,"onUpdate:value":r[10]||(r[10]=e=>he.planName=e),placeholder:"请输入计划名称"},null,8,["value"])]),_:1}),y(ca,{label:"保养设备",name:"deviceId"},{default:b(()=>[y(ea,{value:he.deviceId,"onUpdate:value":r[11]||(r[11]=e=>he.deviceId=e),placeholder:"请选择保养设备"},{default:b(()=>[(p(!0),m(h,null,M(Ue.value,e=>(p(),w(Ae,{key:e.id,value:e.id},{default:b(()=>[g(D(e.deviceName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),y(ca,{label:"保养类型",name:"type"},{default:b(()=>[y(ea,{value:he.type,"onUpdate:value":r[12]||(r[12]=e=>he.type=e),placeholder:"请选择保养类型"},{default:b(()=>[y(Ae,{value:"routine"},{default:b(()=>[...r[69]||(r[69]=[g("例行保养",-1)])]),_:1}),y(Ae,{value:"preventive"},{default:b(()=>[...r[70]||(r[70]=[g("预防性保养",-1)])]),_:1}),y(Ae,{value:"emergency"},{default:b(()=>[...r[71]||(r[71]=[g("紧急保养",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),y(ca,{label:"保养周期",name:"cycle"},{default:b(()=>[y(ma,{value:he.cycle,"onUpdate:value":r[13]||(r[13]=e=>he.cycle=e),min:1,max:365,placeholder:"保养周期(天)",style:{width:"100%"}},null,8,["value"])]),_:1}),y(ca,{label:"下次保养",name:"nextMaintenance"},{default:b(()=>[y(fa,{value:he.nextMaintenance,"onUpdate:value":r[14]||(r[14]=e=>he.nextMaintenance=e),style:{width:"100%"}},null,8,["value"])]),_:1}),y(ca,{label:"保养内容",name:"content"},{default:b(()=>[y(oa,{value:he.content,"onUpdate:value":r[15]||(r[15]=e=>he.content=e),placeholder:"请描述保养内容",rows:4},null,8,["value"])]),_:1}),y(ca,{label:"负责人",name:"responsible"},{default:b(()=>[y(ra,{value:he.responsible,"onUpdate:value":r[16]||(r[16]=e=>he.responsible=e),placeholder:"请输入负责人姓名"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),y(pa,{open:fe.visible,"onUpdate:open":r[18]||(r[18]=e=>fe.visible=e),title:"故障详情",width:"600px",footer:null},{default:b(()=>[ve.value?(p(),m("div",ne,[y(ba,{column:1,bordered:""},{default:b(()=>[y(ya,{label:"故障标题"},{default:b(()=>[g(D(ve.value.title),1)]),_:1}),y(ya,{label:"故障设备"},{default:b(()=>[g(D(ve.value.deviceName),1)]),_:1}),y(ya,{label:"故障类型"},{default:b(()=>{return[y(sa,{color:(e=ve.value.type,{hardware:"blue",software:"purple",network:"orange",power:"red",environmental:"cyan",other:"default"}[e]||"default")},{default:b(()=>[g(D(Oe(ve.value.type)),1)]),_:1},8,["color"])];var e}),_:1}),y(ya,{label:"故障等级"},{default:b(()=>{return[y(sa,{color:(e=ve.value.level,{low:"green",medium:"orange",high:"red",critical:"red"}[e]||"default")},{default:b(()=>[g(D($e(ve.value.level)),1)]),_:1},8,["color"])];var e}),_:1}),y(ya,{label:"故障状态"},{default:b(()=>[y(sa,{color:Re(ve.value.status)},{default:b(()=>[g(D(je(ve.value.status)),1)]),_:1},8,["color"])]),_:1}),y(ya,{label:"故障描述"},{default:b(()=>[g(D(ve.value.description),1)]),_:1}),y(ya,{label:"报告人"},{default:b(()=>[g(D(ve.value.reporter),1)]),_:1}),y(ya,{label:"报告时间"},{default:b(()=>[g(D(ze(ve.value.reportTime)),1)]),_:1}),ve.value.assignedTechnician?(p(),w(ya,{key:0,label:"分配技师"},{default:b(()=>[g(D(ve.value.assignedTechnician),1)]),_:1})):k("",!0),ve.value.resolution?(p(),w(ya,{key:1,label:"解决方案"},{default:b(()=>[g(D(ve.value.resolution),1)]),_:1})):k("",!0),ve.value.resolveTime?(p(),w(ya,{key:2,label:"解决时间"},{default:b(()=>[g(D(ze(ve.value.resolveTime)),1)]),_:1})):k("",!0)]),_:1})])):k("",!0)]),_:1},8,["open"]),y(pa,{open:ye.visible,"onUpdate:open":r[19]||(r[19]=e=>ye.visible=e),title:"维修详情",width:"600px",footer:null},{default:b(()=>[pe.value?(p(),m("div",se,[y(ba,{column:1,bordered:""},{default:b(()=>[y(ya,{label:"维修标题"},{default:b(()=>[g(D(pe.value.title),1)]),_:1}),y(ya,{label:"维修设备"},{default:b(()=>[g(D(pe.value.deviceName),1)]),_:1}),y(ya,{label:"维修技师"},{default:b(()=>[g(D(pe.value.technician),1)]),_:1}),y(ya,{label:"维修时间"},{default:b(()=>[g(D(ze(pe.value.repairTime)),1)]),_:1}),y(ya,{label:"维修耗时"},{default:b(()=>[g(D(pe.value.duration)+"小时 ",1)]),_:1}),y(ya,{label:"维修结果"},{default:b(()=>[y(sa,{color:pe.value.success?"green":"red"},{default:b(()=>[g(D(pe.value.success?"成功":"失败"),1)]),_:1},8,["color"])]),_:1}),y(ya,{label:"维修描述"},{default:b(()=>[g(D(pe.value.description),1)]),_:1}),y(ya,{label:"更换配件"},{default:b(()=>[g(D(pe.value.parts.join(", ")||"无"),1)]),_:1}),y(ya,{label:"维修成本"},{default:b(()=>[g(" ¥"+D(pe.value.cost),1)]),_:1})]),_:1})])):k("",!0)]),_:1},8,["open"]),y(pa,{open:be.visible,"onUpdate:open":r[23]||(r[23]=e=>be.visible=e),title:"分配技师",width:"500px",onOk:la,onCancel:r[24]||(r[24]=e=>be.visible=!1)},{default:b(()=>[y(va,{"label-col":{span:6},"wrapper-col":{span:18}},{default:b(()=>[y(ca,{label:"选择技师",required:""},{default:b(()=>[y(ea,{value:Me.technician,"onUpdate:value":r[20]||(r[20]=e=>Me.technician=e),placeholder:"请选择技师",style:{width:"100%"}},{default:b(()=>[(p(!0),m(h,null,M(oe.value,e=>(p(),w(Ae,{key:e,value:e},{default:b(()=>[g(D(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),y(ca,{label:"预计时间"},{default:b(()=>[y(ra,{value:Me.estimatedTime,"onUpdate:value":r[21]||(r[21]=e=>Me.estimatedTime=e),placeholder:"如：2小时"},null,8,["value"])]),_:1}),y(ca,{label:"备注"},{default:b(()=>[y(oa,{value:Me.notes,"onUpdate:value":r[22]||(r[22]=e=>Me.notes=e),placeholder:"请输入备注信息",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"]),y(pa,{open:_e.visible,"onUpdate:open":r[28]||(r[28]=e=>_e.visible=e),title:"更新故障状态",width:"500px",onOk:ta,onCancel:r[29]||(r[29]=e=>_e.visible=!1)},{default:b(()=>[y(va,{"label-col":{span:6},"wrapper-col":{span:18}},{default:b(()=>[y(ca,{label:"故障状态",required:""},{default:b(()=>[y(ea,{value:Ne.status,"onUpdate:value":r[25]||(r[25]=e=>Ne.status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:b(()=>[y(Ae,{value:"pending"},{default:b(()=>[...r[72]||(r[72]=[g("待处理",-1)])]),_:1}),y(Ae,{value:"processing"},{default:b(()=>[...r[73]||(r[73]=[g("处理中",-1)])]),_:1}),y(Ae,{value:"resolved"},{default:b(()=>[...r[74]||(r[74]=[g("已解决",-1)])]),_:1}),y(Ae,{value:"closed"},{default:b(()=>[...r[75]||(r[75]=[g("已关闭",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),y(ca,{label:"备注"},{default:b(()=>[y(oa,{value:Ne.notes,"onUpdate:value":r[26]||(r[26]=e=>Ne.notes=e),placeholder:"请输入备注信息",rows:3},null,8,["value"])]),_:1}),"resolved"===Ne.status?(p(),w(ca,{key:0,label:"解决方案"},{default:b(()=>[y(oa,{value:Ne.resolution,"onUpdate:value":r[27]||(r[27]=e=>Ne.resolution=e),placeholder:"请描述解决方案",rows:3},null,8,["value"])]),_:1})):k("",!0)]),_:1})]),_:1},8,["open"]),y(pa,{open:Ye.visible,"onUpdate:open":r[37]||(r[37]=e=>Ye.visible=e),title:"编辑保养计划",width:"600px",onOk:ia,onCancel:r[38]||(r[38]=e=>Ye.visible=!1)},{default:b(()=>[y(va,{model:De,rules:ke,"label-col":{span:6},"wrapper-col":{span:18}},{default:b(()=>[y(ca,{label:"计划名称",name:"planName"},{default:b(()=>[y(ra,{value:De.planName,"onUpdate:value":r[30]||(r[30]=e=>De.planName=e),placeholder:"请输入计划名称"},null,8,["value"])]),_:1}),y(ca,{label:"保养设备",name:"deviceId"},{default:b(()=>[y(ea,{value:De.deviceId,"onUpdate:value":r[31]||(r[31]=e=>De.deviceId=e),placeholder:"请选择保养设备"},{default:b(()=>[(p(!0),m(h,null,M(Ue.value,e=>(p(),w(Ae,{key:e.id,value:e.id},{default:b(()=>[g(D(e.deviceName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),y(ca,{label:"保养类型",name:"type"},{default:b(()=>[y(ea,{value:De.type,"onUpdate:value":r[32]||(r[32]=e=>De.type=e),placeholder:"请选择保养类型"},{default:b(()=>[y(Ae,{value:"routine"},{default:b(()=>[...r[76]||(r[76]=[g("例行保养",-1)])]),_:1}),y(Ae,{value:"preventive"},{default:b(()=>[...r[77]||(r[77]=[g("预防性保养",-1)])]),_:1}),y(Ae,{value:"emergency"},{default:b(()=>[...r[78]||(r[78]=[g("紧急保养",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),y(ca,{label:"保养周期",name:"cycle"},{default:b(()=>[y(ma,{value:De.cycle,"onUpdate:value":r[33]||(r[33]=e=>De.cycle=e),min:1,max:365,placeholder:"保养周期(天)",style:{width:"100%"}},null,8,["value"])]),_:1}),y(ca,{label:"下次保养",name:"nextMaintenance"},{default:b(()=>[y(fa,{value:De.nextMaintenance,"onUpdate:value":r[34]||(r[34]=e=>De.nextMaintenance=e),style:{width:"100%"}},null,8,["value"])]),_:1}),y(ca,{label:"保养内容",name:"content"},{default:b(()=>[y(oa,{value:De.content,"onUpdate:value":r[35]||(r[35]=e=>De.content=e),placeholder:"请描述保养内容",rows:4},null,8,["value"])]),_:1}),y(ca,{label:"负责人",name:"responsible"},{default:b(()=>[y(ra,{value:De.responsible,"onUpdate:value":r[36]||(r[36]=e=>De.responsible=e),placeholder:"请输入负责人姓名"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])])}}}),[["__scopeId","data-v-bbc5b3fb"]]);export{de as default};
