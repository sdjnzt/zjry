import{d as e,f as a,c as l,o as s,b as t,V as i,W as n,a0 as o,k as c,u,a3 as d,$ as v,a8 as r,F as p,a1 as m,a7 as f,X as y,G as g,a9 as h,B as k,_}from"./vendor-f41c3cc7.js";import{V as b,i as w,S as C,C as z,h as x,j as P,R as U,k as A,E as R,D as T,F as S,l as I,m as j,n as L}from"./icons-15893848.js";import{P as D,b as $,U as O,c as E,R as K,D as Q,Z as B,d as F,e as G}from"./antd-fa5730cf.js";import{_ as V}from"./index-6bb65380.js";const q={class:"video-matrix-container"},J={class:"top-navbar"},N={class:"nav-left"},W={class:"page-title"},X={class:"nav-right"},Z={class:"status-summary"},H={class:"status-item recording"},M={class:"nav-actions"},Y={class:"main-content"},ee={class:"left-panel"},ae={class:"tab-content"},le={class:"panel-section"},se={class:"section-title"},te={class:"layout-grid"},ie=["onClick"],ne={class:"layout-name"},oe={class:"tab-content"},ce={class:"panel-section"},ue={class:"section-title"},de={class:"control-buttons"},ve={class:"panel-section"},re={class:"section-title"},pe={class:"setting-list"},me={class:"setting-item"},fe={class:"setting-item"},ye={class:"setting-item"},ge={class:"tab-content"},he={class:"panel-section"},ke={class:"section-title"},_e={class:"camera-list-mini"},be=["onClick"],we={class:"camera-avatar-mini"},Ce={class:"camera-info-mini"},ze={class:"camera-name-mini"},xe={class:"camera-status-mini"},Pe={class:"camera-actions-mini"},Ue={key:0,class:"no-cameras"},Ae={class:"panel-section"},Re={class:"section-title"},Te={class:"quick-actions-mini"},Se={class:"tab-content"},Ie={class:"panel-section"},je={class:"section-title"},Le={class:"setting-list"},De={class:"setting-item"},$e={class:"setting-item"},Oe={class:"setting-item"},Ee={class:"panel-section"},Ke={class:"section-title"},Qe={class:"setting-list"},Be={class:"setting-item"},Fe={class:"setting-item"},Ge={class:"center-matrix"},Ve={class:"matrix-header"},qe={class:"matrix-info"},Je={class:"camera-count"},Ne={class:"matrix-actions"},We=["onClick","onDblclick","onContextmenu"],Xe={class:"cell-header"},Ze={class:"camera-name"},He={class:"camera-status"},Me={class:"cell-content"},Ye={key:0,class:"video-player"},ea={key:0,class:"video-content"},aa=["src","alt"],la={class:"time-overlay"},sa={class:"timestamp"},ta={class:"resolution"},ia={key:1,class:"video-content"},na=["src"],oa={class:"time-overlay"},ca={class:"timestamp"},ua={class:"resolution"},da={key:2,class:"video-placeholder"},va={class:"video-text"},ra={class:"video-location"},pa={key:3,class:"status-indicators"},ma={key:0,class:"recording-indicator"},fa={key:1,class:"alarm-indicator"},ya={key:1,class:"video-paused"},ga={key:2,class:"video-empty"},ha={class:"cell-footer"},ka={class:"camera-details"},_a={class:"camera-ip"},ba={class:"cell-controls"},wa={class:"layout-selector"},Ca={class:"layout-grid-large"},za=["onClick"],xa={class:"layout-info-large"},Pa={class:"layout-name-large"},Ua={class:"layout-desc-large"},Aa={class:"layout-features"},Ra={class:"feature-tag"},Ta={class:"feature-tag"},Sa={class:"camera-manager"},Ia={class:"search-filters"},ja={class:"camera-list"},La=["onClick"],Da={class:"camera-avatar"},$a={class:"camera-details"},Oa={class:"camera-name"},Ea={class:"camera-location"},Ka={class:"camera-specs"},Qa={class:"spec-item"},Ba={class:"spec-item"},Fa={class:"spec-item"},Ga={class:"camera-actions"},Va={class:"ptz-control-panel"},qa={class:"camera-info-header"},Ja={class:"ptz-controls"},Na={class:"speed-control"},Wa={class:"direction-controls"},Xa={class:"ptz-row"},Za={class:"ptz-row"},Ha={class:"ptz-row"},Ma={class:"zoom-controls"},Ya={class:"zoom-buttons"},el={class:"preset-controls"},al={class:"preset-buttons"},ll={key:0,class:"debug-panel"},sl={class:"debug-item"},tl={class:"value"},il={class:"debug-item"},nl={class:"value"},ol={class:"debug-item"},cl={class:"value"},ul={class:"debug-item"},dl={class:"value"},vl={class:"debug-item"},rl={class:"value"},pl=V(e({__name:"video-matrix",setup(e){const V=a("4"),pl=a(!1),ml=a(!1),fl=a(!1),yl=a(!1),gl=a(4),hl=a(""),kl=a(""),_l=a(""),bl=a(-1),wl=a(null),Cl=a(null),zl=a(!1),xl=a(!1),Pl=a(!1),Ul=a({showInfo:!0,showGrid:!1,showTime:!0,autoRotate:!1,showStatusIndicators:!0,showCameraDetails:!0}),Al=a({loop:!1,mute:!1}),Rl=a({theme:"light",language:"zh",autoSave:!0,videoQuality:"high",frameRate:"30"}),Tl=a([{value:"1",name:"单屏",cells:1,description:"显示一个摄像头画面",recommended:!1},{value:"4",name:"2×2",cells:4,description:"显示四个摄像头画面",recommended:!0},{value:"9",name:"3×3",cells:9,description:"显示九个摄像头画面",recommended:!1},{value:"16",name:"4×4",cells:16,description:"显示十六个摄像头画面",recommended:!1},{value:"custom",name:"自定义",cells:0,description:"自定义分屏布局",recommended:!1}]),Sl=a([]),Il=a([{id:1,name:"码头1号",location:"码头前沿",ip:"192.168.1.101",resolution:"1080P",fps:"25",status:"online",lastUpdate:"2025-08-26 14:30:25",mediaType:"video",mediaPath:"/zjry/image/1.mp4"},{id:2,name:"码头2号",location:"码头前沿",ip:"192.168.1.102",resolution:"1080P",fps:"25",status:"online",lastUpdate:"2025-08-26 14:30:22",mediaType:"image",mediaPath:"/zjry/image/2.png"},{id:3,name:"航道1号",location:"主航道",ip:"192.168.1.103",resolution:"4K",fps:"30",status:"online",lastUpdate:"2025-08-26 14:25:18",mediaType:"image",mediaPath:"/zjry/image/3.png"},{id:4,name:"锚地1号",location:"锚地区域",ip:"192.168.1.104",resolution:"1080P",fps:"25",status:"online",lastUpdate:"2025-08-26 14:30:28",mediaType:"image",mediaPath:"/zjry/image/4.png"},{id:5,name:"航道2号",location:"主航道",ip:"192.168.1.105",resolution:"4K",fps:"30",status:"online",lastUpdate:"2025-08-26 14:30:20",mediaType:"video",mediaPath:"/zjry/image/1.mp4"},{id:6,name:"码头3号",location:"码头前沿",ip:"192.168.1.106",resolution:"1080P",fps:"25",status:"online",lastUpdate:"2025-08-26 14:30:15",mediaType:"image",mediaPath:"/zjry/image/1.png"}]),jl=a(!1),Ll=a(-1),Dl=a(""),$l=[{title:"名称",dataIndex:"name",key:"name",width:160},{title:"位置",dataIndex:"location",key:"location",width:120},{title:"IP",dataIndex:"ip",key:"ip",width:140},{title:"状态",dataIndex:"status",key:"status",width:90},{title:"操作",key:"action",width:80,fixed:"right"}],Ol=l(()=>{const e=Dl.value.trim().toLowerCase();let a=Il.value;return e&&(a=a.filter(a=>a.name.toLowerCase().includes(e)||a.ip.toLowerCase().includes(e)||a.location.toLowerCase().includes(e))),a}),El=e=>{Ll.value=e,jl.value=!0},Kl=a(!1),Ql=a(!1),Bl=a("layout"),Fl=a(new Date),Gl=l(()=>{let e=Il.value;return hl.value&&(e=e.filter(e=>e.name.includes(hl.value)||e.ip.includes(hl.value))),kl.value&&(e=e.filter(e=>e.status===kl.value)),_l.value&&(e=e.filter(e=>e.location===_l.value)),e});l(()=>Sl.value.filter(e=>"online"===e.statusClass).length),l(()=>Sl.value.filter(e=>"offline"===e.statusClass).length);const Vl=l(()=>Sl.value.filter(e=>e.isRecording).length),ql=l(()=>Sl.value.filter(e=>e.isActive).length),Jl=e=>{if(V.value=e,"custom"===e)pl.value=!0;else{const a=parseInt(e);Sl.value=[];for(let e=0;e<a;e++){const a=e%Il.value.length,l=Il.value[a];Sl.value.push({id:l.id,name:l.name,isActive:!0,isPlaying:!0,status:"online"===l.status?"在线":"离线",statusClass:"online"===l.status?"online":"offline",location:l.location,ip:l.ip,lastUpdate:(new Date).toLocaleString(),resolution:l.resolution,fps:l.fps,isRecording:!1,hasAlarm:!1,mediaType:l.mediaType,mediaPath:l.mediaPath})}}},Nl=async()=>{zl.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),Sl.value.forEach(e=>{e.isActive&&(e.isPlaying=!0)})}finally{zl.value=!1}},Wl=async()=>{xl.value=!0;try{await new Promise(e=>setTimeout(e,500)),Sl.value.forEach(e=>{e.isPlaying=!1})}finally{xl.value=!1}},Xl=e=>{if(e<0||e>=Sl.value.length)return;const a=Sl.value[e];a.isActive?a.isPlaying=!a.isPlaying:ml.value=!0},Zl=e=>{e>=0&&e<Sl.value.length&&(wl.value=Sl.value[e],fl.value=!0)},Hl=e=>Sl.value.some(a=>a.id===e&&a.isActive),Ml=e=>{e>=0&&e<Sl.value.length&&(bl.value=e)},Yl=e=>{if(e<0||e>=Sl.value.length)return;const a=Sl.value[e];a&&a.isActive&&(Cl.value={...a,index:e},yl.value=!0)},es=async()=>{Pl.value=!0;try{await new Promise(e=>setTimeout(e,1500)),Sl.value.forEach(e=>{e.isActive&&(e.lastUpdate=(new Date).toLocaleString())})}finally{Pl.value=!1}},as=()=>{const e={currentLayout:V.value,cells:Sl.value,displaySettings:Ul.value,timestamp:(new Date).toISOString()},a=JSON.stringify(e,null,2),l=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(l),t=document.createElement("a");t.href=s,t.download=`video-matrix-layout-${(new Date).toISOString().split("T")[0]}.json`,t.click(),URL.revokeObjectURL(s)},ls=()=>{yl.value=!0},ss=(e,a)=>{const l=[];return e.isActive&&l.push("active"),e.isPlaying&&l.push("playing"),"offline"===e.statusClass&&l.push("offline"),bl.value===a&&l.push("selected"),e.isRecording&&l.push("recording"),e.hasAlarm&&l.push("alarm"),l.join(" ")},ts=()=>{const e=Tl.value.find(e=>e.value===V.value);return e?e.name:"未知布局"},is=e=>"在线"===e?"success":"离线"===e||"报警"===e?"error":"录制中"===e?"warning":"default",ns=e=>"在线"===e?"在线":"离线"===e?"离线":"报警"===e?"报警":"录制中"===e?"录制中":e,os=()=>Sl.value[bl.value],cs=e=>{e&&wl.value&&console.log("云台控制:",e,"速度:",gl.value,"摄像头:",wl.value.name)},us=e=>{const a=e.key;"play"===a||"pause"===a?Xl(bl.value):"fullscreen"===a?Yl(bl.value):"ptz"===a?Zl(bl.value):"snapshot"===a?bl.value>=0&&console.log("截图:",Sl.value[bl.value].name):"record"===a?bl.value>=0&&(Sl.value[bl.value].isRecording=!0,setTimeout(()=>{Sl.value[bl.value].isRecording=!1},5e3)):"stopRecord"===a?bl.value>=0&&(Sl.value[bl.value].isRecording=!1):"remove"===a&&(Sl.value[bl.value].isActive=!1,Sl.value[bl.value].isPlaying=!1,Sl.value[bl.value].status="已移除",Sl.value[bl.value].statusClass="offline",Sl.value[bl.value].location="已移除",Sl.value[bl.value].ip="已移除",Sl.value[bl.value].lastUpdate=(new Date).toLocaleString(),bl.value=-1),Kl.value=!1};s(()=>{console.log("视频矩阵组件已挂载"),Jl("1");const e=setInterval(()=>{Fl.value=new Date},1e3);t(()=>{clearInterval(e)})});const ds=()=>{console.error("图片加载失败")},vs=()=>{console.log("图片加载成功")},rs=()=>{console.error("视频加载失败")},ps=()=>{console.log("视频加载成功")},ms=()=>Fl.value.toLocaleString();return(e,a)=>{const l=y("a-button"),s=y("a-tab-pane"),t=y("a-switch"),yl=y("a-avatar"),wl=y("a-tag"),Cl=y("a-select-option"),Il=y("a-select"),Fl=y("a-tabs"),fs=y("a-badge"),ys=y("a-modal"),gs=y("a-input-search"),hs=y("a-table"),ks=y("a-slider"),_s=y("a-menu-item"),bs=y("a-menu"),ws=y("a-dropdown");return i(),n("div",q,[o("div",J,[o("div",N,[o("div",W,[c(u(b),{class:"title-icon"}),a[34]||(a[34]=o("span",null,"视频矩阵",-1))]),a[35]||(a[35]=o("div",{class:"breadcrumb"},[o("span",null,"视频广场"),o("span",{class:"separator"},"/"),o("span",{class:"current"},"视频矩阵")],-1))]),o("div",X,[o("div",Z,[a[37]||(a[37]=o("div",{class:"status-item online"},[o("div",{class:"status-dot"}),o("span",null,"在线 "+d(70))],-1)),a[38]||(a[38]=o("div",{class:"status-item offline"},[o("div",{class:"status-dot"}),o("span",null,"离线 "+d(0))],-1)),o("div",H,[a[36]||(a[36]=o("div",{class:"status-dot"},null,-1)),o("span",null,"录制 "+d(Vl.value),1)])]),o("div",M,[c(l,{type:"primary",onClick:a[0]||(a[0]=e=>pl.value=!0)},{default:v(()=>[c(u(w)),a[39]||(a[39]=g(" 布局管理 ",-1))]),_:1}),c(l,{onClick:a[1]||(a[1]=e=>(()=>{let e=bl.value;e<0&&(e=Sl.value.findIndex(e=>!e.isActive),e<0&&(e=0)),El(e)})())},{default:v(()=>[c(u(D)),a[40]||(a[40]=g(" 选择摄像头 ",-1))]),_:1}),c(l,{onClick:a[2]||(a[2]=e=>ml.value=!0)},{default:v(()=>[c(u(C)),a[41]||(a[41]=g(" 摄像头管理 ",-1))]),_:1})])])]),o("div",Y,[o("div",ee,[c(Fl,{activeKey:Bl.value,"onUpdate:activeKey":a[12]||(a[12]=e=>Bl.value=e),class:"control-tabs"},{default:v(()=>[c(s,{key:"layout",tab:"布局管理"},{default:v(()=>[o("div",ae,[o("div",le,[o("div",se,[c(u(w)),a[42]||(a[42]=o("span",null,"分屏布局",-1))]),o("div",te,[(i(!0),n(p,null,m(Tl.value,e=>(i(),n("div",{key:e.value,class:r(["layout-item",{active:V.value===e.value}]),onClick:a=>Jl(e.value)},[o("div",{class:r(["layout-preview",`preview-${e.value}`])},[(i(!0),n(p,null,m(e.cells,e=>(i(),n("div",{key:e,class:"preview-cell"}))),128))],2),o("div",ne,d(e.name),1)],10,ie))),128))])])])]),_:1}),c(s,{key:"playback",tab:"播放控制"},{default:v(()=>[o("div",oe,[o("div",ce,[o("div",ue,[c(u(z)),a[43]||(a[43]=o("span",null,"播放控制",-1))]),o("div",de,[c(l,{type:"primary",block:"",loading:zl.value,onClick:Nl},{default:v(()=>[c(u(x)),a[44]||(a[44]=g(" 全部播放 ",-1))]),_:1},8,["loading"]),c(l,{block:"",loading:xl.value,onClick:Wl},{default:v(()=>[c(u(P)),a[45]||(a[45]=g(" 全部暂停 ",-1))]),_:1},8,["loading"]),c(l,{block:"",loading:Pl.value,onClick:es},{default:v(()=>[c(u(U)),a[46]||(a[46]=g(" 刷新画面 ",-1))]),_:1},8,["loading"])])]),o("div",ve,[o("div",re,[c(u(x)),a[47]||(a[47]=o("span",null,"播放设置",-1))]),o("div",pe,[o("div",me,[a[48]||(a[48]=o("span",null,"自动轮播",-1)),c(t,{checked:Ul.value.autoRotate,"onUpdate:checked":a[3]||(a[3]=e=>Ul.value.autoRotate=e)},null,8,["checked"])]),o("div",fe,[a[49]||(a[49]=o("span",null,"循环播放",-1)),c(t,{checked:Al.value.loop,"onUpdate:checked":a[4]||(a[4]=e=>Al.value.loop=e)},null,8,["checked"])]),o("div",ye,[a[50]||(a[50]=o("span",null,"静音播放",-1)),c(t,{checked:Al.value.mute,"onUpdate:checked":a[5]||(a[5]=e=>Al.value.mute=e)},null,8,["checked"])])])])])]),_:1}),c(s,{key:"camera",tab:"摄像头管理"},{default:v(()=>[o("div",ge,[o("div",he,[o("div",ke,[c(u(b)),a[51]||(a[51]=o("span",null,"已配置摄像头",-1))]),o("div",_e,[(i(!0),n(p,null,m(Sl.value.filter(e=>e.isActive),e=>(i(),n("div",{key:e.id,class:r(["camera-item-mini",{selected:bl.value===Sl.value.indexOf(e)}]),onClick:a=>Ml(Sl.value.indexOf(e))},[o("div",we,[c(yl,{style:h({backgroundColor:is(e.status)}),size:"small"},{default:v(()=>[c(u(b))]),_:2},1032,["style"])]),o("div",Ce,[o("div",ze,d(e.name),1),o("div",xe,[c(wl,{color:is(e.status),size:"small"},{default:v(()=>[g(d(ns(e.status)),1)]),_:2},1032,["color"])])]),o("div",Pe,[c(l,{size:"small",type:"text",onClick:k(a=>Xl(Sl.value.indexOf(e)),["stop"])},{default:v(()=>[e.isPlaying?(i(),_(u(P),{key:1})):(i(),_(u(x),{key:0}))]),_:2},1032,["onClick"])])],10,be))),128)),0===Sl.value.filter(e=>e.isActive).length?(i(),n("div",Ue,[c(u(b),{class:"no-cameras-icon"}),a[52]||(a[52]=o("p",null,"暂无已配置摄像头",-1))])):f("",!0)])]),o("div",Ae,[o("div",Re,[c(u(A)),a[53]||(a[53]=o("span",null,"快速操作",-1))]),o("div",Te,[c(l,{block:"",onClick:a[6]||(a[6]=e=>ml.value=!0)},{default:v(()=>[c(u(D)),a[54]||(a[54]=g(" 添加摄像头 ",-1))]),_:1}),c(l,{block:"",onClick:as},{default:v(()=>[c(u(R)),a[55]||(a[55]=g(" 导出配置 ",-1))]),_:1})])])])]),_:1}),c(s,{key:"settings",tab:"系统设置"},{default:v(()=>[o("div",Se,[o("div",Ie,[o("div",je,[c(u($)),a[56]||(a[56]=o("span",null,"显示设置",-1))]),o("div",Le,[o("div",De,[a[60]||(a[60]=o("span",null,"主题模式",-1)),c(Il,{value:Rl.value.theme,"onUpdate:value":a[7]||(a[7]=e=>Rl.value.theme=e),size:"small",style:{width:"100px"}},{default:v(()=>[c(Cl,{value:"light"},{default:v(()=>[...a[57]||(a[57]=[g("浅色",-1)])]),_:1}),c(Cl,{value:"dark"},{default:v(()=>[...a[58]||(a[58]=[g("深色",-1)])]),_:1}),c(Cl,{value:"auto"},{default:v(()=>[...a[59]||(a[59]=[g("自动",-1)])]),_:1})]),_:1},8,["value"])]),o("div",$e,[a[63]||(a[63]=o("span",null,"语言设置",-1)),c(Il,{value:Rl.value.language,"onUpdate:value":a[8]||(a[8]=e=>Rl.value.language=e),size:"small",style:{width:"100px"}},{default:v(()=>[c(Cl,{value:"zh"},{default:v(()=>[...a[61]||(a[61]=[g("中文",-1)])]),_:1}),c(Cl,{value:"en"},{default:v(()=>[...a[62]||(a[62]=[g("English",-1)])]),_:1})]),_:1},8,["value"])]),o("div",Oe,[a[64]||(a[64]=o("span",null,"自动保存",-1)),c(t,{checked:Rl.value.autoSave,"onUpdate:checked":a[9]||(a[9]=e=>Rl.value.autoSave=e)},null,8,["checked"])])])]),o("div",Ee,[o("div",Ke,[c(u(T)),a[65]||(a[65]=o("span",null,"性能设置",-1))]),o("div",Qe,[o("div",Be,[a[69]||(a[69]=o("span",null,"视频质量",-1)),c(Il,{value:Rl.value.videoQuality,"onUpdate:value":a[10]||(a[10]=e=>Rl.value.videoQuality=e),size:"small",style:{width:"100px"}},{default:v(()=>[c(Cl,{value:"high"},{default:v(()=>[...a[66]||(a[66]=[g("高清",-1)])]),_:1}),c(Cl,{value:"medium"},{default:v(()=>[...a[67]||(a[67]=[g("标清",-1)])]),_:1}),c(Cl,{value:"low"},{default:v(()=>[...a[68]||(a[68]=[g("流畅",-1)])]),_:1})]),_:1},8,["value"])]),o("div",Fe,[a[73]||(a[73]=o("span",null,"帧率限制",-1)),c(Il,{value:Rl.value.frameRate,"onUpdate:value":a[11]||(a[11]=e=>Rl.value.frameRate=e),size:"small",style:{width:"100px"}},{default:v(()=>[c(Cl,{value:"30"},{default:v(()=>[...a[70]||(a[70]=[g("30fps",-1)])]),_:1}),c(Cl,{value:"25"},{default:v(()=>[...a[71]||(a[71]=[g("25fps",-1)])]),_:1}),c(Cl,{value:"15"},{default:v(()=>[...a[72]||(a[72]=[g("15fps",-1)])]),_:1})]),_:1},8,["value"])])])])])]),_:1})]),_:1},8,["activeKey"])]),o("div",Ge,[o("div",Ve,[o("div",qe,[o("h3",null,d(ts()),1),o("span",Je,d(ql.value)+"个摄像头",1)]),o("div",Ne,[c(l,{size:"small",onClick:es,loading:Pl.value},{default:v(()=>[c(u(U)),a[74]||(a[74]=g(" 刷新 ",-1))]),_:1},8,["loading"]),c(l,{size:"small",onClick:ls},{default:v(()=>[c(u(S)),a[75]||(a[75]=g(" 全屏 ",-1))]),_:1})])]),o("div",{class:r(["matrix-grid",`layout-${V.value}`])},[(i(!0),n(p,null,m(Sl.value,(e,s)=>(i(),n("div",{key:`cell-${s}`,class:r(["matrix-cell",ss(e,s)]),onClick:e=>Ml(s),onDblclick:e=>Yl(s),onContextmenu:e=>((e,a)=>{bl.value=a,Kl.value=!0,e.preventDefault()})(e,s)},[o("div",Xe,[o("div",Ze,d(e.name||"未配置"),1),o("div",He,[c(wl,{color:is(e.status),size:"small"},{default:v(()=>[g(d(ns(e.status)),1)]),_:2},1032,["color"])])]),o("div",Me,[e.isActive&&e.isPlaying?(i(),n("div",Ye,["image"===e.mediaType&&e.mediaPath?(i(),n("div",ea,[o("img",{src:e.mediaPath,alt:`${e.name}摄像头`,class:"camera-image",onError:ds,onLoad:vs},null,40,aa),o("div",la,[o("div",sa,d(ms()),1),o("div",ta,d(e.resolution),1)])])):"video"===e.mediaType&&e.mediaPath?(i(),n("div",ia,[o("video",{src:e.mediaPath,autoplay:"",muted:"",loop:"",class:"camera-video",onError:rs,onLoadeddata:ps},null,40,na),o("div",oa,[o("div",ca,d(ms()),1),o("div",ua,d(e.resolution),1)])])):(i(),n("div",da,[c(u(b),{class:"video-icon"}),o("div",va,d(e.name),1),o("div",ra,d(e.location),1)])),Ul.value.showStatusIndicators?(i(),n("div",pa,[e.isRecording?(i(),n("div",ma,[c(fs,{status:"processing",text:"录制"})])):f("",!0),e.hasAlarm?(i(),n("div",fa,[c(fs,{status:"error",text:"报警"})])):f("",!0)])):f("",!0)])):e.isActive?(i(),n("div",ya,[c(u(P),{class:"pause-icon"}),a[76]||(a[76]=o("div",{class:"pause-text"},"已暂停",-1))])):(i(),n("div",ga,[c(u(D),{class:"add-icon"}),a[78]||(a[78]=o("div",{class:"add-text"},"添加摄像头",-1)),c(l,{size:"small",type:"primary",onClick:e=>El(s)},{default:v(()=>[...a[77]||(a[77]=[g(" 选择 ",-1)])]),_:2},1032,["onClick"])]))]),o("div",ha,[o("div",ka,[o("span",_a,d(e.ip||"未配置"),1)]),o("div",ba,[c(l,{size:"small",type:"text",onClick:k(e=>Xl(s),["stop"])},{default:v(()=>[e.isPlaying?(i(),_(u(P),{key:1})):(i(),_(u(x),{key:0}))]),_:2},1032,["onClick"]),c(l,{size:"small",type:"text",onClick:k(e=>Zl(s),["stop"])},{default:v(()=>[c(u(z))]),_:2},1032,["onClick"])])])],42,We))),128))],2)])]),c(ys,{open:pl.value,"onUpdate:open":a[13]||(a[13]=e=>pl.value=e),title:"选择分屏布局",footer:null,width:"800px",class:"layout-modal"},{default:v(()=>[o("div",wa,[o("div",Ca,[(i(!0),n(p,null,m(Tl.value,e=>(i(),n("div",{key:e.value,class:r(["layout-item-large",{active:V.value===e.value}]),onClick:a=>Jl(e.value)},[o("div",{class:r(["layout-preview-large",`preview-${e.value}`])},[(i(!0),n(p,null,m(e.cells,e=>(i(),n("div",{key:e,class:"preview-cell-large"}))),128))],2),o("div",xa,[o("h4",Pa,d(e.name),1),o("p",Ua,d(e.description),1),o("div",Aa,[o("span",Ra,d(e.cells)+"个画面",1),o("span",Ta,d(e.recommended?"推荐":"标准"),1)])])],10,za))),128))])])]),_:1},8,["open"]),c(ys,{open:ml.value,"onUpdate:open":a[17]||(a[17]=e=>ml.value=e),title:"摄像头管理",footer:null,width:"900px",class:"camera-modal"},{default:v(()=>[o("div",Sa,[o("div",Ia,[c(gs,{value:hl.value,"onUpdate:value":a[14]||(a[14]=e=>hl.value=e),placeholder:"搜索摄像头名称或IP地址...","allow-clear":"",style:{width:"300px"}},null,8,["value"]),c(Il,{value:kl.value,"onUpdate:value":a[15]||(a[15]=e=>kl.value=e),placeholder:"状态筛选",style:{width:"120px"},"allow-clear":""},{default:v(()=>[c(Cl,{value:"online"},{default:v(()=>[...a[79]||(a[79]=[g("在线",-1)])]),_:1}),c(Cl,{value:"offline"},{default:v(()=>[...a[80]||(a[80]=[g("离线",-1)])]),_:1})]),_:1},8,["value"]),c(Il,{value:_l.value,"onUpdate:value":a[16]||(a[16]=e=>_l.value=e),placeholder:"位置筛选",style:{width:"150px"},"allow-clear":""},{default:v(()=>[c(Cl,{value:"码头前沿"},{default:v(()=>[...a[81]||(a[81]=[g("码头前沿",-1)])]),_:1}),c(Cl,{value:"主航道"},{default:v(()=>[...a[82]||(a[82]=[g("主航道",-1)])]),_:1}),c(Cl,{value:"锚地区域"},{default:v(()=>[...a[83]||(a[83]=[g("锚地区域",-1)])]),_:1})]),_:1},8,["value"])]),o("div",ja,[(i(!0),n(p,null,m(Gl.value,e=>(i(),n("div",{key:e.id,class:r(["camera-item",{online:"online"===e.status,offline:"offline"===e.status,selected:Hl(e.id)}]),onClick:a=>(e=>{if(!e)return;const a=Sl.value.find(e=>!e.isActive);a&&(a.name=e.name,a.isActive=!0,a.isPlaying=!0,a.status="online"===e.status?"在线":"离线",a.statusClass="online"===e.status?"online":"offline",a.location=e.location,a.ip=e.ip,a.lastUpdate=(new Date).toLocaleString(),a.resolution=e.resolution,a.fps=e.fps,a.isRecording=!1,a.hasAlarm=!1,a.mediaType=e.mediaType,a.mediaPath=e.mediaPath),ml.value=!1})(e)},[o("div",Da,[c(yl,{style:h({backgroundColor:is(e.status)})},{default:v(()=>[c(u(b))]),_:2},1032,["style"])]),o("div",$a,[o("div",Oa,d(e.name),1),o("div",Ea,d(e.location),1),o("div",Ka,[o("span",Qa,d(e.resolution),1),o("span",Ba,d(e.fps)+"fps",1),o("span",Fa,d(e.ip),1)])]),o("div",Ga,[Hl(e.id)?(i(),_(wl,{key:1,color:"success"},{default:v(()=>[...a[85]||(a[85]=[g("已选择",-1)])]),_:1})):(i(),_(l,{key:0,size:"small",type:"primary"},{default:v(()=>[...a[84]||(a[84]=[g(" 选择 ",-1)])]),_:1}))])],10,La))),128))])])]),_:1},8,["open"]),c(ys,{open:jl.value,"onUpdate:open":a[19]||(a[19]=e=>jl.value=e),title:"选择摄像头",width:"800px","ok-text":"关闭",footer:null},{default:v(()=>[c(gs,{value:Dl.value,"onUpdate:value":a[18]||(a[18]=e=>Dl.value=e),placeholder:"搜索名称/IP/位置",style:{"margin-bottom":"12px"}},null,8,["value"]),c(hs,{columns:$l,"data-source":Ol.value,"row-key":"id",size:"small",pagination:{pageSize:8}},{bodyCell:v(({column:e,record:s})=>["status"===e.key?(i(),_(wl,{key:0,color:"online"===s.status?"success":"error"},{default:v(()=>[g(d("online"===s.status?"在线":"离线"),1)]),_:2},1032,["color"])):"action"===e.key?(i(),_(l,{key:1,type:"link",onClick:e=>(e=>{if("online"!==e.status)return;const a=Ll.value;if(a<0||a>=Sl.value.length)return;const l=Sl.value[a];l.name=e.name,l.isActive=!0,l.isPlaying=!0,l.status="online"===e.status?"在线":"离线",l.statusClass="online"===e.status?"online":"offline",l.location=e.location,l.ip=e.ip,l.lastUpdate=(new Date).toLocaleString(),l.resolution=e.resolution,l.fps=e.fps,l.isRecording=!1,l.hasAlarm=!1,l.mediaType=e.mediaType,l.mediaPath=e.mediaPath,jl.value=!1})(s),disabled:"online"!==s.status},{default:v(()=>[...a[86]||(a[86]=[g("选择",-1)])]),_:2},1032,["onClick","disabled"])):f("",!0)]),_:1},8,["data-source"])]),_:1},8,["open"]),c(ys,{open:fl.value,"onUpdate:open":a[32]||(a[32]=e=>fl.value=e),title:"云台控制",footer:null,width:"500px",class:"ptz-modal"},{default:v(()=>{var e,s;return[o("div",Va,[o("div",qa,[o("h4",null,d(null==(e=os())?void 0:e.name),1),o("p",null,d(null==(s=os())?void 0:s.location),1)]),o("div",Ja,[o("div",Na,[a[87]||(a[87]=o("span",{class:"control-label"},"云台速度",-1)),c(ks,{value:gl.value,"onUpdate:value":a[20]||(a[20]=e=>gl.value=e),min:1,max:7,marks:{1:"1",4:"4",7:"7"},style:{width:"220px","margin-left":"12px"}},null,8,["value"]),c(wl,{color:"blue",style:{"margin-left":"8px"}},{default:v(()=>[g(d(gl.value),1)]),_:1})]),o("div",Wa,[o("div",Xa,[c(l,{shape:"circle",size:"large",onClick:a[21]||(a[21]=e=>cs("up")),class:"ptz-btn up"},{default:v(()=>[c(u(O))]),_:1})]),o("div",Za,[c(l,{shape:"circle",size:"large",onClick:a[22]||(a[22]=e=>cs("left")),class:"ptz-btn left"},{default:v(()=>[c(u(E))]),_:1}),c(l,{shape:"circle",size:"large",onClick:a[23]||(a[23]=e=>cs("home")),class:"ptz-btn home"},{default:v(()=>[c(u(I))]),_:1}),c(l,{shape:"circle",size:"large",onClick:a[24]||(a[24]=e=>cs("right")),class:"ptz-btn right"},{default:v(()=>[c(u(K))]),_:1})]),o("div",Ha,[c(l,{shape:"circle",size:"large",onClick:a[25]||(a[25]=e=>cs("down")),class:"ptz-btn down"},{default:v(()=>[c(u(Q))]),_:1})])]),o("div",Ma,[a[90]||(a[90]=o("span",{class:"control-label"},"变焦控制",-1)),o("div",Ya,[c(l,{onClick:a[26]||(a[26]=e=>cs("zoomIn")),class:"zoom-btn"},{default:v(()=>[c(u(B)),a[88]||(a[88]=g(" 放大 ",-1))]),_:1}),c(l,{onClick:a[27]||(a[27]=e=>cs("zoomOut")),class:"zoom-btn"},{default:v(()=>[c(u(F)),a[89]||(a[89]=g(" 缩小 ",-1))]),_:1})])]),o("div",el,[a[95]||(a[95]=o("span",{class:"control-label"},"预设位置",-1)),o("div",al,[c(l,{size:"小",onClick:a[28]||(a[28]=e=>cs("preset1")),class:"preset-btn"},{default:v(()=>[...a[91]||(a[91]=[g(" 位置1 ",-1)])]),_:1}),c(l,{size:"small",onClick:a[29]||(a[29]=e=>cs("preset2")),class:"preset-btn"},{default:v(()=>[...a[92]||(a[92]=[g(" 位置2 ",-1)])]),_:1}),c(l,{size:"small",onClick:a[30]||(a[30]=e=>cs("preset3")),class:"preset-btn"},{default:v(()=>[...a[93]||(a[93]=[g(" 位置3 ",-1)])]),_:1}),c(l,{size:"small",onClick:a[31]||(a[31]=e=>cs("preset4")),class:"preset-btn"},{default:v(()=>[...a[94]||(a[94]=[g(" 位置4 ",-1)])]),_:1})])])])])]}),_:1},8,["open"]),c(ws,{open:Kl.value,"onUpdate:open":a[33]||(a[33]=e=>Kl.value=e),trigger:["contextmenu"],placement:"bottomRight"},{overlay:v(()=>[c(bs,{onClick:us},{default:v(()=>[Sl.value.some(e=>e.isActive&&!e.isPlaying)?(i(),_(_s,{key:"play"},{default:v(()=>[c(u(x)),a[96]||(a[96]=g(" 播放 ",-1))]),_:1})):f("",!0),Sl.value.some(e=>e.isActive&&e.isPlaying)?(i(),_(_s,{key:"pause"},{default:v(()=>[c(u(P)),a[97]||(a[97]=g(" 暂停 ",-1))]),_:1})):f("",!0),c(_s,{key:"fullscreen"},{default:v(()=>[c(u(S)),a[98]||(a[98]=g(" 全屏 ",-1))]),_:1}),c(_s,{key:"ptz"},{default:v(()=>[c(u(z)),a[99]||(a[99]=g(" 云台控制 ",-1))]),_:1}),c(_s,{key:"snapshot"},{default:v(()=>[c(u(j)),a[100]||(a[100]=g(" 截图 ",-1))]),_:1}),Sl.value.some(e=>e.isActive&&!e.isRecording)?(i(),_(_s,{key:"record"},{default:v(()=>[c(u(b)),a[101]||(a[101]=g(" 开始录制 ",-1))]),_:1})):f("",!0),Sl.value.some(e=>e.isActive&&e.isRecording)?(i(),_(_s,{key:"stopRecord"},{default:v(()=>[c(u(L)),a[102]||(a[102]=g(" 停止录制 ",-1))]),_:1})):f("",!0),Sl.value.some(e=>e.isActive)?(i(),_(_s,{key:"remove"},{default:v(()=>[c(u(G)),a[103]||(a[103]=g(" 移除 ",-1))]),_:1})):f("",!0)]),_:1})]),default:v(()=>[a[104]||(a[104]=o("div",{class:"context-menu-trigger"},null,-1))]),_:1},8,["open"]),Ql.value?(i(),n("div",ll,[a[110]||(a[110]=o("h4",null,"调试信息",-1)),o("div",sl,[a[105]||(a[105]=o("span",{class:"label"},"当前布局:",-1)),o("span",tl,d(V.value),1)]),o("div",il,[a[106]||(a[106]=o("span",{class:"label"},"激活摄像头:",-1)),o("span",nl,d(ql.value),1)]),o("div",ol,[a[107]||(a[107]=o("span",{class:"label"},"播放状态:",-1)),o("span",cl,d(zl.value?"播放中":"已暂停"),1)]),o("div",ul,[a[108]||(a[108]=o("span",{class:"label"},"录制状态:",-1)),o("span",dl,d(Vl.value)+"个录制中",1)]),o("div",vl,[a[109]||(a[109]=o("span",{class:"label"},"媒体文件:",-1)),o("span",rl,d(Sl.value.map(e=>`${e.name} (${e.mediaType}): ${e.mediaPath}`).join(", ")),1)])])):f("",!0)])}}}),[["__scopeId","data-v-6ce4eab2"]]);export{pl as default};
