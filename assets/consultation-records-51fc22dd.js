import{i as t}from"./index-b344bc7d.js";import{d as e,r as a,f as l,o as i,n,V as o,W as r,a0 as u,k as s,$ as d,X as c,G as p,u as m,a3 as f,F as v,a1 as y,_ as g,a7 as _}from"./vendor-f41c3cc7.js";import{S as h,P as x,e as b,b as w,g as C,m as k}from"./antd-fa5730cf.js";import{E as S}from"./icons-15893848.js";import{_ as T}from"./index-6bb65380.js";const R={class:"consultation-records"},I={class:"action-buttons",style:{"margin-bottom":"16px"}},z={class:"chart-container"},O={class:"chart-container"},j={class:"chart-container"},A={class:"chart-container"},U={key:0},P=T(e({__name:"consultation-records",setup(e){const T=a({totalConsultations:156,monthlyConsultations:23,totalParticipants:89,averageDuration:45,todayConsultations:5,weeklyConsultations:18,emergencyConsultations:12,completionRate:96.8}),P=a({topic:"",type:"",timeRange:[],department:"",status:""}),W=l([]),M=l([{id:1,topic:"船舶碰撞事故应急响应会商",type:"emergency",startTime:"2025-08-20 09:00:00",endTime:"2025-08-20 10:30:00",duration:90,participantCount:12,status:"completed",priority:"high",department:"operations",participants:["陈志强","刘建国","王海峰","赵明华","钱伟民","孙志刚"],content:"针对今日发生的船舶碰撞事故进行应急响应方案讨论和部署。",conclusion:"制定了详细的应急处理流程，明确了各部门职责分工。",location:"调度中心会议室",recorder:"周建军"},{id:2,topic:"港口安全运营月度分析会商",type:"regular",startTime:"2025-08-20 14:00:00",endTime:"2025-08-20 15:30:00",duration:90,participantCount:8,status:"completed",priority:"medium",department:"management",participants:["陈志强","刘建国","钱伟民","周建军"],content:"分析上月港口安全运营数据，讨论改进措施和本月工作计划。",conclusion:"确定了三个重点改进方向，制定了具体的实施计划。",location:"安全监督部会议室",recorder:"吴建华"},{id:3,topic:"智能监控系统升级评审会商",type:"review",startTime:"2025-08-21 10:00:00",endTime:"2025-08-21 11:00:00",duration:60,participantCount:6,status:"scheduled",priority:"medium",department:"maintenance",participants:["王海峰","赵明华","孙志刚","吴建华"],content:"评审智能监控系统升级方案，确保技术可行性和安全性。",conclusion:"待会商",location:"技术保障部会议室",recorder:"林倩"},{id:4,topic:"恶劣天气应急预案协调会商",type:"coordination",startTime:"2025-08-19 16:00:00",endTime:"2025-08-19 17:30:00",duration:90,participantCount:10,status:"completed",priority:"high",department:"safety",participants:["刘建国","赵明华","钱伟民","孙志刚","周建军"],content:"协调各部门制定恶劣天气应急预案，确保港口运营安全。",conclusion:"建立了跨部门应急响应机制，明确了预警等级和响应流程。",location:"安全监督部会议室",recorder:"高鹏飞"},{id:5,topic:"船舶调度优化方案讨论会商",type:"regular",startTime:"2025-08-18 09:00:00",endTime:"2025-08-18 11:00:00",duration:120,participantCount:7,status:"completed",priority:"medium",department:"operations",participants:["陈志强","王海峰","钱伟民","周建军","吴建华"],content:"讨论船舶调度优化方案，提高港口吞吐效率和安全性。",conclusion:"制定了新的调度算法，预计可提升效率15%。",location:"调度中心会议室",recorder:"林倩"},{id:6,topic:"设备故障分析技术会商",type:"review",startTime:"2025-08-17 14:00:00",endTime:"2025-08-17 15:00:00",duration:60,participantCount:5,status:"completed",priority:"medium",department:"maintenance",participants:["王海峰","赵明华","孙志刚","吴建华"],content:"分析近期设备故障原因，制定预防性维护措施。",conclusion:"识别了三个主要故障模式，制定了相应的预防措施。",location:"技术保障部会议室",recorder:"何志远"},{id:7,topic:"人员培训计划制定会商",type:"regular",startTime:"2025-08-16 10:00:00",endTime:"2025-08-16 11:30:00",duration:90,participantCount:6,status:"completed",priority:"low",department:"management",participants:["刘建国","钱伟民","周建军","林倩"],content:"制定年度人员培训计划，提升员工技能和安全意识。",conclusion:"制定了涵盖技术、安全、管理三个方面的培训计划。",location:"人力资源部会议室",recorder:"高鹏飞"},{id:8,topic:"环保措施实施效果评估会商",type:"review",startTime:"2025-08-15 15:00:00",endTime:"2025-08-15 16:30:00",duration:90,participantCount:8,status:"completed",priority:"medium",department:"safety",participants:["赵明华","钱伟民","孙志刚","周建军","吴建华"],content:"评估环保措施实施效果，讨论下一步改进方向。",conclusion:"环保措施效果显著，污染物排放减少30%。",location:"技术保障部会议室",recorder:"何志远"}]),$=[{title:"会商主题",dataIndex:"topic",key:"topic",width:250},{title:"类型",dataIndex:"type",key:"type",width:100},{title:"开始时间",dataIndex:"startTime",key:"startTime",width:150},{title:"时长(分钟)",dataIndex:"duration",key:"duration",width:100},{title:"参与人数",dataIndex:"participantCount",key:"participantCount",width:100},{title:"负责部门",dataIndex:"department",key:"department",width:120},{title:"会商地点",dataIndex:"location",key:"location",width:150},{title:"记录人",dataIndex:"recorder",key:"recorder",width:100},{title:"状态",key:"status",width:100,slots:{customRender:"status"}},{title:"优先级",key:"priority",width:100,slots:{customRender:"priority"}},{title:"操作",key:"action",width:200,slots:{customRender:"action"}}],L=l(!1),D=l(null),J=l(!0),X=l(null),B=l(null),E=l(null),F=l(null),G=t=>({completed:"green",ongoing:"blue",scheduled:"orange",cancelled:"red"}[t]||"default"),K=t=>({completed:"已完成",ongoing:"进行中",scheduled:"已安排",cancelled:"已取消"}[t]||t),Q=t=>({high:"red",medium:"orange",low:"green"}[t]||"default"),V=t=>({high:"高",medium:"中",low:"低"}[t]||t),q=()=>{k.info("执行搜索操作")},H=()=>{Object.assign(P,{topic:"",type:"",timeRange:[],department:"",status:""}),k.success("搜索条件已重置")},N=t=>{W.value=t},Y=()=>{k.info("新建会商记录")},Z=()=>{k.success("开始导出会商记录")},tt=()=>{0!==W.value.length?k.success(`删除选中的 ${W.value.length} 条记录`):k.warning("请选择要删除的记录")},et=()=>{L.value=!1,D.value=null};return i(()=>{setInterval(()=>{T.monthlyConsultations=Math.floor(10*Math.random())+20,T.totalParticipants=Math.floor(20*Math.random())+80},1e4),n(()=>{(()=>{if(!X.value)return;t(X.value).setOption({title:{text:"会商类型分布",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",top:"middle"},series:[{name:"会商类型",type:"pie",radius:"50%",center:["60%","50%"],data:[{value:35,name:"安全会商",itemStyle:{color:"#1890ff"}},{value:25,name:"技术会商",itemStyle:{color:"#52c41a"}},{value:20,name:"应急会商",itemStyle:{color:"#faad14"}},{value:15,name:"协调会商",itemStyle:{color:"#ff4d4f"}},{value:5,name:"其他",itemStyle:{color:"#722ed1"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})})(),(()=>{if(!B.value)return;t(B.value).setOption({title:{text:"会商数量趋势",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis"},legend:{data:["会商数量"],bottom:10},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:["1月","2月","3月","4月","5月","6月"]},yAxis:{type:"value"},series:[{name:"会商数量",type:"line",smooth:!0,data:[12,15,18,22,25,28],itemStyle:{color:"#52c41a"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(82, 196, 26, 0.3)"},{offset:1,color:"rgba(82, 196, 26, 0.1)"}]}}}]})})(),(()=>{if(!E.value)return;t(E.value).setOption({title:{text:"部门参与度统计",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:["安全部","技术部","运营部","维护部","应急部"]},yAxis:{type:"value"},series:[{name:"参与次数",type:"bar",data:[45,38,32,28,22],itemStyle:{color:"#1890ff"}}]})})(),(()=>{if(!F.value)return;t(F.value).setOption({title:{text:"会商时长分布",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:["0-30分钟","30-60分钟","1-2小时","2-4小时","4小时以上"]},yAxis:{type:"value"},series:[{name:"会商数量",type:"bar",data:[25,35,28,15,7],itemStyle:{color:"#faad14"}}]})})(),J.value=!1})}),(t,e)=>{const a=c("a-statistic"),l=c("a-col"),i=c("a-row"),n=c("a-card"),at=c("a-input"),lt=c("a-form-item"),it=c("a-select-option"),nt=c("a-select"),ot=c("a-range-picker"),rt=c("a-button"),ut=c("a-form"),st=c("a-tag"),dt=c("a-table"),ct=c("a-spin"),pt=c("a-descriptions-item"),mt=c("a-descriptions"),ft=c("a-divider"),vt=c("a-modal");return o(),r("div",R,[e[36]||(e[36]=u("div",{class:"page-header"},[u("h1",null,"会商记录"),u("p",null,"管理所有会商活动的记录，支持搜索、筛选和统计分析")],-1)),s(n,{class:"stats-overview",title:"记录统计概览"},{default:d(()=>[s(i,{gutter:16},{default:d(()=>[s(l,{span:6},{default:d(()=>[s(a,{title:"总会商次数",value:T.totalConsultations},null,8,["value"])]),_:1}),s(l,{span:6},{default:d(()=>[s(a,{title:"本月会商",value:T.monthlyConsultations},null,8,["value"])]),_:1}),s(l,{span:6},{default:d(()=>[s(a,{title:"参与人数",value:T.totalParticipants},null,8,["value"])]),_:1}),s(l,{span:6},{default:d(()=>[s(a,{title:"平均时长",value:T.averageDuration,suffix:"分钟"},null,8,["value"])]),_:1})]),_:1}),s(i,{gutter:16,style:{"margin-top":"16px"}},{default:d(()=>[s(l,{span:6},{default:d(()=>[s(a,{title:"今日会商",value:T.todayConsultations},null,8,["value"])]),_:1}),s(l,{span:6},{default:d(()=>[s(a,{title:"本周会商",value:T.weeklyConsultations},null,8,["value"])]),_:1}),s(l,{span:6},{default:d(()=>[s(a,{title:"紧急会商",value:T.emergencyConsultations},null,8,["value"])]),_:1}),s(l,{span:6},{default:d(()=>[s(a,{title:"完成率",value:T.completionRate,suffix:"%"},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(n,{class:"search-filter",title:"搜索筛选"},{default:d(()=>[s(ut,{layout:"inline",model:P},{default:d(()=>[s(lt,{label:"会商主题"},{default:d(()=>[s(at,{value:P.topic,"onUpdate:value":e[0]||(e[0]=t=>P.topic=t),placeholder:"输入会商主题关键词"},null,8,["value"])]),_:1}),s(lt,{label:"会商类型"},{default:d(()=>[s(nt,{value:P.type,"onUpdate:value":e[1]||(e[1]=t=>P.type=t),placeholder:"选择会商类型",style:{width:"150px"}},{default:d(()=>[s(it,{value:""},{default:d(()=>[...e[6]||(e[6]=[p("全部类型",-1)])]),_:1}),s(it,{value:"emergency"},{default:d(()=>[...e[7]||(e[7]=[p("紧急会商",-1)])]),_:1}),s(it,{value:"regular"},{default:d(()=>[...e[8]||(e[8]=[p("例行会商",-1)])]),_:1}),s(it,{value:"review"},{default:d(()=>[...e[9]||(e[9]=[p("评审会商",-1)])]),_:1}),s(it,{value:"coordination"},{default:d(()=>[...e[10]||(e[10]=[p("协调会商",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),s(lt,{label:"时间范围"},{default:d(()=>[s(ot,{value:P.timeRange,"onUpdate:value":e[2]||(e[2]=t=>P.timeRange=t)},null,8,["value"])]),_:1}),s(lt,{label:"参与部门"},{default:d(()=>[s(nt,{value:P.department,"onUpdate:value":e[3]||(e[3]=t=>P.department=t),placeholder:"选择参与部门",style:{width:"150px"}},{default:d(()=>[s(it,{value:""},{default:d(()=>[...e[11]||(e[11]=[p("全部部门",-1)])]),_:1}),s(it,{value:"operations"},{default:d(()=>[...e[12]||(e[12]=[p("运营部",-1)])]),_:1}),s(it,{value:"maintenance"},{default:d(()=>[...e[13]||(e[13]=[p("维护部",-1)])]),_:1}),s(it,{value:"safety"},{default:d(()=>[...e[14]||(e[14]=[p("安全部",-1)])]),_:1}),s(it,{value:"management"},{default:d(()=>[...e[15]||(e[15]=[p("管理部",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),s(lt,{label:"会商状态"},{default:d(()=>[s(nt,{value:P.status,"onUpdate:value":e[4]||(e[4]=t=>P.status=t),placeholder:"选择状态",style:{width:"120px"}},{default:d(()=>[s(it,{value:""},{default:d(()=>[...e[16]||(e[16]=[p("全部状态",-1)])]),_:1}),s(it,{value:"completed"},{default:d(()=>[...e[17]||(e[17]=[p("已完成",-1)])]),_:1}),s(it,{value:"ongoing"},{default:d(()=>[...e[18]||(e[18]=[p("进行中",-1)])]),_:1}),s(it,{value:"scheduled"},{default:d(()=>[...e[19]||(e[19]=[p("已安排",-1)])]),_:1}),s(it,{value:"cancelled"},{default:d(()=>[...e[20]||(e[20]=[p("已取消",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),s(lt,null,{default:d(()=>[s(rt,{type:"primary",onClick:q},{icon:d(()=>[s(m(h))]),default:d(()=>[e[21]||(e[21]=p(" 搜索 ",-1))]),_:1}),s(rt,{style:{"margin-left":"8px"},onClick:H},{default:d(()=>[...e[22]||(e[22]=[p(" 重置 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s(n,{class:"records-list",title:"会商记录列表"},{default:d(()=>[u("div",I,[s(rt,{type:"primary",onClick:Y},{icon:d(()=>[s(m(x))]),default:d(()=>[e[23]||(e[23]=p(" 新建会商 ",-1))]),_:1}),s(rt,{onClick:Z},{icon:d(()=>[s(m(S))]),default:d(()=>[e[24]||(e[24]=p(" 导出记录 ",-1))]),_:1}),s(rt,{onClick:tt},{icon:d(()=>[s(m(b))]),default:d(()=>[e[25]||(e[25]=p(" 批量删除 ",-1))]),_:1})]),s(dt,{columns:$,"data-source":M.value,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0},"row-selection":{selectedRowKeys:W.value,onChange:N}},{status:d(({record:t})=>[s(st,{color:G(t.status)},{default:d(()=>[p(f(K(t.status)),1)]),_:2},1032,["color"])]),priority:d(({record:t})=>[s(st,{color:Q(t.priority)},{default:d(()=>[p(f(V(t.priority)),1)]),_:2},1032,["color"])]),action:d(({record:t})=>[s(rt,{type:"link",size:"small",onClick:e=>(t=>{D.value=t,L.value=!0})(t)},{icon:d(()=>[s(m(w))]),default:d(()=>[e[26]||(e[26]=p(" 查看 ",-1))]),_:2},1032,["onClick"]),s(rt,{type:"link",size:"small",onClick:e=>(t=>{k.info(`编辑会商记录: ${t.topic}`)})(t)},{icon:d(()=>[s(m(C))]),default:d(()=>[e[27]||(e[27]=p(" 编辑 ",-1))]),_:2},1032,["onClick"]),s(rt,{type:"link",size:"small",onClick:e=>(t=>{k.success(`删除会商记录: ${t.topic}`)})(t)},{icon:d(()=>[s(m(b))]),default:d(()=>[e[28]||(e[28]=p(" 删除 ",-1))]),_:2},1032,["onClick"])]),_:1},8,["data-source","row-selection"])]),_:1}),s(n,{class:"statistics-analysis",title:"统计分析"},{default:d(()=>[s(i,{gutter:16},{default:d(()=>[s(l,{span:12},{default:d(()=>[u("div",z,[e[29]||(e[29]=u("h4",null,"会商类型分布",-1)),s(ct,{spinning:J.value,tip:"图表加载中..."},{default:d(()=>[u("div",{ref_key:"consultationTypeChartRef",ref:X,class:"chart-wrapper"},null,512)]),_:1},8,["spinning"])])]),_:1}),s(l,{span:12},{default:d(()=>[u("div",O,[e[30]||(e[30]=u("h4",null,"会商趋势分析",-1)),s(ct,{spinning:J.value,tip:"图表加载中..."},{default:d(()=>[u("div",{ref_key:"consultationTrendChartRef",ref:B,class:"chart-wrapper"},null,512)]),_:1},8,["spinning"])])]),_:1})]),_:1}),s(i,{gutter:16,style:{"margin-top":"16px"}},{default:d(()=>[s(l,{span:12},{default:d(()=>[u("div",j,[e[31]||(e[31]=u("h4",null,"部门参与统计",-1)),s(ct,{spinning:J.value,tip:"图表加载中..."},{default:d(()=>[u("div",{ref_key:"departmentChartRef",ref:E,class:"chart-wrapper"},null,512)]),_:1},8,["spinning"])])]),_:1}),s(l,{span:12},{default:d(()=>[u("div",A,[e[32]||(e[32]=u("h4",null,"会商时长分布",-1)),s(ct,{spinning:J.value,tip:"图表加载中..."},{default:d(()=>[u("div",{ref_key:"durationChartRef",ref:F,class:"chart-wrapper"},null,512)]),_:1},8,["spinning"])])]),_:1})]),_:1})]),_:1}),s(vt,{visible:L.value,"onUpdate:visible":e[5]||(e[5]=t=>L.value=t),title:"会商记录详情",width:"800px",onOk:et},{default:d(()=>[D.value?(o(),r("div",U,[s(mt,{column:2,bordered:""},{default:d(()=>[s(pt,{label:"会商主题"},{default:d(()=>[p(f(D.value.topic),1)]),_:1}),s(pt,{label:"会商类型"},{default:d(()=>{return[p(f((t=D.value.type,{emergency:"紧急会商",regular:"例行会商",review:"评审会商",coordination:"协调会商"}[t]||t)),1)];var t}),_:1}),s(pt,{label:"开始时间"},{default:d(()=>[p(f(D.value.startTime),1)]),_:1}),s(pt,{label:"结束时间"},{default:d(()=>[p(f(D.value.endTime),1)]),_:1}),s(pt,{label:"会商时长"},{default:d(()=>[p(f(D.value.duration)+"分钟",1)]),_:1}),s(pt,{label:"参与人数"},{default:d(()=>[p(f(D.value.participantCount)+"人",1)]),_:1}),s(pt,{label:"负责部门"},{default:d(()=>[p(f(D.value.department),1)]),_:1}),s(pt,{label:"会商地点"},{default:d(()=>[p(f(D.value.location),1)]),_:1}),s(pt,{label:"记录人"},{default:d(()=>[p(f(D.value.recorder),1)]),_:1}),s(pt,{label:"会商状态"},{default:d(()=>[s(st,{color:G(D.value.status)},{default:d(()=>[p(f(K(D.value.status)),1)]),_:1},8,["color"])]),_:1}),s(pt,{label:"优先级"},{default:d(()=>[s(st,{color:Q(D.value.priority)},{default:d(()=>[p(f(V(D.value.priority)),1)]),_:1},8,["color"])]),_:1})]),_:1}),s(ft),e[33]||(e[33]=u("h4",null,"会商内容",-1)),u("p",null,f(D.value.content),1),s(ft),e[34]||(e[34]=u("h4",null,"参与人员",-1)),(o(!0),r(v,null,y(D.value.participants,t=>(o(),g(st,{key:t,style:{margin:"4px"}},{default:d(()=>[p(f(t),1)]),_:2},1024))),128)),s(ft),e[35]||(e[35]=u("h4",null,"会商结论",-1)),u("p",null,f(D.value.conclusion),1)])):_("",!0)]),_:1},8,["visible"])])}}}),[["__scopeId","data-v-eed2805f"]]);export{P as default};
