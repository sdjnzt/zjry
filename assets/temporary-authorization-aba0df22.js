import{f as e,m as a,h as t,E as r,P as i,b as s,i as o,j as l,M as n}from"./antd-fa5730cf.js";import{K as p,I as d,R as u,n as c,B as m,J as v}from"./icons-15893848.js";import{d as Y,f as y,r as f,c as _,o as g,V as H,W as h,a0 as D,k as M,$ as k,X as b,u as T,G as x,a3 as z,_ as w,F as C,a1 as R,a7 as I,a8 as q}from"./vendor-f41c3cc7.js";import{_ as A}from"./index-5905e6b1.js";const U={class:"temporary-authorization"},$={class:"authorization-overview"},j={class:"authorization-content"},S={key:0,class:"applicant-info"},E={class:"applicant-name"},O={class:"applicant-org"},B={class:"applicant-contact"},F={key:3,class:"resources-info"},V={class:"resource-count"},J={class:"resource-types"},N={key:4,class:"time-range"},G={class:"start-time"},K={class:"end-time"},P={class:"duration"},Q={class:"emergency-authorization"},W={class:"pending-applications"},X={class:"pending-list"},L={class:"pending-header"},Z={class:"pending-applicant"},ee={class:"pending-priority"},ae={class:"pending-reason"},te={class:"pending-time"},re={class:"pending-actions"},ie={class:"expiring-authorizations"},se={class:"expiring-list"},oe={class:"expiring-info"},le={class:"expiring-applicant"},ne={class:"expiring-resource"},pe={class:"expiring-time"},de={class:"expiring-actions"},ue={class:"authorization-templates"},ce={class:"template-header"},me={class:"template-name"},ve={class:"template-type"},Ye={class:"template-description"},ye={class:"template-info"},fe={class:"template-duration"},_e={class:"template-resources"},ge={key:0,class:"application-detail"},He={class:"requested-resources"},he={class:"approval-history"},De={class:"approval-time"},Me={key:0,class:"approval-comment"},ke=A(Y({__name:"temporary-authorization",setup(Y){const A=y(!1),ke=y(!0),be=y(null),Te=f({status:"",priority:""}),xe=f({visible:!1,title:"创建授权申请",isEdit:!1}),ze=f({visible:!1}),we=f({visible:!1}),Ce=f({applicant:"",organization:"",contactInfo:"",reason:"",priority:"medium",timeRange:[],requestedResources:[],notes:""}),Re=f({target:"",reason:"",duration:"2",resources:["camera"]}),Ie={applicant:[{required:!0,message:"请输入申请人姓名",trigger:"blur"}],organization:[{required:!0,message:"请输入所属机构",trigger:"blur"}],contactInfo:[{required:!0,message:"请输入联系方式",trigger:"blur"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}],timeRange:[{required:!0,message:"请选择授权时间",trigger:"change"}],requestedResources:[{required:!0,message:"请选择申请资源",trigger:"change"}]},qe=f({activeAuthorizations:42,expiringSoon:8,todayApplications:23,emergencyAuthorizations:5}),Ae=f({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}),Ue=y([{id:"auth_001",applicant:"海事局调度员",organization:"上海海事局",contactInfo:"13812345678",reason:"紧急海上救援任务，需要查看港区A和航道区域的实时监控画面",priority:"emergency",status:"pending",applicationTime:e().subtract(30,"minute").format("YYYY-MM-DD HH:mm:ss"),startTime:e().format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(4,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_001",name:"港区A-摄像头01",type:"摄像头",description:"港区A码头监控"},{id:"res_002",name:"航道-传感器01",type:"传感器",description:"航道水深监测"}],approvalHistory:[{id:"approval_001",action:"提交申请",approver:"海事局调度员",time:e().subtract(30,"minute").format("YYYY-MM-DD HH:mm:ss")}]},{id:"auth_002",applicant:"港口管理员",organization:"港口管理局",contactInfo:"13987654321",reason:"例行检查港区设备运行状态",priority:"medium",status:"approved",applicationTime:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(2,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_003",name:"港区B-摄像头02",type:"摄像头",description:"港区B监控设备"}],approvalHistory:[{id:"approval_002",action:"提交申请",approver:"港口管理员",time:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_003",action:"批准申请",approver:"系统管理员",time:e().subtract(1.5,"hour").format("YYYY-MM-DD HH:mm:ss"),comment:"例行检查申请，予以批准"}]},{id:"auth_003",applicant:"第三方检测机构",organization:"海洋环境监测中心",contactInfo:"13611112222",reason:"环境监测数据采集",priority:"low",status:"expired",applicationTime:e().subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(8,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_004",name:"环境监测传感器",type:"传感器",description:"水质监测数据"}],approvalHistory:[{id:"approval_004",action:"提交申请",approver:"第三方检测机构",time:e().subtract(1,"day").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_005",action:"批准申请",approver:"系统管理员",time:e().subtract(10,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_006",action:"授权过期",approver:"系统",time:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss")}]},{id:"auth_004",applicant:"海警支队队长",organization:"中国海警局东海分局",contactInfo:"13755566677",reason:"海上执法行动，需要实时监控可疑船舶动向",priority:"emergency",status:"approved",applicationTime:e().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(30,"minute").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(6,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_005",name:"雷达监测设备",type:"雷达",description:"船舶跟踪雷达"},{id:"res_006",name:"港区C-摄像头03",type:"摄像头",description:"港区C全景监控"},{id:"res_007",name:"AIS基站01",type:"AIS",description:"船舶自动识别系统"}],approvalHistory:[{id:"approval_007",action:"提交申请",approver:"海警支队队长",time:e().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_008",action:"紧急批准",approver:"值班主管",time:e().subtract(45,"minute").format("YYYY-MM-DD HH:mm:ss"),comment:"海上执法紧急需要，立即批准"}]},{id:"auth_005",applicant:"船舶调度中心",organization:"上海港集团",contactInfo:"13888999000",reason:"台风预警期间船舶调度和安全监控",priority:"high",status:"pending",applicationTime:e().subtract(45,"minute").format("YYYY-MM-DD HH:mm:ss"),startTime:e().add(30,"minute").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(12,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_008",name:"气象监测站",type:"传感器",description:"风速风向监测"},{id:"res_009",name:"港区D-摄像头04",type:"摄像头",description:"港区D码头监控"},{id:"res_010",name:"港区E-摄像头05",type:"摄像头",description:"港区E锚地监控"}],approvalHistory:[{id:"approval_009",action:"提交申请",approver:"船舶调度中心",time:e().subtract(45,"minute").format("YYYY-MM-DD HH:mm:ss")}]},{id:"auth_006",applicant:"海关缉私局",organization:"上海海关",contactInfo:"13666777888",reason:"反走私专项行动，监控重点区域",priority:"high",status:"approved",applicationTime:e().subtract(3,"hour").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(8,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_011",name:"红外夜视摄像头01",type:"摄像头",description:"夜间监控专用"},{id:"res_012",name:"声呐探测设备",type:"传感器",description:"水下目标探测"}],approvalHistory:[{id:"approval_010",action:"提交申请",approver:"海关缉私局",time:e().subtract(3,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_011",action:"批准申请",approver:"安全主管",time:e().subtract(2.5,"hour").format("YYYY-MM-DD HH:mm:ss"),comment:"反走私行动，优先批准"}]},{id:"auth_007",applicant:"渔业管理部门",organization:"上海市农业农村委员会",contactInfo:"13444555666",reason:"禁渔期执法检查，监控渔船活动",priority:"medium",status:"rejected",applicationTime:e().subtract(4,"hour").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(4,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_013",name:"渔业监控摄像头",type:"摄像头",description:"渔港区域监控"}],approvalHistory:[{id:"approval_012",action:"提交申请",approver:"渔业管理部门",time:e().subtract(4,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_013",action:"拒绝申请",approver:"系统管理员",time:e().subtract(3,"hour").format("YYYY-MM-DD HH:mm:ss"),comment:"权限级别不足，需要上级部门审批"}]},{id:"auth_008",applicant:"海洋科研院所",organization:"中科院海洋研究所",contactInfo:"13222333444",reason:"海洋生态环境监测研究项目数据采集",priority:"low",status:"approved",applicationTime:e().subtract(6,"hour").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(4,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(20,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_014",name:"水质监测传感器组",type:"传感器",description:"多参数水质监测"},{id:"res_015",name:"海底摄像系统",type:"摄像头",description:"海底生态监控"}],approvalHistory:[{id:"approval_014",action:"提交申请",approver:"海洋科研院所",time:e().subtract(6,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_015",action:"批准申请",approver:"技术主管",time:e().subtract(5,"hour").format("YYYY-MM-DD HH:mm:ss"),comment:"科研项目申请，批准使用"}]},{id:"auth_009",applicant:"应急管理局",organization:"上海市应急管理局",contactInfo:"13111222333",reason:"危化品运输船舶监控，防范安全事故",priority:"high",status:"pending",applicationTime:e().subtract(20,"minute").format("YYYY-MM-DD HH:mm:ss"),startTime:e().add(10,"minute").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(8,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_016",name:"危化品码头监控",type:"摄像头",description:"危化品装卸作业监控"},{id:"res_017",name:"气体泄漏检测器",type:"传感器",description:"有害气体监测"},{id:"res_018",name:"船舶跟踪雷达02",type:"雷达",description:"危化品船舶跟踪"}],approvalHistory:[{id:"approval_016",action:"提交申请",approver:"应急管理局",time:e().subtract(20,"minute").format("YYYY-MM-DD HH:mm:ss")}]},{id:"auth_010",applicant:"海事巡逻队",organization:"长江海事局",contactInfo:"13999888777",reason:"夜间巡逻执法，监控非法采砂船舶",priority:"medium",status:"approved",applicationTime:e().subtract(5,"hour").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(3,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(5,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_019",name:"夜视监控系统",type:"摄像头",description:"夜间巡逻监控"},{id:"res_020",name:"船舶识别雷达",type:"雷达",description:"船舶身份识别"}],approvalHistory:[{id:"approval_017",action:"提交申请",approver:"海事巡逻队",time:e().subtract(5,"hour").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_018",action:"批准申请",approver:"值班调度员",time:e().subtract(4,"hour").format("YYYY-MM-DD HH:mm:ss"),comment:"巡逻执法申请，批准使用"}]},{id:"auth_011",applicant:"水上交通管制",organization:"上海海事局交管中心",contactInfo:"13777888999",reason:"大型邮轮进港引导，需要全程监控",priority:"medium",status:"expired",applicationTime:e().subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),startTime:e().subtract(18,"hour").format("YYYY-MM-DD HH:mm:ss"),endTime:e().subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_021",name:"引航道监控系统",type:"摄像头",description:"船舶引航监控"},{id:"res_022",name:"港口调度雷达",type:"雷达",description:"船舶调度引导"}],approvalHistory:[{id:"approval_019",action:"提交申请",approver:"水上交通管制",time:e().subtract(1,"day").format("YYYY-MM-DD HH:mm:ss")},{id:"approval_020",action:"批准申请",approver:"交管主管",time:e().subtract(20,"hour").format("YYYY-MM-DD HH:mm:ss"),comment:"邮轮进港申请，批准使用"},{id:"approval_021",action:"授权到期",approver:"系统",time:e().subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss")}]},{id:"auth_012",applicant:"边防检查站",organization:"上海边检总站",contactInfo:"13555666777",reason:"国际邮轮旅客通关检查，需要监控码头区域",priority:"medium",status:"pending",applicationTime:e().subtract(15,"minute").format("YYYY-MM-DD HH:mm:ss"),startTime:e().add(45,"minute").format("YYYY-MM-DD HH:mm:ss"),endTime:e().add(6,"hour").format("YYYY-MM-DD HH:mm:ss"),requestedResources:[{id:"res_023",name:"客运码头监控",type:"摄像头",description:"旅客通关监控"},{id:"res_024",name:"人脸识别系统",type:"传感器",description:"旅客身份识别"}],approvalHistory:[{id:"approval_022",action:"提交申请",approver:"边防检查站",time:e().subtract(15,"minute").format("YYYY-MM-DD HH:mm:ss")}]}]),$e=y([{key:"res_001",title:"港区A-摄像头01",id:"res_001",name:"港区A-摄像头01",type:"摄像头",description:"港区A码头监控"},{key:"res_002",title:"航道-传感器01",id:"res_002",name:"航道-传感器01",type:"传感器",description:"航道水深监测"},{key:"res_003",title:"港区B-摄像头02",id:"res_003",name:"港区B-摄像头02",type:"摄像头",description:"港区B监控设备"},{key:"res_004",title:"环境监测传感器",id:"res_004",name:"环境监测传感器",type:"传感器",description:"水质监测数据"},{key:"res_005",title:"雷达监测设备",id:"res_005",name:"雷达监测设备",type:"雷达",description:"船舶跟踪雷达"},{key:"res_006",title:"港区C-摄像头03",id:"res_006",name:"港区C-摄像头03",type:"摄像头",description:"港区C全景监控"},{key:"res_007",title:"AIS基站01",id:"res_007",name:"AIS基站01",type:"AIS",description:"船舶自动识别系统"},{key:"res_008",title:"气象监测站",id:"res_008",name:"气象监测站",type:"传感器",description:"风速风向监测"},{key:"res_009",title:"港区D-摄像头04",id:"res_009",name:"港区D-摄像头04",type:"摄像头",description:"港区D码头监控"},{key:"res_010",title:"港区E-摄像头05",id:"res_010",name:"港区E-摄像头05",type:"摄像头",description:"港区E锚地监控"},{key:"res_011",title:"红外夜视摄像头01",id:"res_011",name:"红外夜视摄像头01",type:"摄像头",description:"夜间监控专用"},{key:"res_012",title:"声呐探测设备",id:"res_012",name:"声呐探测设备",type:"传感器",description:"水下目标探测"},{key:"res_013",title:"渔业监控摄像头",id:"res_013",name:"渔业监控摄像头",type:"摄像头",description:"渔港区域监控"},{key:"res_014",title:"水质监测传感器组",id:"res_014",name:"水质监测传感器组",type:"传感器",description:"多参数水质监测"},{key:"res_015",title:"海底摄像系统",id:"res_015",name:"海底摄像系统",type:"摄像头",description:"海底生态监控"},{key:"res_016",title:"危化品码头监控",id:"res_016",name:"危化品码头监控",type:"摄像头",description:"危化品装卸作业监控"},{key:"res_017",title:"气体泄漏检测器",id:"res_017",name:"气体泄漏检测器",type:"传感器",description:"有害气体监测"},{key:"res_018",title:"船舶跟踪雷达02",id:"res_018",name:"船舶跟踪雷达02",type:"雷达",description:"危化品船舶跟踪"},{key:"res_019",title:"夜视监控系统",id:"res_019",name:"夜视监控系统",type:"摄像头",description:"夜间巡逻监控"},{key:"res_020",title:"船舶识别雷达",id:"res_020",name:"船舶识别雷达",type:"雷达",description:"船舶身份识别"},{key:"res_021",title:"引航道监控系统",id:"res_021",name:"引航道监控系统",type:"摄像头",description:"船舶引航监控"},{key:"res_022",title:"港口调度雷达",id:"res_022",name:"港口调度雷达",type:"雷达",description:"船舶调度引导"},{key:"res_023",title:"客运码头监控",id:"res_023",name:"客运码头监控",type:"摄像头",description:"旅客通关监控"},{key:"res_024",title:"人脸识别系统",id:"res_024",name:"人脸识别系统",type:"传感器",description:"旅客身份识别"},{key:"res_025",title:"集装箱堆场监控",id:"res_025",name:"集装箱堆场监控",type:"摄像头",description:"集装箱作业监控"},{key:"res_026",title:"船舶进出港雷达",id:"res_026",name:"船舶进出港雷达",type:"雷达",description:"港口交通管制"},{key:"res_027",title:"油污监测传感器",id:"res_027",name:"油污监测传感器",type:"传感器",description:"海面油污检测"},{key:"res_028",title:"港区F-摄像头06",id:"res_028",name:"港区F-摄像头06",type:"摄像头",description:"港区F作业监控"},{key:"res_029",title:"VTS雷达系统",id:"res_029",name:"VTS雷达系统",type:"雷达",description:"船舶交通管理系统"},{key:"res_030",title:"海洋气象浮标",id:"res_030",name:"海洋气象浮标",type:"传感器",description:"海上气象监测"}]),je=y([{id:"template_001",name:"紧急救援授权",type:"emergency",description:"用于紧急海上救援任务的快速授权模板",duration:4,resourceCount:8,resources:["camera","sensor","radar"]},{id:"template_002",name:"例行检查授权",type:"routine",description:"日常设备检查和维护的标准授权模板",duration:2,resourceCount:3,resources:["camera"]},{id:"template_003",name:"临时访问授权",type:"temporary",description:"短期临时访问的基础授权模板",duration:1,resourceCount:2,resources:["camera","sensor"]},{id:"template_004",name:"海上执法授权",type:"emergency",description:"海警、海事执法专用授权模板，包含全套监控设备",duration:6,resourceCount:12,resources:["camera","sensor","radar","ais"]},{id:"template_005",name:"环境监测授权",type:"routine",description:"环境保护部门监测作业标准模板",duration:8,resourceCount:6,resources:["sensor","camera"]},{id:"template_006",name:"港口作业授权",type:"routine",description:"港口日常作业监控的标准授权",duration:12,resourceCount:10,resources:["camera","sensor"]},{id:"template_007",name:"科研项目授权",type:"temporary",description:"科研院所数据采集专用模板",duration:24,resourceCount:8,resources:["sensor","camera"]},{id:"template_008",name:"反走私行动授权",type:"emergency",description:"海关缉私专项行动授权模板",duration:8,resourceCount:15,resources:["camera","sensor","radar"]},{id:"template_009",name:"台风应急授权",type:"emergency",description:"台风等恶劣天气应急响应授权",duration:48,resourceCount:20,resources:["camera","sensor","radar","ais"]}]),Se=_(()=>{let e=Ue.value;return Te.status&&(e=e.filter(e=>e.status===Te.status)),Te.priority&&(e=e.filter(e=>e.priority===Te.priority)),e}),Ee=_(()=>Ue.value.filter(e=>"pending"===e.status)),Oe=_(()=>Ue.value.filter(e=>"approved"===e.status).map(e=>{var a;return{id:e.id,applicant:e.applicant,resourceName:(null==(a=e.requestedResources[0])?void 0:a.name)||"未知资源",endTime:e.endTime}}).filter(a=>e(a.endTime).diff(e(),"hour")<=2)),Be=[{title:"申请人信息",key:"applicantInfo",width:200,fixed:"left"},{title:"优先级",key:"priority",width:100},{title:"状态",key:"status",width:100},{title:"申请资源",key:"resources",width:150},{title:"授权时间",key:"timeRange",width:200},{title:"申请时间",dataIndex:"applicationTime",key:"applicationTime",width:150,customRender:({text:e})=>Pe(e)},{title:"操作",key:"action",width:200,fixed:"right"}],Fe=[{title:"资源名称",dataIndex:"name",key:"name"},{title:"类型",key:"type"},{title:"描述",dataIndex:"description",key:"description"}],Ve=e=>({low:"green",medium:"blue",high:"orange",emergency:"red"}[e]||"default"),Je=e=>({low:"低",medium:"中",high:"高",emergency:"紧急"}[e]||e),Ne=e=>({pending:"orange",approved:"green",rejected:"red",expired:"default"}[e]||"default"),Ge=e=>({pending:"待审批",approved:"已批准",rejected:"已拒绝",expired:"已过期"}[e]||e),Ke=e=>({emergency:"紧急",routine:"例行",temporary:"临时"}[e]||e),Pe=a=>e(a).format("YYYY-MM-DD HH:mm:ss"),Qe=(a,t)=>{const r=e(a);return`${e(t).diff(r,"hour")}小时`},We=a=>{const t=e(),r=e(a).diff(t,"minute");return r<0?"已过期":r<60?`${r}分钟后过期`:`${Math.floor(r/60)}小时后过期`},Xe=()=>{console.log("申请过滤条件变化:",Te)},Le=()=>{xe.visible=!0,xe.title="创建授权申请",xe.isEdit=!1,na()},Ze=()=>{A.value=!0,setTimeout(()=>{A.value=!1,a.success("申请列表已刷新")},1e3)},ea=t=>{n.confirm({title:"确认批准",content:`确定要批准申请人"${t.applicant}"的授权申请吗？`,onOk:()=>{t.status="approved",t.approvalHistory.push({id:`approval_${Date.now()}`,action:"批准申请",approver:"当前用户",time:e().format("YYYY-MM-DD HH:mm:ss"),comment:"申请已批准"}),a.success("申请已批准")}})},aa=t=>{n.confirm({title:"确认拒绝",content:`确定要拒绝申请人"${t.applicant}"的授权申请吗？`,onOk:()=>{t.status="rejected",t.approvalHistory.push({id:`approval_${Date.now()}`,action:"拒绝申请",approver:"当前用户",time:e().format("YYYY-MM-DD HH:mm:ss"),comment:"申请已拒绝"}),a.success("申请已拒绝")}})},ta=()=>{we.visible=!0},ra=()=>{a.info("创建授权模板功能")},ia=()=>{a.success("授权申请提交成功"),xe.visible=!1,na()},sa=()=>{xe.visible=!1,na()},oa=()=>{a.success("紧急授权已生效"),we.visible=!1,pa()},la=()=>{we.visible=!1,pa()},na=()=>{Object.assign(Ce,{applicant:"",organization:"",contactInfo:"",reason:"",priority:"medium",timeRange:[],requestedResources:[],notes:""})},pa=()=>{Object.assign(Re,{target:"",reason:"",duration:"2",resources:["camera"]})};return g(()=>{Ae.total=Ue.value.length,console.log("临时授权页面已加载")}),(Y,y)=>{const f=b("a-statistic"),_=b("a-card"),g=b("a-col"),Ue=b("a-row"),na=b("a-select-option"),pa=b("a-select"),da=b("a-button"),ua=b("a-space"),ca=b("a-tag"),ma=b("a-table"),va=b("a-badge"),Ya=b("a-alert"),ya=b("a-input"),fa=b("a-form-item"),_a=b("a-textarea"),ga=b("a-range-picker"),Ha=b("a-transfer"),ha=b("a-form"),Da=b("a-modal"),Ma=b("a-descriptions-item"),ka=b("a-descriptions"),ba=b("a-timeline-item"),Ta=b("a-timeline"),xa=b("a-checkbox"),za=b("a-checkbox-group");return H(),h("div",U,[y[55]||(y[55]=D("div",{class:"page-header"},[D("h2",null,"临时授权"),D("p",null,"突发事件临时访问权限管理，支持快速授权和权限回收")],-1)),D("div",$,[M(Ue,{gutter:16},{default:k(()=>[M(g,{span:6},{default:k(()=>[M(_,{class:"overview-card"},{default:k(()=>[M(f,{title:"活跃授权",value:qe.activeAuthorizations,"value-style":{color:"#52c41a"}},{suffix:k(()=>[M(T(p),{style:{color:"#52c41a","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),M(g,{span:6},{default:k(()=>[M(_,{class:"overview-card"},{default:k(()=>[M(f,{title:"即将过期",value:qe.expiringSoon,"value-style":{color:"#faad14"}},{suffix:k(()=>[M(T(t),{style:{color:"#faad14","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),M(g,{span:6},{default:k(()=>[M(_,{class:"overview-card"},{default:k(()=>[M(f,{title:"今日申请",value:qe.todayApplications,"value-style":{color:"#1890ff"}},{suffix:k(()=>[M(T(d),{style:{color:"#1890ff","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1}),M(g,{span:6},{default:k(()=>[M(_,{class:"overview-card"},{default:k(()=>[M(f,{title:"紧急授权",value:qe.emergencyAuthorizations,"value-style":{color:"#ff4d4f"}},{suffix:k(()=>[M(T(r),{style:{color:"#ff4d4f","margin-left":"8px"}})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),D("div",j,[M(Ue,{gutter:16},{default:k(()=>[M(g,{span:16},{default:k(()=>[M(_,{title:"授权申请管理",class:"application-card"},{extra:k(()=>[M(ua,null,{default:k(()=>[M(pa,{value:Te.status,"onUpdate:value":y[0]||(y[0]=e=>Te.status=e),placeholder:"申请状态",style:{width:"120px"},onChange:Xe},{default:k(()=>[M(na,{value:""},{default:k(()=>[...y[17]||(y[17]=[x("全部状态",-1)])]),_:1}),M(na,{value:"pending"},{default:k(()=>[...y[18]||(y[18]=[x("待审批",-1)])]),_:1}),M(na,{value:"approved"},{default:k(()=>[...y[19]||(y[19]=[x("已批准",-1)])]),_:1}),M(na,{value:"rejected"},{default:k(()=>[...y[20]||(y[20]=[x("已拒绝",-1)])]),_:1}),M(na,{value:"expired"},{default:k(()=>[...y[21]||(y[21]=[x("已过期",-1)])]),_:1})]),_:1},8,["value"]),M(pa,{value:Te.priority,"onUpdate:value":y[1]||(y[1]=e=>Te.priority=e),placeholder:"优先级",style:{width:"120px"},onChange:Xe},{default:k(()=>[M(na,{value:""},{default:k(()=>[...y[22]||(y[22]=[x("全部优先级",-1)])]),_:1}),M(na,{value:"low"},{default:k(()=>[...y[23]||(y[23]=[x("低",-1)])]),_:1}),M(na,{value:"medium"},{default:k(()=>[...y[24]||(y[24]=[x("中",-1)])]),_:1}),M(na,{value:"high"},{default:k(()=>[...y[25]||(y[25]=[x("高",-1)])]),_:1}),M(na,{value:"emergency"},{default:k(()=>[...y[26]||(y[26]=[x("紧急",-1)])]),_:1})]),_:1},8,["value"]),M(da,{type:"primary",onClick:Le},{default:k(()=>[M(T(i)),y[27]||(y[27]=x(" 新建申请 ",-1))]),_:1}),M(da,{onClick:Ze},{default:k(()=>[M(T(u)),y[28]||(y[28]=x(" 刷新 ",-1))]),_:1})]),_:1})]),default:k(()=>[M(ma,{columns:Be,"data-source":Se.value,loading:A.value,pagination:Ae,"row-key":"id",size:"small",scroll:{x:1200}},{bodyCell:k(({column:t,record:r})=>{return["applicantInfo"===t.key?(H(),h("div",S,[D("div",E,z(r.applicant),1),D("div",O,z(r.organization),1),D("div",B,z(r.contactInfo),1)])):"priority"===t.key?(H(),w(ca,{key:1,color:Ve(r.priority)},{default:k(()=>[x(z(Je(r.priority)),1)]),_:2},1032,["color"])):"status"===t.key?(H(),w(ca,{key:2,color:Ne(r.status)},{default:k(()=>[x(z(Ge(r.status)),1)]),_:2},1032,["color"])):"resources"===t.key?(H(),h("div",F,[D("div",V,z(r.requestedResources.length)+"个资源",1),D("div",J,[(H(!0),h(C,null,R((i=r.requestedResources,[...new Set(i.map(e=>e.type))]),e=>(H(),w(ca,{key:e,size:"small"},{default:k(()=>[x(z(e),1)]),_:2},1024))),128))])])):"timeRange"===t.key?(H(),h("div",N,[D("div",G,z(Pe(r.startTime)),1),D("div",K,z(Pe(r.endTime)),1),D("div",P,z(Qe(r.startTime,r.endTime)),1)])):"action"===t.key?(H(),w(ua,{key:5},{default:k(()=>[M(da,{type:"link",size:"small",onClick:e=>{return a=r,be.value=a,void(ze.visible=!0);var a}},{default:k(()=>[M(T(s)),y[29]||(y[29]=x(" 查看 ",-1))]),_:2},1032,["onClick"]),"pending"===r.status?(H(),w(da,{key:0,type:"link",size:"small",onClick:e=>ea(r)},{default:k(()=>[M(T(o)),y[30]||(y[30]=x(" 批准 ",-1))]),_:2},1032,["onClick"])):I("",!0),"pending"===r.status?(H(),w(da,{key:1,type:"link",size:"small",onClick:e=>aa(r)},{default:k(()=>[M(T(l)),y[31]||(y[31]=x(" 拒绝 ",-1))]),_:2},1032,["onClick"])):I("",!0),"approved"===r.status?(H(),w(da,{key:2,type:"link",size:"small",onClick:t=>{return i=r,void n.confirm({title:"确认撤销",content:`确定要撤销申请人"${i.applicant}"的授权吗？`,onOk:()=>{i.status="expired",i.approvalHistory.push({id:`approval_${Date.now()}`,action:"撤销授权",approver:"当前用户",time:e().format("YYYY-MM-DD HH:mm:ss"),comment:"授权已撤销"}),a.success("授权已撤销")}});var i}},{default:k(()=>[M(T(c)),y[32]||(y[32]=x(" 撤销 ",-1))]),_:2},1032,["onClick"])):I("",!0)]),_:2},1024)):I("",!0)];var i}),_:1},8,["data-source","loading","pagination"])]),_:1})]),_:1}),M(g,{span:8},{default:k(()=>[M(_,{title:"快速操作",class:"quick-action-card"},{extra:k(()=>[M(va,{dot:ke.value},{default:k(()=>[M(T(m),{style:{"font-size":"16px"}})]),_:1},8,["dot"])]),default:k(()=>[D("div",Q,[y[34]||(y[34]=D("h4",null,"紧急授权",-1)),M(Ya,{message:"紧急情况快速授权",description:"用于突发事件需要立即访问资源的情况",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),M(da,{type:"primary",danger:"",block:"",onClick:ta},{default:k(()=>[M(T(v)),y[33]||(y[33]=x(" 启动紧急授权 ",-1))]),_:1})]),D("div",W,[y[37]||(y[37]=D("h4",null,"待处理申请",-1)),D("div",X,[(H(!0),h(C,null,R(Ee.value,e=>(H(),h("div",{key:e.id,class:q(["pending-item",`priority-${e.priority}`])},[D("div",L,[D("div",Z,z(e.applicant),1),D("div",ee,[M(ca,{color:Ve(e.priority),size:"small"},{default:k(()=>[x(z(Je(e.priority)),1)]),_:2},1032,["color"])])]),D("div",ae,z(e.reason),1),D("div",te,z(Pe(e.applicationTime)),1),D("div",re,[M(da,{type:"link",size:"small",onClick:a=>{ea(e)}},{default:k(()=>[...y[35]||(y[35]=[x(" 批准 ",-1)])]),_:2},1032,["onClick"]),M(da,{type:"link",size:"small",onClick:a=>{aa(e)}},{default:k(()=>[...y[36]||(y[36]=[x(" 拒绝 ",-1)])]),_:2},1032,["onClick"])])],2))),128))])]),D("div",ie,[y[39]||(y[39]=D("h4",null,"即将过期",-1)),D("div",se,[(H(!0),h(C,null,R(Oe.value,e=>(H(),h("div",{key:e.id,class:"expiring-item"},[D("div",oe,[D("div",le,z(e.applicant),1),D("div",ne,z(e.resourceName),1),D("div",pe,z(We(e.endTime)),1)]),D("div",de,[M(da,{type:"link",size:"small",onClick:t=>(e=>{a.success(`已为"${e.applicant}"延期2小时`)})(e)},{default:k(()=>[...y[38]||(y[38]=[x(" 延期 ",-1)])]),_:2},1032,["onClick"])])]))),128))])])]),_:1})]),_:1})]),_:1})]),D("div",ue,[M(_,{title:"授权模板",class:"template-card"},{extra:k(()=>[M(da,{type:"primary",onClick:ra},{default:k(()=>[M(T(i)),y[40]||(y[40]=x(" 创建模板 ",-1))]),_:1})]),default:k(()=>[M(Ue,{gutter:16},{default:k(()=>[(H(!0),h(C,null,R(je.value,e=>(H(),w(g,{key:e.id,span:8},{default:k(()=>[M(_,{class:"template-item",hoverable:!0,onClick:t=>(e=>{xe.visible=!0,xe.title=`使用模板: ${e.name}`,a.success(`已应用模板: ${e.name}`)})(e)},{default:k(()=>{return[D("div",ce,[D("div",me,z(e.name),1),D("div",ve,[M(ca,{color:(a=e.type,{emergency:"red",routine:"blue",temporary:"green"}[a]||"default")},{default:k(()=>[x(z(Ke(e.type)),1)]),_:2},1032,["color"])])]),D("div",Ye,z(e.description),1),D("div",ye,[D("div",fe,"有效期: "+z(e.duration)+"小时",1),D("div",_e,"资源: "+z(e.resourceCount)+"个",1)])];var a}),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),M(Da,{open:xe.visible,"onUpdate:open":y[10]||(y[10]=e=>xe.visible=e),title:xe.title,width:"800px",onOk:ia,onCancel:sa},{default:k(()=>[M(ha,{ref:"applicationFormRef",model:Ce,rules:Ie,"label-col":{span:6},"wrapper-col":{span:18}},{default:k(()=>[M(fa,{label:"申请人",name:"applicant"},{default:k(()=>[M(ya,{value:Ce.applicant,"onUpdate:value":y[2]||(y[2]=e=>Ce.applicant=e),placeholder:"请输入申请人姓名"},null,8,["value"])]),_:1}),M(fa,{label:"所属机构",name:"organization"},{default:k(()=>[M(ya,{value:Ce.organization,"onUpdate:value":y[3]||(y[3]=e=>Ce.organization=e),placeholder:"请输入所属机构"},null,8,["value"])]),_:1}),M(fa,{label:"联系方式",name:"contactInfo"},{default:k(()=>[M(ya,{value:Ce.contactInfo,"onUpdate:value":y[4]||(y[4]=e=>Ce.contactInfo=e),placeholder:"请输入联系方式"},null,8,["value"])]),_:1}),M(fa,{label:"申请原因",name:"reason"},{default:k(()=>[M(_a,{value:Ce.reason,"onUpdate:value":y[5]||(y[5]=e=>Ce.reason=e),placeholder:"请详细说明申请原因",rows:3},null,8,["value"])]),_:1}),M(fa,{label:"优先级",name:"priority"},{default:k(()=>[M(pa,{value:Ce.priority,"onUpdate:value":y[6]||(y[6]=e=>Ce.priority=e),placeholder:"请选择优先级"},{default:k(()=>[M(na,{value:"low"},{default:k(()=>[...y[41]||(y[41]=[x("低",-1)])]),_:1}),M(na,{value:"medium"},{default:k(()=>[...y[42]||(y[42]=[x("中",-1)])]),_:1}),M(na,{value:"high"},{default:k(()=>[...y[43]||(y[43]=[x("高",-1)])]),_:1}),M(na,{value:"emergency"},{default:k(()=>[...y[44]||(y[44]=[x("紧急",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),M(fa,{label:"授权时间",name:"timeRange"},{default:k(()=>[M(ga,{value:Ce.timeRange,"onUpdate:value":y[7]||(y[7]=e=>Ce.timeRange=e),"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",style:{width:"100%"}},null,8,["value"])]),_:1}),M(fa,{label:"申请资源",name:"requestedResources"},{default:k(()=>[M(Ha,{value:Ce.requestedResources,"onUpdate:value":y[8]||(y[8]=e=>Ce.requestedResources=e),"data-source":$e.value,titles:["可选资源","已选资源"],render:e=>e.title,"target-keys":Ce.requestedResources},null,8,["value","data-source","render","target-keys"])]),_:1}),M(fa,{label:"备注",name:"notes"},{default:k(()=>[M(_a,{value:Ce.notes,"onUpdate:value":y[9]||(y[9]=e=>Ce.notes=e),placeholder:"请输入备注信息",rows:2},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),M(Da,{open:ze.visible,"onUpdate:open":y[11]||(y[11]=e=>ze.visible=e),title:"申请详情",width:"800px",footer:null},{default:k(()=>[be.value?(H(),h("div",ge,[M(ka,{column:2,bordered:""},{default:k(()=>[M(Ma,{label:"申请ID"},{default:k(()=>[x(z(be.value.id),1)]),_:1}),M(Ma,{label:"申请状态"},{default:k(()=>[M(ca,{color:Ne(be.value.status)},{default:k(()=>[x(z(Ge(be.value.status)),1)]),_:1},8,["color"])]),_:1}),M(Ma,{label:"申请人"},{default:k(()=>[x(z(be.value.applicant),1)]),_:1}),M(Ma,{label:"所属机构"},{default:k(()=>[x(z(be.value.organization),1)]),_:1}),M(Ma,{label:"联系方式"},{default:k(()=>[x(z(be.value.contactInfo),1)]),_:1}),M(Ma,{label:"优先级"},{default:k(()=>[M(ca,{color:Ve(be.value.priority)},{default:k(()=>[x(z(Je(be.value.priority)),1)]),_:1},8,["color"])]),_:1}),M(Ma,{label:"申请时间"},{default:k(()=>[x(z(Pe(be.value.applicationTime)),1)]),_:1}),M(Ma,{label:"授权时间"},{default:k(()=>[x(z(Pe(be.value.startTime))+" - "+z(Pe(be.value.endTime)),1)]),_:1}),M(Ma,{label:"申请原因",span:2},{default:k(()=>[x(z(be.value.reason),1)]),_:1})]),_:1}),D("div",He,[y[45]||(y[45]=D("h4",null,"申请资源",-1)),M(ma,{columns:Fe,"data-source":be.value.requestedResources,pagination:!1,"row-key":"id",size:"small"},{bodyCell:k(({column:e,record:a})=>["type"===e.key?(H(),w(ca,{key:0},{default:k(()=>[x(z(a.type),1)]),_:2},1024)):I("",!0)]),_:1},8,["data-source"])]),D("div",he,[y[46]||(y[46]=D("h4",null,"审批记录",-1)),M(Ta,null,{default:k(()=>[(H(!0),h(C,null,R(be.value.approvalHistory,e=>{return H(),w(ba,{key:e.id,color:(a=e.action,a.includes("批准")?"green":a.includes("拒绝")?"red":a.includes("撤销")?"orange":"blue")},{default:k(()=>[D("p",null,z(e.action)+" - "+z(e.approver),1),D("p",De,z(Pe(e.time)),1),e.comment?(H(),h("p",Me,z(e.comment),1)):I("",!0)]),_:2},1032,["color"]);var a}),128))]),_:1})])])):I("",!0)]),_:1},8,["open"]),M(Da,{open:we.visible,"onUpdate:open":y[16]||(y[16]=e=>we.visible=e),title:"紧急授权",width:"600px",onOk:oa,onCancel:la},{default:k(()=>[M(Ya,{message:"紧急授权警告",description:"紧急授权将绕过正常审批流程，直接生效。请确保操作的必要性和合规性。",type:"error","show-icon":"",style:{"margin-bottom":"24px"}}),M(ha,{model:Re,"label-col":{span:6},"wrapper-col":{span:18}},{default:k(()=>[M(fa,{label:"授权对象"},{default:k(()=>[M(ya,{value:Re.target,"onUpdate:value":y[12]||(y[12]=e=>Re.target=e),placeholder:"请输入授权对象"},null,8,["value"])]),_:1}),M(fa,{label:"紧急原因"},{default:k(()=>[M(_a,{value:Re.reason,"onUpdate:value":y[13]||(y[13]=e=>Re.reason=e),placeholder:"请详细说明紧急情况",rows:3},null,8,["value"])]),_:1}),M(fa,{label:"授权时长"},{default:k(()=>[M(pa,{value:Re.duration,"onUpdate:value":y[14]||(y[14]=e=>Re.duration=e),placeholder:"请选择授权时长"},{default:k(()=>[M(na,{value:"1"},{default:k(()=>[...y[47]||(y[47]=[x("1小时",-1)])]),_:1}),M(na,{value:"2"},{default:k(()=>[...y[48]||(y[48]=[x("2小时",-1)])]),_:1}),M(na,{value:"4"},{default:k(()=>[...y[49]||(y[49]=[x("4小时",-1)])]),_:1}),M(na,{value:"8"},{default:k(()=>[...y[50]||(y[50]=[x("8小时",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),M(fa,{label:"授权资源"},{default:k(()=>[M(za,{value:Re.resources,"onUpdate:value":y[15]||(y[15]=e=>Re.resources=e)},{default:k(()=>[M(xa,{value:"all"},{default:k(()=>[...y[51]||(y[51]=[x("全部资源",-1)])]),_:1}),M(xa,{value:"camera"},{default:k(()=>[...y[52]||(y[52]=[x("摄像头",-1)])]),_:1}),M(xa,{value:"sensor"},{default:k(()=>[...y[53]||(y[53]=[x("传感器",-1)])]),_:1}),M(xa,{value:"radar"},{default:k(()=>[...y[54]||(y[54]=[x("雷达",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])])}}}),[["__scopeId","data-v-49110cc1"]]);export{ke as default};
