import{d as e,r as a,f as l,c as t,o as s,b as i,V as u,W as d,a0 as r,k as n,$ as o,X as v,a3 as c,G as p,u as m,_ as f,F as h,a1 as _}from"./vendor-f41c3cc7.js";import{m as w,b as y,l as g}from"./antd-fa5730cf.js";import{h as k,j as b,n as I,S as M,F as x}from"./icons-15893848.js";import{_ as S}from"./index-19e90cff.js";const q={class:"desktop-sharing"},A={class:"sharing-preview-area"},R={class:"main-preview"},U={key:0,class:"preview-loading"},H={key:1,class:"preview-placeholder"},T={class:"preview-badges"},z={class:"preview-info"},C={class:"sharing-controls"},E={class:"sharing-info"},D={class:"permission-settings"},$={class:"user-permissions"},j={class:"user-list"},V={class:"user-info"},F={class:"user-name"},N={class:"user-department"},P={class:"user-last-active"},G=S(e({__name:"desktop-sharing",setup(e){const S=a({activeShares:12,onlineUsers:67,bandwidth:284.5,qualityScore:96.8,todayShares:34,totalDuration:89.5,avgViewers:15.3,successRate:99.2}),G=l(!1),L=l(!1),O=l(!1),W=l("SHARE-2025-001"),X=l(null),B=l("00:00:00"),J=l(null),K=l(0),Q=l("待检测"),Y=l(0),Z=l(0),ee=a({quality:"high",frameRate:30,audioSharing:!0,adaptiveNetwork:!0,compression:"h264"}),ae=t(()=>"high"===ee.quality?"1920x1080":"medium"===ee.quality?"1280x720":"854x480"),le=t(()=>Number(ee.frameRate)),te=t(()=>"high"===ee.quality?"高清":"medium"===ee.quality?"标清":"流畅"),se=()=>{if(!G.value)return;K.value=Math.max(0,K.value+Math.floor(5*Math.random()-2)),Y.value=Math.max(40,Math.min(220,Y.value+Math.floor(20*Math.random()-10))),Z.value=Math.max(2,Math.min(18,+(Z.value+(2*Math.random()-1)).toFixed(1)));const e=["稳定","良好","一般"];Q.value=e[Math.floor(Math.random()*e.length)]};let ie=null;const ue=()=>{O.value=!0,window.setTimeout(()=>{G.value=!0,L.value=!1,O.value=!1,X.value=Date.now(),K.value=5+Math.floor(6*Math.random()),Y.value=60+Math.floor(30*Math.random()),Z.value=6+Math.floor(6*Math.random()),Q.value="稳定",B.value="00:00:00",J.value&&window.clearInterval(J.value),J.value=window.setInterval(()=>{if(X.value&&G.value&&!L.value){const e=Date.now()-X.value,a=Math.floor(e/36e5),l=Math.floor(e%36e5/6e4),t=Math.floor(e%6e4/1e3);B.value=`${String(a).padStart(2,"0")}:${String(l).padStart(2,"0")}:${String(t).padStart(2,"0")}`}},1e3),ie&&window.clearInterval(ie),ie=window.setInterval(se,2e3),w.success("已开始共享")},600)},de=()=>{G.value&&(L.value=!0,w.info("共享已暂停"))},re=()=>{G.value&&(L.value=!1,w.success("继续共享"))},ne=()=>{G.value=!1,L.value=!1,X.value=null,B.value="00:00:00",K.value=0,Y.value=0,Z.value=0,Q.value="待检测",J.value&&(window.clearInterval(J.value),J.value=null),ie&&(window.clearInterval(ie),ie=null),w.success("共享已停止")},oe=l(!1),ve=()=>{oe.value=!0},ce=()=>{w.info("进入全屏预览（模拟）")},pe=a({scope:"private",viewPermissions:["view"],watermark:!0,recording:!1}),me=l([{id:1,name:"陈志强",avatar:"",permission:"admin",department:"调度中心",lastActive:"09:15:30"},{id:2,name:"刘建国",avatar:"",permission:"admin",department:"海事部门",lastActive:"09:12:45"},{id:3,name:"王海峰",avatar:"",permission:"user",department:"港口管理",lastActive:"09:08:20"},{id:4,name:"赵明华",avatar:"",permission:"user",department:"应急响应",lastActive:"09:05:15"},{id:5,name:"钱伟民",avatar:"",permission:"user",department:"船舶公司",lastActive:"09:10:30"},{id:6,name:"孙志刚",avatar:"",permission:"user",department:"气象部门",lastActive:"08:55:10"},{id:7,name:"周建军",avatar:"",permission:"user",department:"安全监督",lastActive:"09:03:45"},{id:8,name:"吴建华",avatar:"",permission:"user",department:"技术保障",lastActive:"09:07:20"}]),fe=l([{id:1,shareId:"SHARE-2025-001",type:"桌面共享",startTime:"2025-08-20 09:00:00",duration:"00:45:15",viewers:12,quality:"高清",department:"调度中心",status:"进行中"},{id:2,shareId:"SHARE-2025-002",type:"文件共享",startTime:"2025-08-20 10:30:00",duration:"00:28:30",viewers:8,quality:"标清",department:"海事部门",status:"已完成"},{id:3,shareId:"SHARE-2025-003",type:"应用共享",startTime:"2025-08-20 14:00:00",duration:"01:15:45",viewers:15,quality:"高清",department:"技术保障",status:"进行中"},{id:4,shareId:"SHARE-2025-004",type:"桌面共享",startTime:"2025-08-20 16:00:00",duration:"00:32:20",viewers:6,quality:"标清",department:"安全监督",status:"已完成"},{id:5,shareId:"SHARE-2025-005",type:"文件共享",startTime:"2025-08-19 08:30:00",duration:"00:55:10",viewers:10,quality:"高清",department:"应急响应",status:"已完成"},{id:6,shareId:"SHARE-2025-006",type:"应用共享",startTime:"2025-08-19 15:00:00",duration:"00:42:30",viewers:18,quality:"标清",department:"技术保障",status:"已完成"},{id:7,shareId:"SHARE-2025-007",type:"桌面共享",startTime:"2025-08-18 11:00:00",duration:"00:38:45",viewers:9,quality:"高清",department:"港口管理",status:"已完成"},{id:8,shareId:"SHARE-2025-008",type:"文件共享",startTime:"2025-08-18 16:30:00",duration:"00:51:20",viewers:14,quality:"标清",department:"调度中心",status:"已完成"}]),he=[{title:"共享ID",dataIndex:"shareId",key:"shareId"},{title:"共享类型",dataIndex:"type",key:"type"},{title:"开始时间",dataIndex:"startTime",key:"startTime"},{title:"共享时长",dataIndex:"duration",key:"duration"},{title:"观看人数",dataIndex:"viewers",key:"viewers"},{title:"共享质量",dataIndex:"quality",key:"quality"},{title:"负责部门",dataIndex:"department",key:"department"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",key:"action",slots:{customRender:"action"}}],_e=()=>{w.success("共享设置已保存"),oe.value=!1};return s(()=>{const e=window.setInterval(()=>{S.bandwidth=Math.floor(100*Math.random())+180,S.qualityScore=Math.floor(15*Math.random())+85,S.avgViewers=+(12+8*Math.random()).toFixed(1)},5e3);window.addEventListener("beforeunload",()=>window.clearInterval(e))}),i(()=>{J.value&&window.clearInterval(J.value),ie&&window.clearInterval(ie)}),(e,a)=>{const l=v("a-statistic"),t=v("a-col"),s=v("a-row"),i=v("a-card"),X=v("a-skeleton"),J=v("a-icon"),se=v("a-tag"),ie=v("a-button"),we=v("a-button-group"),ye=v("a-descriptions-item"),ge=v("a-descriptions"),ke=v("a-select-option"),be=v("a-select"),Ie=v("a-form-item"),Me=v("a-checkbox"),xe=v("a-checkbox-group"),Se=v("a-switch"),qe=v("a-form"),Ae=v("a-avatar"),Re=v("a-table"),Ue=v("a-modal");return u(),d("div",q,[a[34]||(a[34]=r("div",{class:"page-header"},[r("h1",null,"桌面数据共享"),r("p",null,"支持桌面共享、文件共享、应用共享等多种共享模式")],-1)),n(i,{class:"status-overview",title:"共享状态概览"},{default:o(()=>[n(s,{gutter:16},{default:o(()=>[n(t,{span:6},{default:o(()=>[n(l,{title:"当前共享数",value:S.activeShares},null,8,["value"])]),_:1}),n(t,{span:6},{default:o(()=>[n(l,{title:"在线用户",value:S.onlineUsers},null,8,["value"])]),_:1}),n(t,{span:6},{default:o(()=>[n(l,{title:"共享带宽",value:S.bandwidth,suffix:"Mbps"},null,8,["value"])]),_:1}),n(t,{span:6},{default:o(()=>[n(l,{title:"共享质量",value:S.qualityScore,suffix:"%"},null,8,["value"])]),_:1})]),_:1}),n(s,{gutter:16,style:{"margin-top":"16px"}},{default:o(()=>[n(t,{span:6},{default:o(()=>[n(l,{title:"今日共享",value:S.todayShares},null,8,["value"])]),_:1}),n(t,{span:6},{default:o(()=>[n(l,{title:"总共享时长",value:S.totalDuration,suffix:"小时"},null,8,["value"])]),_:1}),n(t,{span:6},{default:o(()=>[n(l,{title:"平均观看人数",value:S.avgViewers,suffix:"人"},null,8,["value"])]),_:1}),n(t,{span:6},{default:o(()=>[n(l,{title:"成功率",value:S.successRate,suffix:"%"},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(s,{gutter:16,class:"sharing-management"},{default:o(()=>[n(t,{span:16},{default:o(()=>[n(i,{title:"共享控制面板",class:"sharing-control-panel"},{default:o(()=>[r("div",A,[r("div",R,[O.value?(u(),d("div",U,[n(X,{active:!0,paragraph:{rows:4}})])):(u(),d("div",H,[n(J,{type:"desktop"}),r("p",null,c(G.value?"正在共享":"待接入"),1),r("div",T,[n(se,{color:G.value?"green":"orange"},{default:o(()=>[p(c(G.value?"进行中":"待接入"),1)]),_:1},8,["color"]),n(se,{color:"blue"},{default:o(()=>[p(c(ae.value),1)]),_:1}),n(se,{color:"orange"},{default:o(()=>[p(c(le.value)+"fps",1)]),_:1}),n(se,{color:Y.value<80?"green":Y.value<150?"orange":"red"},{default:o(()=>[p(c(Y.value)+"ms",1)]),_:1},8,["color"]),n(se,{color:"purple"},{default:o(()=>[p(c(Z.value)+"Mbps",1)]),_:1})]),r("div",z,[r("span",null,"时长: "+c(G.value?B.value:"00:00:00"),1),r("span",null,"观看: "+c(K.value)+" 人",1)])]))]),r("div",C,[n(we,null,{default:o(()=>[n(ie,{type:"primary",size:"large",disabled:G.value,onClick:ue},{icon:o(()=>[n(m(k))]),default:o(()=>[p(" "+c(G.value?"共享中":"开始共享"),1)]),_:1},8,["disabled"]),L.value?(u(),f(ie,{key:1,type:"default",size:"large",disabled:!G.value,onClick:re},{icon:o(()=>[n(m(k))]),default:o(()=>[a[11]||(a[11]=p(" 继续 ",-1))]),_:1},8,["disabled"])):(u(),f(ie,{key:0,type:"default",size:"large",disabled:!G.value,onClick:de},{icon:o(()=>[n(m(b))]),default:o(()=>[a[10]||(a[10]=p(" 暂停 ",-1))]),_:1},8,["disabled"])),n(ie,{type:"danger",size:"large",disabled:!G.value,onClick:ne},{icon:o(()=>[n(m(I))]),default:o(()=>[a[12]||(a[12]=p(" 停止共享 ",-1))]),_:1},8,["disabled"]),n(ie,{size:"large",onClick:ve},{icon:o(()=>[n(m(M))]),default:o(()=>[a[13]||(a[13]=p(" 设置 ",-1))]),_:1}),n(ie,{size:"large",disabled:!G.value,onClick:ce},{icon:o(()=>[n(m(x))]),default:o(()=>[a[14]||(a[14]=p(" 全屏 ",-1))]),_:1},8,["disabled"])]),_:1})])]),r("div",E,[n(ge,{column:3,bordered:""},{default:o(()=>[n(ye,{label:"共享ID"},{default:o(()=>[p(c(W.value),1)]),_:1}),n(ye,{label:"共享类型"},{default:o(()=>[...a[15]||(a[15]=[p("桌面共享",-1)])]),_:1}),n(ye,{label:"共享时长"},{default:o(()=>[p(c(G.value?B.value:"00:00:00"),1)]),_:1}),n(ye,{label:"观看人数"},{default:o(()=>[p(c(K.value)+"人",1)]),_:1}),n(ye,{label:"共享质量"},{default:o(()=>[p(c(te.value),1)]),_:1}),n(ye,{label:"网络状态"},{default:o(()=>[p(c(Q.value),1)]),_:1})]),_:1})])]),_:1})]),_:1}),n(t,{span:8},{default:o(()=>[n(i,{title:"共享权限管理",class:"permission-management"},{default:o(()=>[r("div",D,[n(qe,{layout:"vertical"},{default:o(()=>[n(Ie,{label:"共享范围"},{default:o(()=>[n(be,{value:pe.scope,"onUpdate:value":a[0]||(a[0]=e=>pe.scope=e),placeholder:"选择共享范围"},{default:o(()=>[n(ke,{value:"public"},{default:o(()=>[...a[16]||(a[16]=[p("公开",-1)])]),_:1}),n(ke,{value:"private"},{default:o(()=>[...a[17]||(a[17]=[p("私有",-1)])]),_:1}),n(ke,{value:"group"},{default:o(()=>[...a[18]||(a[18]=[p("群组",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),n(Ie,{label:"观看权限"},{default:o(()=>[n(xe,{value:pe.viewPermissions,"onUpdate:value":a[1]||(a[1]=e=>pe.viewPermissions=e)},{default:o(()=>[n(Me,{value:"view"},{default:o(()=>[...a[19]||(a[19]=[p("观看",-1)])]),_:1}),n(Me,{value:"comment"},{default:o(()=>[...a[20]||(a[20]=[p("评论",-1)])]),_:1}),n(Me,{value:"download"},{default:o(()=>[...a[21]||(a[21]=[p("下载",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),n(Ie,{label:"水印设置"},{default:o(()=>[n(Se,{checked:pe.watermark,"onUpdate:checked":a[2]||(a[2]=e=>pe.watermark=e)},null,8,["checked"])]),_:1}),n(Ie,{label:"录制权限"},{default:o(()=>[n(Se,{checked:pe.recording,"onUpdate:checked":a[3]||(a[3]=e=>pe.recording=e)},null,8,["checked"])]),_:1})]),_:1})]),r("div",$,[a[22]||(a[22]=r("h4",null,"用户权限",-1)),r("div",j,[(u(!0),d(h,null,_(me.value,e=>(u(),d("div",{class:"user-item",key:e.id},[n(Ae,{src:e.avatar,size:32},null,8,["src"]),r("div",V,[r("div",F,c(e.name),1),r("div",N,c(e.department),1),r("div",P,c(e.lastActive),1)]),n(se,{color:"admin"===e.permission?"red":"blue"},{default:o(()=>[p(c("admin"===e.permission?"管理员":"普通用户"),1)]),_:2},1032,["color"])]))),128))])])]),_:1})]),_:1})]),_:1}),n(i,{title:"共享记录",class:"sharing-records"},{default:o(()=>[n(Re,{columns:he,"data-source":fe.value,pagination:{pageSize:10}},{action:o(({record:e})=>[n(ie,{type:"link",size:"small",onClick:a=>(e=>{w.info(`查看共享记录: ${e.shareId}`)})(e)},{icon:o(()=>[n(m(y))]),default:o(()=>[a[23]||(a[23]=p(" 查看详情 ",-1))]),_:2},1032,["onClick"]),n(ie,{type:"link",size:"small",onClick:a=>(e=>{w.success(`开始下载共享记录: ${e.shareId}`)})(e)},{icon:o(()=>[n(m(g))]),default:o(()=>[a[24]||(a[24]=p(" 下载 ",-1))]),_:2},1032,["onClick"])]),_:1},8,["data-source"])]),_:1}),n(Ue,{visible:oe.value,"onUpdate:visible":a[9]||(a[9]=e=>oe.value=e),title:"共享设置",width:"600px",onOk:_e},{default:o(()=>[n(qe,{model:ee,layout:"vertical"},{default:o(()=>[n(Ie,{label:"共享质量"},{default:o(()=>[n(be,{value:ee.quality,"onUpdate:value":a[4]||(a[4]=e=>ee.quality=e)},{default:o(()=>[n(ke,{value:"high"},{default:o(()=>[...a[25]||(a[25]=[p("高清 (1080p)",-1)])]),_:1}),n(ke,{value:"medium"},{default:o(()=>[...a[26]||(a[26]=[p("标清 (720p)",-1)])]),_:1}),n(ke,{value:"low"},{default:o(()=>[...a[27]||(a[27]=[p("流畅 (480p)",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),n(Ie,{label:"帧率"},{default:o(()=>[n(be,{value:ee.frameRate,"onUpdate:value":a[5]||(a[5]=e=>ee.frameRate=e)},{default:o(()=>[n(ke,{value:"60"},{default:o(()=>[...a[28]||(a[28]=[p("60fps",-1)])]),_:1}),n(ke,{value:"30"},{default:o(()=>[...a[29]||(a[29]=[p("30fps",-1)])]),_:1}),n(ke,{value:"24"},{default:o(()=>[...a[30]||(a[30]=[p("24fps",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),n(Ie,{label:"音频共享"},{default:o(()=>[n(Se,{checked:ee.audioSharing,"onUpdate:checked":a[6]||(a[6]=e=>ee.audioSharing=e)},null,8,["checked"])]),_:1}),n(Ie,{label:"网络自适应"},{default:o(()=>[n(Se,{checked:ee.adaptiveNetwork,"onUpdate:checked":a[7]||(a[7]=e=>ee.adaptiveNetwork=e)},null,8,["checked"])]),_:1}),n(Ie,{label:"压缩算法"},{default:o(()=>[n(be,{value:ee.compression,"onUpdate:value":a[8]||(a[8]=e=>ee.compression=e)},{default:o(()=>[n(ke,{value:"h264"},{default:o(()=>[...a[31]||(a[31]=[p("H.264",-1)])]),_:1}),n(ke,{value:"h265"},{default:o(()=>[...a[32]||(a[32]=[p("H.265",-1)])]),_:1}),n(ke,{value:"vp9"},{default:o(()=>[...a[33]||(a[33]=[p("VP9",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),[["__scopeId","data-v-f87e74f5"]]);export{G as default};
