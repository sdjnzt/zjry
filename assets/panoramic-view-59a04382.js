import{d as a,f as e,r as l,o as s,b as t,V as n,W as i,a0 as o,k as c,$ as r,a7 as d,_ as p,X as u,u as v,G as m,a3 as h,F as f,a8 as w,a1 as g}from"./vendor-f41c3cc7.js";import{V as y,d as b,e as k,f as z,g as M,R as C,F as x,h as _,W as A}from"./icons-15893848.js";import{m as I,L as T,E as S,I as P}from"./antd-fa5730cf.js";import{_ as U}from"./index-781a1167.js";const D={amap:{apiKey:"YOUR_AMAP_KEY",version:"2.0",defaultCenter:[116.58,35.38],defaultZoom:12,mapStyle:"amap://styles/normal",viewMode:"2D",features:["bg","road","building","point"],plugins:["AMap.Scale","AMap.ToolBar","AMap.MapType"]},mock:{center:[50,50],zoom:1,mapStyle:"water",viewMode:"2D"}},$={class:"panoramic-view"},E={class:"content-wrapper"},Z={class:"left-toolbar"},j={class:"info-item"},W={class:"value success"},K={class:"info-item"},q={class:"value info"},R={class:"info-item"},B={class:"value warning"},V={class:"main-map"},N={key:0,class:"map-loading"},O={key:0,class:"error-text"},L={class:"right-panel"},F={class:"object-info"},H={class:"object-header"},Q={class:"info-content"},Y={class:"info-row"},X={class:"info-row"},G={class:"value"},J={class:"info-row"},aa={class:"value"},ea={class:"info-row"},la={class:"value"},sa={class:"info-row"},ta={class:"info-row"},na={class:"value"},ia={class:"info-row"},oa={class:"value"},ca={key:0,class:"info-row"},ra={class:"value warning"},da={class:"action-buttons"},pa={class:"info-row"},ua={class:"value"},va={class:"info-row"},ma={class:"value"},ha={class:"info-row"},fa={class:"value"},wa={class:"info-row"},ga={class:"value"},ya={class:"info-row"},ba={class:"value"},ka={class:"info-row"},za={class:"value"},Ma={class:"info-row"},Ca={class:"value"},xa={class:"info-row"},_a={class:"value"},Aa={class:"info-row"},Ia={class:"value"},Ta={class:"info-row"},Sa={class:"value"},Pa={key:0,class:"info-row"},Ua={class:"value warning"},Da={class:"action-buttons"},$a={class:"info-row"},Ea={class:"value"},Za={class:"info-row"},ja={class:"value"},Wa={class:"info-row"},Ka={class:"value"},qa={class:"info-row"},Ra={class:"value"},Ba={class:"info-row"},Va={class:"value"},Na={class:"info-row"},Oa={class:"value"},La={class:"info-row"},Fa={class:"value"},Ha={class:"info-row"},Qa={class:"value"},Ya={class:"info-row"},Xa={class:"value"},Ga={class:"info-row"},Ja={class:"value"},ae={class:"weather-alerts"},ee={class:"alert-tags"},le={class:"weather-forecast"},se={class:"forecast-list"},te={class:"time"},ne={class:"temp"},ie={class:"weather"},oe={class:"wind"},ce={class:"alarm-header"},re={class:"alarm-status"},de={class:"alarm-list"},pe=["onClick"],ue={class:"alarm-icon"},ve={class:"alarm-content"},me={class:"alarm-title"},he={class:"alarm-description"},fe={class:"alarm-meta"},we={class:"alarm-time"},ge={class:"alarm-device"},ye={key:0,class:"alarm-actions"},be={class:"action-buttons"},ke={class:"ptz-control-panel"},ze={class:"ptz-info"},Me={class:"value"},Ce={class:"ptz-sliders"},xe={class:"ptz-item"},_e={class:"value"},Ae={class:"ptz-item"},Ie={class:"value"},Te={class:"ptz-item"},Se={class:"value"},Pe={class:"ptz-actions"},Ue={class:"video-player-panel"},De={class:"video-info"},$e={class:"value"},Ee={class:"video-controls"},Ze={class:"video-quality"},je={class:"video-status"},We=U(a({__name:"panoramic-view",setup(a){const U=e(),We=e(null),Ke=e(null);let qe=null,Re=null,Be=[];const Ve=e("loading"),Ne=l({cameras:!0,ships:!0,weather:!0,radar:!1}),Oe=l({onlineCameras:156,totalCameras:180,onlineShips:23,weather:"晴朗"}),Le=e([{id:1,name:"济宁港码头1号",lng:116.58,lat:35.38,status:"online",statusText:"在线",ip:"192.168.1.101",location:"济宁港主码头前沿",resolution:"4K",ptz:{pan:0,tilt:0,zoom:1},recording:!0,lastMaintenance:"2025-08-26",nextMaintenance:"2025-08-15",videoUrl:"rtsp://192.168.1.101:554/stream1"},{id:2,name:"京杭运河监控1号",lng:116.575,lat:35.385,status:"online",statusText:"在线",ip:"192.168.1.102",location:"京杭大运河济宁段",resolution:"4K",ptz:{pan:45,tilt:15,zoom:1.2},recording:!0,lastMaintenance:"2025-08-20",nextMaintenance:"2025-08-20",videoUrl:"rtsp://192.168.1.102:554/stream1"},{id:3,name:"梁山港监控1号",lng:116.65,lat:35.35,status:"online",statusText:"在线",ip:"192.168.1.103",location:"梁山港主码头",resolution:"4K",ptz:{pan:90,tilt:0,zoom:1},recording:!0,lastMaintenance:"2025-08-10",nextMaintenance:"2025-08-10",videoUrl:"rtsp://192.168.1.103:554/stream1"},{id:4,name:"济宁港监控2号",lng:116.585,lat:35.375,status:"online",statusText:"在线",ip:"192.168.1.104",location:"济宁港集装箱码头",resolution:"4K",ptz:{pan:180,tilt:-10,zoom:1.5},recording:!0,lastMaintenance:"2025-08-25",nextMaintenance:"2025-08-25",videoUrl:"rtsp://192.168.1.104:554/stream1"}]),Fe=e([{mmsi:"123456789",name:"中交润杨001",lng:116.578,lat:35.378,status:"normal",speed:12,course:180,destination:"济宁港",shipType:"集装箱船",length:300,width:45,draft:15.5,eta:"2025-08-15 14:30",etd:"2025-08-16 08:00",cargo:"电子产品、机械设备",crew:25,lastUpdate:"2025-08-14 10:15:30",trajectory:[{lng:116.576,lat:35.374,time:"2025-08-14 09:00:00"},{lng:116.577,lat:35.375,time:"2025-08-14 09:30:00"},{lng:116.578,lat:35.378,time:"2025-08-14 10:00:00"}]},{mmsi:"987654321",name:"济宁物流002",lng:116.652,lat:35.348,status:"warning",speed:8,course:90,destination:"梁山港",shipType:"散货船",length:280,width:42,draft:14.8,eta:"2025-08-16 16:00",etd:"2025-08-17 10:00",cargo:"铁矿石、煤炭",crew:22,lastUpdate:"2025-08-14 10:20:15",warningReason:"偏离航道",trajectory:[{lng:116.65,lat:35.346,time:"2025-08-14 09:15:00"},{lng:116.651,lat:35.347,time:"2025-08-14 09:45:00"},{lng:116.652,lat:35.348,time:"2025-08-14 10:15:00"}]},{mmsi:"456789123",name:"济宁航运003",lng:116.575,lat:35.384,status:"normal",speed:15,course:270,destination:"青岛港",shipType:"油轮",length:320,width:48,draft:16.2,eta:"2025-08-18 12:00",etd:"2025-08-19 06:00",cargo:"原油",crew:28,lastUpdate:"2025-08-14 10:25:45",trajectory:[{lng:116.577,lat:35.386,time:"2025-08-14 09:30:00"},{lng:116.576,lat:35.385,time:"2025-08-14 10:00:00"},{lng:116.575,lat:35.384,time:"2025-08-14 10:25:00"}]}]),He=e([{id:1,name:"济宁港气象站1",lng:116.577,lat:35.389,temperature:25,humidity:65,windSpeed:3.2,visibility:15,pressure:1013.25,windDirection:135,rainfall:0,uvIndex:6,airQuality:"优",lastUpdate:"2025-08-14 10:30:00",alerts:["能见度良好","风力适中"],forecast:[{time:"12:00",temp:26,weather:"晴",wind:3.5},{time:"15:00",temp:27,weather:"晴",wind:4},{time:"18:00",temp:24,weather:"多云",wind:3}]},{id:2,name:"梁山港气象站1",lng:116.657,lat:35.355,temperature:24,humidity:68,windSpeed:2.8,visibility:18,pressure:1012.8,windDirection:120,rainfall:0,uvIndex:5,airQuality:"良",lastUpdate:"2025-08-14 10:32:00",alerts:["温度适宜","湿度正常"],forecast:[{time:"12:00",temp:25,weather:"晴",wind:3},{time:"15:00",temp:26,weather:"晴",wind:3.5},{time:"18:00",temp:23,weather:"多云",wind:2.8}]}]),Qe=l({enabled:!0,rules:[{id:1,name:"摄像头离线检测",type:"camera",condition:"offline",level:"high",enabled:!0},{id:2,name:"船舶偏离航道",type:"ship",condition:"course_deviation",level:"medium",enabled:!0},{id:3,name:"能见度预警",type:"weather",condition:"visibility_low",level:"low",enabled:!0},{id:4,name:"船舶碰撞预警",type:"ship",condition:"collision_risk",level:"high",enabled:!0},{id:5,name:"恶劣天气预警",type:"weather",condition:"storm_warning",level:"medium",enabled:!0}]}),Ye=e([{id:1,name:"济宁港雷达站",lng:116.58,lat:35.38,range:5e3,frequency:"X波段",status:"online"},{id:2,name:"梁山港雷达站",lng:116.65,lat:35.35,range:4e3,frequency:"S波段",status:"online"}]),Xe=e([{id:1,name:"济宁港主航道",points:[[116.575,35.375],[116.585,35.385],[116.59,35.39]],width:200,depth:15,status:"active"},{id:2,name:"梁山港航道",points:[[116.645,35.345],[116.655,35.355],[116.66,35.36]],width:180,depth:12,status:"active"}]),Ge=l({enabled:!0,safeDistance:500,warningDistance:1e3,checkInterval:5e3}),Je=l({isPlaying:!1,currentCamera:null,quality:"HD",recording:!1}),al=l({isActive:!1,currentCamera:null,pan:0,tilt:0,zoom:1}),el=e([{id:1,level:"high",title:"摄像头离线告警",time:"10:30:15",type:"camera",deviceId:3,deviceName:"梁山港监控1号",description:"网络连接异常，已持续15分钟",status:"active",actions:["重启设备","检查网络","联系维护人员"]},{id:2,level:"medium",title:"船舶偏离航道",time:"10:25:42",type:"ship",deviceId:"987654321",deviceName:"济宁物流002",description:"船舶偏离主航道，距离航道中心线150米",status:"active",actions:["发送警告信息","记录轨迹","通知海事部门"]},{id:3,level:"low",title:"能见度降低",time:"10:20:18",type:"weather",deviceId:1,deviceName:"济宁港气象站1",description:"能见度降至15公里，建议船舶减速航行",status:"resolved",actions:["发布航行警告","调整航速限制"]},{id:4,level:"high",title:"船舶碰撞风险预警",time:"10:35:20",type:"ship",deviceId:"123456789",deviceName:"中交润杨001",description:"与济宁物流002距离过近，存在碰撞风险",status:"active",actions:["紧急避让","发送碰撞警告","记录事件"]}]),ll=()=>{Re&&(Be.forEach(a=>Re.remove(a)),Be=[],Ne.cameras&&Le.value.forEach(a=>{const e=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"data:image/svg+xml;base64,"+btoa('\n            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n              <circle cx="16" cy="16" r="14" fill="white" stroke="#1890ff" stroke-width="2"/>\n              <path d="M12 12h8v8h-8z" fill="#1890ff"/>\n              <circle cx="16" cy="16" r="3" fill="#1890ff"/>\n            </svg>\n          ')})});e.on("click",()=>hl(a)),Re.add(e),Be.push(e)}),Ne.ships&&Fe.value.forEach(a=>{const e=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"data:image/svg+xml;base64,"+btoa('\n            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n              <path d="M16 4l-4 8h8l-4-8z" fill="#52c41a"/>\n              <rect x="12" y="12" width="8" height="8" fill="#52c41a"/>\n            </svg>\n          ')})});e.on("click",()=>fl(a)),Re.add(e),Be.push(e)}),Ne.weather&&He.value.forEach(a=>{const e=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"data:image/svg+xml;base64,"+btoa('\n            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n              <circle cx="16" cy="16" r="14" fill="white" stroke="#1890ff" stroke-width="2"/>\n              <path d="M8 16c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z" fill="#1890ff"/>\n            </svg>\n          ')})});e.on("click",()=>wl(a)),Re.add(e),Be.push(e)}))},sl=a=>{console.log(`切换图层: ${a}`),"radar"===a?Ne.radar?nl():il():ll()},tl=()=>{Re&&Xe.value.forEach(a=>{const e=new AMap.Polygon({path:a.points,strokeColor:"#1890ff",strokeWeight:2,strokeOpacity:.8,fillColor:"#1890ff",fillOpacity:.1,strokeStyle:"dashed"}),l=new AMap.Text({text:a.name,position:a.points[1],style:{color:"#1890ff",fontSize:"12px",fontWeight:"bold"}});Re.add(e),Re.add(l)})},nl=()=>{Re&&Ne.radar&&Ye.value.forEach(a=>{const e=new AMap.Circle({center:[a.lng,a.lat],radius:a.range,strokeColor:"#52c41a",strokeWeight:1,strokeOpacity:.6,fillColor:"#52c41a",fillOpacity:.1}),l=new AMap.Marker({position:[a.lng,a.lat],title:a.name,icon:new AMap.Icon({size:new AMap.Size(24,24),image:"data:image/svg+xml;base64,"+btoa('\n          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="12" cy="12" r="10" fill="white" stroke="#52c41a" stroke-width="2"/>\n            <path d="M12 2l3 9h-6l3-9z" fill="#52c41a"/>\n            <circle cx="12" cy="12" r="3" fill="#52c41a"/>\n          </svg>\n        ')})});Re.add(e),Re.add(l)})},il=()=>{console.log("清除雷达覆盖")},ol=()=>{Ge.enabled&&setInterval(()=>{cl()},Ge.checkInterval)},cl=()=>{const a=Fe.value.length;for(let e=0;e<a;e++)for(let l=e+1;l<a;l++){const a=Fe.value[e],s=Fe.value[l],t=rl(a.lng,a.lat,s.lng,s.lat);t<Ge.safeDistance?pl(a,s,"high",t):t<Ge.warningDistance&&pl(a,s,"medium",t)}},rl=(a,e,l,s)=>{const t=(s-e)*Math.PI/180,n=(l-a)*Math.PI/180,i=Math.sin(t/2)*Math.sin(t/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},dl=l({lastWarningTime:0,warningInterval:2e4}),pl=(a,e,l,s)=>{const t=el.value.find(l=>l.deviceId===`${a.mmsi}-${e.mmsi}`&&"active"===l.status);if(t)return t.description=`两船距离${Math.round(s)}米，存在碰撞风险`,void(t.time=(new Date).toLocaleTimeString());const n={id:Date.now(),level:l,title:"船舶碰撞风险预警",time:(new Date).toLocaleTimeString(),type:"ship",deviceId:`${a.mmsi}-${e.mmsi}`,deviceName:`${a.name} 与 ${e.name}`,description:`两船距离${Math.round(s)}米，存在碰撞风险`,status:"active",actions:["紧急避让","发送碰撞警告","记录事件"]};el.value.unshift(n);const i=Date.now();"high"===l&&i-dl.lastWarningTime>=dl.warningInterval&&(I.error(`高风险碰撞预警：${a.name} 与 ${e.name}`),dl.lastWarningTime=i)},ul=()=>{Re&&(Re.setCenter(D.amap.defaultCenter),Re.setZoom(D.amap.defaultZoom))},vl=()=>{Re&&Re.setZoom(D.amap.defaultZoom)},ml=()=>{Re&&Re.setFitView()},hl=a=>{We.value={...a,type:"camera"},Re&&(Re.setCenter([a.lng,a.lat]),Re.setZoom(18))},fl=a=>{We.value={...a,type:"ship"},Re&&(Re.setCenter([a.lng,a.lat]),Re.setZoom(17))},wl=a=>{We.value={...a,type:"weather"},Re&&(Re.setCenter([a.lng,a.lat]),Re.setZoom(17))},gl=()=>{console.log("清除船舶轨迹")},yl=(a,e)=>{if(!al.currentCamera)return;const l=al.currentCamera;switch(a){case"pan":l.ptz.pan=e,al.pan=e;break;case"tilt":l.ptz.tilt=e,al.tilt=e;break;case"zoom":l.ptz.zoom=e,al.zoom=e}},bl=a=>{console.log("切换录制状态:",a.name),a.recording=!a.recording,a.recording?Je.recording=!0:Je.recording=!1},kl=l({lastWarningTime:0,warningInterval:2e4}),zl=()=>{Fe.value.forEach(a=>{a.lng+=1e-4*(Math.random()-.5),a.lat+=1e-4*(Math.random()-.5),a.lastUpdate=(new Date).toLocaleString()})},Ml=()=>{He.value.forEach(a=>{a.temperature+=2*(Math.random()-.5),a.humidity+=5*(Math.random()-.5),a.lastUpdate=(new Date).toLocaleString()})},Cl=()=>{Le.value.forEach(a=>{"offline"===a.status&&Math.random()>.8&&(a.status="online",a.statusText="在线",a.offlineReason=void 0)})},xl=a=>"camera"===a.type?"online"===a.status?"在线":"离线":"ship"===a.type?"normal"===a.status?"正常":"警告":"weather"===a.type?"正常":"未知";return s(async()=>{console.log("全景视图组件已挂载");const a=(()=>{const a=[];return a.push("高德地图API密钥未配置，请设置VITE_AMAP_API_KEY环境变量"),D.amap.defaultCenter&&Array.isArray(D.amap.defaultCenter)||a.push("高德地图默认中心点配置无效"),{isValid:0===a.length,errors:a}})();a.isValid||console.warn("地图配置警告:",a.errors);try{await new Promise((a,e)=>{if("undefined"!=typeof AMap)return void a(AMap);const l=document.createElement("script");l.src=`https://webapi.amap.com/maps?v=${D.amap.version}&key=${D.amap.apiKey}&plugin=${D.amap.plugins.join(",")}`,l.onload=()=>a(AMap),l.onerror=e,document.head.appendChild(l)}),(()=>{if("undefined"==typeof AMap)return console.error("高德地图API未加载"),void(Ve.value="error");try{Re=new AMap.Map("amap-container",{zoom:D.amap.defaultZoom,center:D.amap.defaultCenter,mapStyle:D.amap.mapStyle,features:D.amap.features,viewMode:D.amap.viewMode}),Re.addControl(new AMap.Scale),Re.addControl(new AMap.ToolBar),Re.addControl(new AMap.MapType),ll(),tl(),nl(),ol(),Ve.value="ready",console.log("地图初始化成功")}catch(a){console.error("地图初始化失败:",a),Ve.value="error"}})(),qe=setInterval(()=>{zl(),Ml(),Cl()},3e4)}catch(e){console.error("加载地图失败:",e)}}),t(()=>{console.log("全景视图组件已卸载"),qe&&(clearInterval(qe),qe=null),Re&&Re.destroy()}),(a,e)=>{const l=u("a-checkbox"),s=u("a-space"),t=u("a-card"),D=u("a-button"),qe=u("a-spin"),Be=u("a-tag"),Le=u("a-switch"),Fe=u("a-slider"),He=u("a-button-group"),Ye=u("a-select-option"),Xe=u("a-select");return n(),i("div",$,[e[87]||(e[87]=o("div",{class:"page-header"},[o("h2",null,"全景视图"),o("p",null,"在真实地图上，集成显示山东省济宁市济宁港和梁山港水域区域摄像头点位、船舶AIS位置、气象水文站等要素")],-1)),o("div",E,[o("div",Z,[c(t,{title:"图层控制",size:"small",class:"toolbar-card"},{default:r(()=>[c(s,{direction:"vertical",style:{width:"100%"}},{default:r(()=>[c(l,{checked:Ne.cameras,"onUpdate:checked":e[0]||(e[0]=a=>Ne.cameras=a),onChange:e[1]||(e[1]=a=>sl("cameras"))},{icon:r(()=>[c(v(y))]),default:r(()=>[e[26]||(e[26]=m(" 摄像头点位 ",-1))]),_:1},8,["checked"]),c(l,{checked:Ne.ships,"onUpdate:checked":e[2]||(e[2]=a=>Ne.ships=a),onChange:e[3]||(e[3]=a=>sl("ships"))},{icon:r(()=>[c(v(b))]),default:r(()=>[e[27]||(e[27]=m(" 船舶AIS位置 ",-1))]),_:1},8,["checked"]),c(l,{checked:Ne.weather,"onUpdate:checked":e[4]||(e[4]=a=>Ne.weather=a),onChange:e[5]||(e[5]=a=>sl("weather"))},{icon:r(()=>[c(v(k))]),default:r(()=>[e[28]||(e[28]=m(" 气象水文站 ",-1))]),_:1},8,["checked"]),c(l,{checked:Ne.radar,"onUpdate:checked":e[6]||(e[6]=a=>Ne.radar=a),onChange:e[7]||(e[7]=a=>sl("radar"))},{icon:r(()=>[c(v(z))]),default:r(()=>[e[29]||(e[29]=m(" 雷达覆盖 ",-1))]),_:1},8,["checked"])]),_:1})]),_:1}),c(t,{title:"快速操作",size:"small",class:"toolbar-card"},{default:r(()=>[c(s,{direction:"vertical",style:{width:"100%"}},{default:r(()=>[c(D,{type:"primary",size:"small",onClick:ul,class:"action-btn"},{icon:r(()=>[c(v(M))]),default:r(()=>[e[30]||(e[30]=m(" 居中显示 ",-1))]),_:1}),c(D,{size:"small",onClick:vl,class:"action-btn"},{icon:r(()=>[c(v(C))]),default:r(()=>[e[31]||(e[31]=m(" 重置缩放 ",-1))]),_:1}),c(D,{size:"small",onClick:ml,class:"action-btn"},{icon:r(()=>[c(v(x))]),default:r(()=>[e[32]||(e[32]=m(" 全屏显示 ",-1))]),_:1})]),_:1})]),_:1}),c(t,{title:"实时信息",size:"small",class:"toolbar-card"},{default:r(()=>[o("div",j,[e[33]||(e[33]=o("span",{class:"label"},"在线摄像头:",-1)),o("span",W,h(Oe.onlineCameras)+"/"+h(Oe.totalCameras),1)]),o("div",K,[e[34]||(e[34]=o("span",{class:"label"},"在线船舶:",-1)),o("span",q,h(Oe.onlineShips),1)]),o("div",R,[e[35]||(e[35]=o("span",{class:"label"},"天气状况:",-1)),o("span",B,h(Oe.weather),1)])]),_:1})]),o("div",V,[o("div",{class:"map-container",ref_key:"mapContainer",ref:U},[e[38]||(e[38]=o("div",{id:"amap-container",class:"amap-container"},null,-1)),"ready"!==Ve.value?(n(),i("div",N,[c(qe,{size:"large"},{indicator:r(()=>[c(v(T),{style:{"font-size":"24px"}})]),_:1}),e[37]||(e[37]=o("div",{class:"loading-text"},"地图加载中...",-1)),"error"===Ve.value?(n(),i("div",O,[...e[36]||(e[36]=[o("p",null,"地图加载失败，可能的原因：",-1),o("ul",null,[o("li",null,"高德地图API密钥未配置"),o("li",null,"网络连接问题"),o("li",null,"API调用限制")],-1),o("p",null,"请检查环境变量配置或联系管理员",-1)])])):d("",!0)])):d("",!0)],512)]),o("div",L,[We.value?(n(),p(t,{key:0,title:"选中对象信息",size:"small",class:"info-card"},{default:r(()=>{return[o("div",F,[o("div",H,[o("h4",null,h(We.value.name||We.value.title),1),c(Be,{color:(a=We.value,"camera"===a.type?"online"===a.status?"success":"error":"ship"===a.type?"normal"===a.status?"success":"warning":"weather"===a.type?"processing":"default"),size:"small"},{default:r(()=>[m(h(xl(We.value)),1)]),_:1},8,["color"])]),o("div",Q,["camera"===We.value.type?(n(),i(f,{key:0},[o("div",Y,[e[39]||(e[39]=o("span",{class:"label"},"状态:",-1)),o("span",{class:w(["status",We.value.status])},h(We.value.statusText),3)]),o("div",X,[e[40]||(e[40]=o("span",{class:"label"},"IP地址:",-1)),o("span",G,h(We.value.ip),1)]),o("div",J,[e[41]||(e[41]=o("span",{class:"label"},"位置:",-1)),o("span",aa,h(We.value.location),1)]),o("div",ea,[e[42]||(e[42]=o("span",{class:"label"},"分辨率:",-1)),o("span",la,h(We.value.resolution),1)]),o("div",sa,[e[43]||(e[43]=o("span",{class:"label"},"录像状态:",-1)),o("span",{class:w(["status",We.value.recording?"online":"offline"])},h(We.value.recording?"录制中":"未录制"),3)]),o("div",ta,[e[44]||(e[44]=o("span",{class:"label"},"PTZ控制:",-1)),o("span",na,"P:"+h(We.value.ptz.pan)+"° T:"+h(We.value.ptz.tilt)+"° Z:"+h(We.value.ptz.zoom)+"x",1)]),o("div",ia,[e[45]||(e[45]=o("span",{class:"label"},"维护信息:",-1)),o("span",oa,"上次:"+h(We.value.lastMaintenance)+" | 下次:"+h(We.value.nextMaintenance),1)]),"offline"===We.value.status&&We.value.offlineReason?(n(),i("div",ca,[e[46]||(e[46]=o("span",{class:"label"},"离线原因:",-1)),o("span",ra,h(We.value.offlineReason),1)])):d("",!0),o("div",da,[c(D,{type:"primary",size:"small",onClick:e[8]||(e[8]=a=>{return e=We.value,console.log("打开摄像头:",e.name),Je.currentCamera=e,void(Je.isPlaying=!0);var e}),class:"action-btn"},{icon:r(()=>[c(v(_))]),default:r(()=>[e[47]||(e[47]=m(" 打开视频 ",-1))]),_:1}),c(D,{size:"small",onClick:e[9]||(e[9]=a=>{return e=We.value,console.log("PTZ控制:",e.name),al.isActive=!0,al.currentCamera=e,al.pan=e.ptz.pan,al.tilt=e.ptz.tilt,void(al.zoom=e.ptz.zoom);var e}),class:"action-btn"},{icon:r(()=>[c(v(M))]),default:r(()=>[e[48]||(e[48]=m(" PTZ控制 ",-1))]),_:1}),c(D,{size:"small",onClick:e[10]||(e[10]=a=>bl(We.value)),class:"action-btn"},{icon:r(()=>[c(v(y))]),default:r(()=>[m(" "+h(We.value.recording?"停止录制":"开始录制"),1)]),_:1})])],64)):"ship"===We.value.type?(n(),i(f,{key:1},[o("div",pa,[e[49]||(e[49]=o("span",{class:"label"},"MMSI:",-1)),o("span",ua,h(We.value.mmsi),1)]),o("div",va,[e[50]||(e[50]=o("span",{class:"label"},"船舶类型:",-1)),o("span",ma,h(We.value.shipType),1)]),o("div",ha,[e[51]||(e[51]=o("span",{class:"label"},"航速:",-1)),o("span",fa,h(We.value.speed)+"节",1)]),o("div",wa,[e[52]||(e[52]=o("span",{class:"label"},"航向:",-1)),o("span",ga,h(We.value.course)+"°",1)]),o("div",ya,[e[53]||(e[53]=o("span",{class:"label"},"目的地:",-1)),o("span",ba,h(We.value.destination),1)]),o("div",ka,[e[54]||(e[54]=o("span",{class:"label"},"预计到达:",-1)),o("span",za,h(We.value.eta),1)]),o("div",Ma,[e[55]||(e[55]=o("span",{class:"label"},"预计离港:",-1)),o("span",Ca,h(We.value.etd),1)]),o("div",xa,[e[56]||(e[56]=o("span",{class:"label"},"货物:",-1)),o("span",_a,h(We.value.cargo),1)]),o("div",Aa,[e[57]||(e[57]=o("span",{class:"label"},"船员数量:",-1)),o("span",Ia,h(We.value.crew)+"人",1)]),o("div",Ta,[e[58]||(e[58]=o("span",{class:"label"},"最后更新:",-1)),o("span",Sa,h(We.value.lastUpdate),1)]),"warning"===We.value.status&&We.value.warningReason?(n(),i("div",Pa,[e[59]||(e[59]=o("span",{class:"label"},"警告原因:",-1)),o("span",Ua,h(We.value.warningReason),1)])):d("",!0),o("div",Da,[c(D,{type:"primary",size:"small",onClick:e[11]||(e[11]=a=>{return e=We.value,void console.log("跟踪船舶:",e.name);var e}),class:"action-btn"},{icon:r(()=>[c(v(z))]),default:r(()=>[e[60]||(e[60]=m(" 跟踪船舶 ",-1))]),_:1}),c(D,{size:"small",onClick:e[12]||(e[12]=a=>(a=>{if(console.log("显示船舶轨迹:",a.name),!Re)return;gl();const e=a.trajectory.map(a=>[a.lng,a.lat]),l=new AMap.Polyline({path:e,strokeColor:"#1890ff",strokeWeight:3,strokeOpacity:.8,strokeStyle:"solid"});a.trajectory.forEach((e,l)=>{const s=new AMap.Marker({position:[e.lng,e.lat],title:`${a.name} - ${e.time}`,icon:new AMap.Icon({size:new AMap.Size(16,16),image:"data:image/svg+xml;base64,"+btoa(`\n        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n          <circle cx="8" cy="8" r="6" fill="#1890ff" stroke="white" stroke-width="2"/>\n          <text x="8" y="10" text-anchor="middle" fill="white" font-size="8">${l+1}</text>\n        </svg>\n      `)})});Re.add(s)}),Re.add(l),Re.setFitView([l])})(We.value)),class:"action-btn"},{icon:r(()=>[c(v(M))]),default:r(()=>[e[61]||(e[61]=m(" 查看轨迹 ",-1))]),_:1}),c(D,{size:"small",onClick:e[13]||(e[13]=a=>(a=>{console.log("发送警告:",a.name);const e=Date.now();e-kl.lastWarningTime>=kl.warningInterval&&(I.warning(`已向船舶 ${a.name} 发送警告信息`),kl.lastWarningTime=e)})(We.value)),class:"action-btn"},{icon:r(()=>[c(v(A))]),default:r(()=>[e[62]||(e[62]=m(" 发送警告 ",-1))]),_:1})])],64)):"weather"===We.value.type?(n(),i(f,{key:2},[o("div",$a,[e[63]||(e[63]=o("span",{class:"label"},"温度:",-1)),o("span",Ea,h(We.value.temperature)+"°C",1)]),o("div",Za,[e[64]||(e[64]=o("span",{class:"label"},"湿度:",-1)),o("span",ja,h(We.value.humidity)+"%",1)]),o("div",Wa,[e[65]||(e[65]=o("span",{class:"label"},"风速:",-1)),o("span",Ka,h(We.value.windSpeed)+"m/s",1)]),o("div",qa,[e[66]||(e[66]=o("span",{class:"label"},"风向:",-1)),o("span",Ra,h(We.value.windDirection)+"°",1)]),o("div",Ba,[e[67]||(e[67]=o("span",{class:"label"},"能见度:",-1)),o("span",Va,h(We.value.visibility)+"km",1)]),o("div",Na,[e[68]||(e[68]=o("span",{class:"label"},"气压:",-1)),o("span",Oa,h(We.value.pressure)+"hPa",1)]),o("div",La,[e[69]||(e[69]=o("span",{class:"label"},"降雨量:",-1)),o("span",Fa,h(We.value.rainfall)+"mm",1)]),o("div",Ha,[e[70]||(e[70]=o("span",{class:"label"},"紫外线指数:",-1)),o("span",Qa,h(We.value.uvIndex),1)]),o("div",Ya,[e[71]||(e[71]=o("span",{class:"label"},"空气质量:",-1)),o("span",Xa,h(We.value.airQuality),1)]),o("div",Ga,[e[72]||(e[72]=o("span",{class:"label"},"最后更新:",-1)),o("span",Ja,h(We.value.lastUpdate),1)]),o("div",ae,[e[73]||(e[73]=o("div",{class:"info-row"},[o("span",{class:"label"},"监测提醒:")],-1)),o("div",ee,[(n(!0),i(f,null,g(We.value.alerts,a=>(n(),p(Be,{key:a,size:"small",color:"blue"},{default:r(()=>[m(h(a),1)]),_:2},1024))),128))])]),o("div",le,[e[74]||(e[74]=o("div",{class:"info-row"},[o("span",{class:"label"},"天气预报:")],-1)),o("div",se,[(n(!0),i(f,null,g(We.value.forecast,a=>(n(),i("div",{key:a.time,class:"forecast-item"},[o("span",te,h(a.time),1),o("span",ne,h(a.temp)+"°C",1),o("span",ie,h(a.weather),1),o("span",oe,h(a.wind)+"m/s",1)]))),128))])])],64)):d("",!0)])])];var a}),_:1})):d("",!0),c(t,{title:"智能告警系统",size:"small",class:"info-card"},{default:r(()=>[o("div",ce,[c(Le,{checked:Qe.enabled,"onUpdate:checked":e[14]||(e[14]=a=>Qe.enabled=a),size:"small"},null,8,["checked"]),o("span",re,h(Qe.enabled?"已启用":"已禁用"),1)]),o("div",de,[(n(!0),i(f,null,g(el.value,a=>(n(),i("div",{key:a.id,class:w(["alarm-item",[a.level,a.status]]),onClick:e=>(a=>{Ke.value=a,console.log("选中告警:",a.title)})(a)},[o("div",ue,["high"===a.level?(n(),p(v(S),{key:0})):"medium"===a.level?(n(),p(v(A),{key:1})):(n(),p(v(P),{key:2}))]),o("div",ve,[o("div",me,h(a.title),1),o("div",he,h(a.description),1),o("div",fe,[o("span",we,h(a.time),1),o("span",ge,h(a.deviceName),1),c(Be,{color:"active"===a.status?"blue":"green",size:"small"},{default:r(()=>[m(h("active"===a.status?"活跃":"已解决"),1)]),_:2},1032,["color"])])])],10,pe))),128))]),Ke.value?(n(),i("div",ye,[e[75]||(e[75]=o("div",{class:"action-title"},"建议操作:",-1)),o("div",be,[(n(!0),i(f,null,g(Ke.value.actions,a=>(n(),p(D,{key:a,size:"small",type:"primary",onClick:e=>((a,e)=>{console.log("执行操作:",e,"告警:",a.title)})(Ke.value,a)},{default:r(()=>[m(h(a),1)]),_:2},1032,["onClick"]))),128))])])):d("",!0)]),_:1}),al.isActive?(n(),p(t,{key:1,title:"PTZ控制",size:"small",class:"info-card"},{default:r(()=>{var a;return[o("div",ke,[o("div",ze,[e[76]||(e[76]=o("span",{class:"label"},"当前摄像头:",-1)),o("span",Me,h(null==(a=al.currentCamera)?void 0:a.name),1)]),o("div",Ce,[o("div",xe,[e[77]||(e[77]=o("span",{class:"label"},"水平旋转 (Pan):",-1)),c(Fe,{value:al.pan,"onUpdate:value":e[15]||(e[15]=a=>al.pan=a),min:-180,max:180,step:1,onChange:e[16]||(e[16]=a=>yl("pan",a))},null,8,["value"]),o("span",_e,h(al.pan)+"°",1)]),o("div",Ae,[e[78]||(e[78]=o("span",{class:"label"},"垂直倾斜 (Tilt):",-1)),c(Fe,{value:al.tilt,"onUpdate:value":e[17]||(e[17]=a=>al.tilt=a),min:-90,max:90,step:1,onChange:e[18]||(e[18]=a=>yl("tilt",a))},null,8,["value"]),o("span",Ie,h(al.tilt)+"°",1)]),o("div",Te,[e[79]||(e[79]=o("span",{class:"label"},"缩放 (Zoom):",-1)),c(Fe,{value:al.zoom,"onUpdate:value":e[19]||(e[19]=a=>al.zoom=a),min:1,max:10,step:.1,onChange:e[20]||(e[20]=a=>yl("zoom",a))},null,8,["value"]),o("span",Se,h(al.zoom)+"x",1)])]),o("div",Pe,[c(D,{size:"small",onClick:e[21]||(e[21]=a=>al.isActive=!1)},{default:r(()=>[...e[80]||(e[80]=[m("关闭控制",-1)])]),_:1}),c(D,{size:"small",type:"primary",onClick:e[22]||(e[22]=a=>yl("reset",0))},{default:r(()=>[...e[81]||(e[81]=[m("重置位置",-1)])]),_:1})])])]}),_:1})):d("",!0),Je.isPlaying?(n(),p(t,{key:2,title:"视频监控",size:"small",class:"info-card"},{default:r(()=>{var a;return[o("div",Ue,[o("div",De,[e[82]||(e[82]=o("span",{class:"label"},"摄像头:",-1)),o("span",$e,h(null==(a=Je.currentCamera)?void 0:a.name),1)]),o("div",Ee,[c(He,null,{default:r(()=>[c(D,{size:"small",onClick:e[23]||(e[23]=a=>Je.isPlaying=!1)},{icon:r(()=>[c(v(_))]),default:r(()=>[e[83]||(e[83]=m(" 停止播放 ",-1))]),_:1}),c(D,{size:"small",onClick:e[24]||(e[24]=a=>bl(Je.currentCamera))},{icon:r(()=>[c(v(y))]),default:r(()=>[m(" "+h(Je.recording?"停止录制":"开始录制"),1)]),_:1})]),_:1})]),o("div",Ze,[e[86]||(e[86]=o("span",{class:"label"},"画质:",-1)),c(Xe,{value:Je.quality,"onUpdate:value":e[25]||(e[25]=a=>Je.quality=a),size:"small",style:{width:"80px"}},{default:r(()=>[c(Ye,{value:"HD"},{default:r(()=>[...e[84]||(e[84]=[m("HD",-1)])]),_:1}),c(Ye,{value:"4K"},{default:r(()=>[...e[85]||(e[85]=[m("4K",-1)])]),_:1})]),_:1},8,["value"])]),o("div",je,[c(Be,{color:Je.recording?"red":"green"},{default:r(()=>[m(h(Je.recording?"录制中":"未录制"),1)]),_:1},8,["color"])])])]}),_:1})):d("",!0)])])])}}}),[["__scopeId","data-v-1a0eac2f"]]);export{We as default};
