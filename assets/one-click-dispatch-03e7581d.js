import{d as e,f as a,r as t,o as s,V as l,W as i,a0 as r,k as n,$ as u,X as o,u as c,a3 as d,F as p,a1 as m,_ as v,G as y,B as f,a7 as _}from"./vendor-f41c3cc7.js";import{a1 as g,k,T as h}from"./icons-15893848.js";import{m as x,E as b,M as w}from"./antd-fa5730cf.js";import{_ as T}from"./index-781a1167.js";const C={class:"one-click-dispatch"},I={class:"quick-actions"},N={class:"action-icon"},U={class:"action-icon"},j={class:"action-icon"},q={class:"action-icon"},z={class:"dispatch-status"},O={class:"status-item"},$={class:"status-value active"},D={class:"status-item"},S={class:"status-value waiting"},F={class:"status-item"},L={class:"status-value completed"},R={class:"quick-plans"},B=["onClick"],E={class:"plan-header"},G={class:"plan-name"},M={class:"plan-desc"},V={class:"plan-resources"},W={class:"resource-value"},X={class:"plan-actions"},A={class:"recent-records"},H=T(e({__name:"one-click-dispatch",setup(e){const T=a(!1),H=a("执行调度"),J=a(!1),K=a(!1),P=a({}),Q=a({}),Y=a(23),Z=a(15),ee=a(1247),ae=a([{id:"1",name:"船舶碰撞应急响应",type:"emergency",priority:"high",description:"立即启动船舶碰撞事故应急响应预案",resources:"监控摄像头、无人机、救援船只",scenarios:"船舶碰撞事故应急响应",steps:"1. 立即启动应急响应\n2. 调取相关监控画面\n3. 协调救援资源\n4. 现场指挥调度"},{id:"2",name:"日常航道巡查",type:"routine",priority:"medium",description:"启动日常航道安全巡查任务",resources:"固定监控点、移动巡查设备",scenarios:"日常航道安全巡查",steps:"1. 制定巡查计划\n2. 分配巡查资源\n3. 执行巡查任务\n4. 记录巡查结果"},{id:"3",name:"恶劣天气专项检查",type:"special",priority:"high",description:"执行恶劣天气下的专项安全检查",resources:"全天候监控设备、应急通讯设备",scenarios:"台风、暴雨等恶劣天气下的安全检查",steps:"1. 启动恶劣天气预警\n2. 加强监控频次\n3. 重点区域巡查\n4. 应急响应准备"},{id:"4",name:"船舶搁浅救援调度",type:"emergency",priority:"high",description:"启动船舶搁浅事故救援调度预案",resources:"拖船、救援船只、潜水设备",scenarios:"船舶搁浅事故救援",steps:"1. 评估搁浅情况\n2. 调派救援船只\n3. 现场救援指挥\n4. 航道疏通作业"},{id:"5",name:"火灾事故应急调度",type:"emergency",priority:"high",description:"启动船舶火灾事故应急调度预案",resources:"消防船、灭火设备、救援船只",scenarios:"船舶火灾事故应急",steps:"1. 火情快速评估\n2. 调派消防资源\n3. 人员疏散指挥\n4. 火势控制扑救"},{id:"6",name:"人员落水搜救调度",type:"emergency",priority:"high",description:"启动人员落水搜救调度预案",resources:"搜救船只、潜水设备、医疗设备",scenarios:"人员落水搜救",steps:"1. 确定落水位置\n2. 调派搜救资源\n3. 现场搜救指挥\n4. 医疗救援准备"},{id:"7",name:"货物泄漏应急调度",type:"emergency",priority:"medium",description:"启动货物泄漏事故应急调度预案",resources:"围油栏、吸油设备、监测设备",scenarios:"货物泄漏事故应急",steps:"1. 泄漏范围评估\n2. 调派应急设备\n3. 污染控制作业\n4. 环境监测评估"},{id:"8",name:"航道堵塞疏通调度",type:"special",priority:"medium",description:"启动航道堵塞疏通调度预案",resources:"疏浚设备、拖船、监测设备",scenarios:"航道堵塞疏通",steps:"1. 堵塞情况评估\n2. 调派疏通设备\n3. 疏通作业指挥\n4. 航道恢复确认"}]),te=a([...ae.value,{id:"9",name:"多部门协同调度",type:"coordination",priority:"medium",description:"启动多部门协同调度预案",resources:"各部门监控资源、通讯设备",scenarios:"需要多部门协同的重大事件",steps:"1. 启动协同调度\n2. 协调各部门资源\n3. 统一指挥调度\n4. 信息共享反馈"},{id:"10",name:"船舶失控应急调度",type:"emergency",priority:"high",description:"启动船舶失控事故应急调度预案",resources:"拖船、救援船只、通讯设备",scenarios:"船舶失控事故应急",steps:"1. 失控情况评估\n2. 调派救援资源\n3. 现场指挥调度\n4. 船舶控制恢复"},{id:"11",name:"锚链断裂应急调度",type:"emergency",priority:"medium",description:"启动锚链断裂事故应急调度预案",resources:"拖船、锚链设备、监测设备",scenarios:"锚链断裂事故应急",steps:"1. 断裂情况评估\n2. 调派拖船资源\n3. 现场应急处理\n4. 安全锚泊恢复"},{id:"12",name:"船舶沉没应急调度",type:"emergency",priority:"high",description:"启动船舶沉没事故应急调度预案",resources:"打捞设备、潜水设备、监测设备",scenarios:"船舶沉没事故应急",steps:"1. 沉没位置确定\n2. 调派打捞资源\n3. 现场打捞指挥\n4. 航道安全评估"},{id:"13",name:"船舶倾覆救援调度",type:"emergency",priority:"high",description:"启动船舶倾覆事故救援调度预案",resources:"救援船只、起重设备、医疗设备",scenarios:"船舶倾覆事故救援",steps:"1. 倾覆情况评估\n2. 调派救援资源\n3. 现场救援指挥\n4. 人员救援处理"},{id:"14",name:"船舶进水应急调度",type:"emergency",priority:"medium",description:"启动船舶进水事故应急调度预案",resources:"抽水设备、救援船只、监测设备",scenarios:"船舶进水事故应急",steps:"1. 进水情况评估\n2. 调派抽水设备\n3. 现场应急处理\n4. 船舶安全恢复"},{id:"15",name:"船舶触礁应急调度",type:"emergency",priority:"medium",description:"启动船舶触礁事故应急调度预案",resources:"拖船、救援船只、监测设备",scenarios:"船舶触礁事故应急",steps:"1. 触礁情况评估\n2. 调派救援资源\n3. 现场应急处理\n4. 船舶脱险恢复"}]),se=a([{id:"1",taskName:"船舶碰撞应急响应",type:"emergency",status:"executing",startTime:"2025-08-20 14:30:00",executor:"张三",result:"正在执行中"},{id:"2",taskName:"日常航道巡查",type:"routine",status:"completed",startTime:"2025-08-20 09:00:00",endTime:"2025-08-20 12:00:00",executor:"李四",result:"巡查完成，发现2处安全隐患"},{id:"3",taskName:"恶劣天气专项检查",type:"special",status:"waiting",startTime:"2025-08-20 16:00:00",executor:"王五",result:"等待天气条件满足"},{id:"4",taskName:"船舶搁浅救援调度",type:"emergency",status:"completed",startTime:"2025-08-19 08:15:00",endTime:"2025-08-19 16:30:00",executor:"赵六",result:"救援完成，船舶成功脱险"},{id:"5",taskName:"火灾事故应急调度",type:"emergency",status:"completed",startTime:"2025-08-19 22:45:00",endTime:"2025-08-20 03:20:00",executor:"钱七",result:"火势已控制，无人员伤亡"},{id:"6",taskName:"人员落水搜救调度",type:"emergency",status:"completed",startTime:"2025-08-18 15:20:00",endTime:"2025-08-18 18:45:00",executor:"孙八",result:"搜救完成，落水人员已获救"},{id:"7",taskName:"货物泄漏应急调度",type:"emergency",status:"executing",startTime:"2025-08-20 10:30:00",executor:"周九",result:"正在清理泄漏货物"},{id:"8",taskName:"航道堵塞疏通调度",type:"special",status:"executing",startTime:"2025-08-20 07:00:00",executor:"吴十",result:"疏通作业进行中"},{id:"9",taskName:"多部门协同调度",type:"coordination",status:"waiting",startTime:"2025-08-20 18:00:00",executor:"郑十一",result:"等待各部门协调确认"},{id:"10",taskName:"船舶失控应急调度",type:"emergency",status:"completed",startTime:"2025-08-17 12:15:00",endTime:"2025-08-17 20:30:00",executor:"王十二",result:"船舶已控制，恢复正常航行"}]),le=a(),ie=t({type:"",planId:"",scope:"",priority:"",remark:""}),re={type:[{required:!0,message:"请选择调度类型"}],planId:[{required:!0,message:"请选择预案"}],scope:[{required:!0,message:"请描述调度范围"}],priority:[{required:!0,message:"请选择优先级"}]},ne=[{title:"任务名称",dataIndex:"taskName",key:"taskName",width:200},{title:"调度类型",dataIndex:"type",key:"type",width:120,customRender:({text:e})=>ue(e)},{title:"执行状态",dataIndex:"status",key:"status",width:100},{title:"开始时间",dataIndex:"startTime",key:"startTime",width:180},{title:"执行人员",dataIndex:"executor",key:"executor",width:100},{title:"操作",key:"action",width:120,fixed:"right"}],ue=e=>({emergency:"紧急调度",routine:"例行调度",special:"专项调度",coordination:"协同调度"}[e]||e),oe=e=>({high:"red",medium:"orange",low:"blue"}[e]||"default"),ce=e=>({high:"高",medium:"中",low:"低"}[e]||e),de=e=>({executing:"blue",waiting:"orange",completed:"green",failed:"red"}[e]||"default"),pe=e=>({executing:"执行中",waiting:"等待中",completed:"已完成",failed:"执行失败"}[e]||e),me=()=>{ie.type="emergency",ie.priority="high",H.value="紧急调度",T.value=!0},ve=()=>{ie.type="routine",ie.priority="medium",H.value="例行调度",T.value=!0},ye=()=>{ie.type="special",ie.priority="high",H.value="专项调度",T.value=!0},fe=()=>{ie.type="coordination",ie.priority="medium",H.value="协同调度",T.value=!0},_e=()=>{var e;null==(e=le.value)||e.validate().then(()=>{var e;const a={id:Date.now().toString(),taskName:(null==(e=te.value.find(e=>e.id===ie.planId))?void 0:e.name)||"",type:ie.type,status:"executing",startTime:(new Date).toLocaleString(),executor:"当前用户",result:"正在执行中"};se.value.unshift(a),Y.value++,x.success("调度任务已启动"),T.value=!1,Object.assign(ie,{type:"",planId:"",scope:"",priority:"",remark:""})})},ge=()=>{T.value=!1,Object.assign(ie,{type:"",planId:"",scope:"",priority:"",remark:""})};return s(()=>{}),(e,a)=>{const t=o("a-card"),s=o("a-col"),ke=o("a-row"),he=o("a-tag"),xe=o("a-button"),be=o("a-space"),we=o("a-table"),Te=o("a-select-option"),Ce=o("a-select"),Ie=o("a-form-item"),Ne=o("a-textarea"),Ue=o("a-form"),je=o("a-modal"),qe=o("a-descriptions-item"),ze=o("a-descriptions");return l(),i("div",C,[a[34]||(a[34]=r("div",{class:"page-header"},[r("h1",null,"一键调度"),r("p",null,"快速响应紧急情况，一键启动视频调度预案，实现资源快速调配")],-1)),r("div",I,[n(ke,{gutter:16},{default:u(()=>[n(s,{span:6},{default:u(()=>[n(t,{class:"action-card emergency",onClick:me},{default:u(()=>[r("div",N,[n(c(b))]),a[8]||(a[8]=r("div",{class:"action-title"},"紧急调度",-1)),a[9]||(a[9]=r("div",{class:"action-desc"},"立即启动应急响应",-1))]),_:1})]),_:1}),n(s,{span:6},{default:u(()=>[n(t,{class:"action-card routine",onClick:ve},{default:u(()=>[r("div",U,[n(c(g))]),a[10]||(a[10]=r("div",{class:"action-title"},"例行调度",-1)),a[11]||(a[11]=r("div",{class:"action-desc"},"启动日常巡查任务",-1))]),_:1})]),_:1}),n(s,{span:6},{default:u(()=>[n(t,{class:"action-card special",onClick:ye},{default:u(()=>[r("div",j,[n(c(k))]),a[12]||(a[12]=r("div",{class:"action-title"},"专项调度",-1)),a[13]||(a[13]=r("div",{class:"action-desc"},"执行专项检查任务",-1))]),_:1})]),_:1}),n(s,{span:6},{default:u(()=>[n(t,{class:"action-card coordination",onClick:fe},{default:u(()=>[r("div",q,[n(c(h))]),a[14]||(a[14]=r("div",{class:"action-title"},"协同调度",-1)),a[15]||(a[15]=r("div",{class:"action-desc"},"多部门协同行动",-1))]),_:1})]),_:1})]),_:1})]),r("div",z,[n(t,{title:"调度状态监控",class:"status-card"},{default:u(()=>[n(ke,{gutter:16},{default:u(()=>[n(s,{span:8},{default:u(()=>[r("div",O,[a[16]||(a[16]=r("div",{class:"status-label"},"正在执行",-1)),r("div",$,d(Y.value),1),a[17]||(a[17]=r("div",{class:"status-unit"},"个任务",-1))])]),_:1}),n(s,{span:8},{default:u(()=>[r("div",D,[a[18]||(a[18]=r("div",{class:"status-label"},"等待中",-1)),r("div",S,d(Z.value),1),a[19]||(a[19]=r("div",{class:"status-unit"},"个任务",-1))])]),_:1}),n(s,{span:8},{default:u(()=>[r("div",F,[a[20]||(a[20]=r("div",{class:"status-label"},"已完成",-1)),r("div",L,d(ee.value),1),a[21]||(a[21]=r("div",{class:"status-unit"},"个任务",-1))])]),_:1})]),_:1})]),_:1})]),r("div",R,[n(t,{title:"快速预案选择",class:"plans-card"},{default:u(()=>[n(ke,{gutter:16},{default:u(()=>[(l(!0),i(p,null,m(ae.value,e=>(l(),v(s,{span:8,key:e.id},{default:u(()=>[r("div",{class:"plan-item",onClick:a=>(e=>{ie.planId=e.id,ie.type=e.type,ie.priority=e.priority,H.value=`执行预案：${e.name}`,T.value=!0})(e)},[r("div",E,[r("span",G,d(e.name),1),n(he,{color:oe(e.priority),size:"small"},{default:u(()=>[y(d(ce(e.priority)),1)]),_:2},1032,["color"])]),r("div",M,d(e.description),1),r("div",V,[a[22]||(a[22]=r("span",{class:"resource-label"},"资源：",-1)),r("span",W,d(e.resources),1)]),r("div",X,[n(xe,{type:"primary",size:"small",onClick:f(a=>(e=>{ie.planId=e.id,ie.type=e.type,ie.priority=e.priority,H.value=`执行预案：${e.name}`,T.value=!0})(e),["stop"])},{default:u(()=>[...a[23]||(a[23]=[y(" 执行 ",-1)])]),_:2},1032,["onClick"]),n(xe,{size:"small",onClick:f(a=>(e=>{P.value=e,J.value=!0})(e),["stop"])},{default:u(()=>[...a[24]||(a[24]=[y(" 详情 ",-1)])]),_:2},1032,["onClick"])])],8,B)]),_:2},1024))),128))]),_:1})]),_:1})]),r("div",A,[n(t,{title:"最近调度记录",class:"records-card"},{default:u(()=>[n(we,{columns:ne,"data-source":se.value,pagination:!1,size:"small"},{bodyCell:u(({column:e,record:t})=>["status"===e.key?(l(),v(he,{key:0,color:de(t.status)},{default:u(()=>[y(d(pe(t.status)),1)]),_:2},1032,["color"])):"action"===e.key?(l(),v(be,{key:1},{default:u(()=>[n(xe,{type:"link",size:"small",onClick:e=>(e=>{Q.value=e,K.value=!0})(t)},{default:u(()=>[...a[25]||(a[25]=[y(" 查看 ",-1)])]),_:2},1032,["onClick"]),"executing"===t.status?(l(),v(xe,{key:0,type:"link",size:"small",onClick:e=>(e=>{w.confirm({title:"确认停止调度",content:`确定要停止调度任务"${e.taskName}"吗？`,onOk:()=>{e.status="completed",e.endTime=(new Date).toLocaleString(),e.result="手动停止",Y.value--,ee.value++,x.success("调度任务已停止")}})})(t)},{default:u(()=>[...a[26]||(a[26]=[y(" 停止 ",-1)])]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)):_("",!0)]),_:1},8,["data-source"])]),_:1})]),n(je,{open:T.value,"onUpdate:open":a[5]||(a[5]=e=>T.value=e),title:H.value,width:"600px",onOk:_e,onCancel:ge},{default:u(()=>[n(Ue,{ref_key:"dispatchFormRef",ref:le,model:ie,rules:re,"label-col":{span:6},"wrapper-col":{span:18}},{default:u(()=>[n(Ie,{label:"调度类型",name:"type"},{default:u(()=>[n(Ce,{value:ie.type,"onUpdate:value":a[0]||(a[0]=e=>ie.type=e),placeholder:"请选择调度类型"},{default:u(()=>[n(Te,{value:"emergency"},{default:u(()=>[...a[27]||(a[27]=[y("紧急调度",-1)])]),_:1}),n(Te,{value:"routine"},{default:u(()=>[...a[28]||(a[28]=[y("例行调度",-1)])]),_:1}),n(Te,{value:"special"},{default:u(()=>[...a[29]||(a[29]=[y("专项调度",-1)])]),_:1}),n(Te,{value:"coordination"},{default:u(()=>[...a[30]||(a[30]=[y("协同调度",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),n(Ie,{label:"预案选择",name:"planId"},{default:u(()=>[n(Ce,{value:ie.planId,"onUpdate:value":a[1]||(a[1]=e=>ie.planId=e),placeholder:"请选择预案"},{default:u(()=>[(l(!0),i(p,null,m(te.value,e=>(l(),v(Te,{key:e.id,value:e.id},{default:u(()=>[y(d(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(Ie,{label:"调度范围",name:"scope"},{default:u(()=>[n(Ne,{value:ie.scope,"onUpdate:value":a[2]||(a[2]=e=>ie.scope=e),placeholder:"请描述调度范围和目标区域",rows:3},null,8,["value"])]),_:1}),n(Ie,{label:"优先级",name:"priority"},{default:u(()=>[n(Ce,{value:ie.priority,"onUpdate:value":a[3]||(a[3]=e=>ie.priority=e),placeholder:"请选择优先级"},{default:u(()=>[n(Te,{value:"high"},{default:u(()=>[...a[31]||(a[31]=[y("高",-1)])]),_:1}),n(Te,{value:"medium"},{default:u(()=>[...a[32]||(a[32]=[y("中",-1)])]),_:1}),n(Te,{value:"low"},{default:u(()=>[...a[33]||(a[33]=[y("低",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),n(Ie,{label:"备注",name:"remark"},{default:u(()=>[n(Ne,{value:ie.remark,"onUpdate:value":a[4]||(a[4]=e=>ie.remark=e),placeholder:"请输入备注信息",rows:2},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),n(je,{open:J.value,"onUpdate:open":a[6]||(a[6]=e=>J.value=e),title:"预案详情",width:"500px",footer:null},{default:u(()=>[n(ze,{column:1,bordered:""},{default:u(()=>[n(qe,{label:"预案名称"},{default:u(()=>[y(d(P.value.name),1)]),_:1}),n(qe,{label:"预案类型"},{default:u(()=>[y(d(ue(P.value.type)),1)]),_:1}),n(qe,{label:"优先级"},{default:u(()=>[n(he,{color:oe(P.value.priority)},{default:u(()=>[y(d(ce(P.value.priority)),1)]),_:1},8,["color"])]),_:1}),n(qe,{label:"适用场景"},{default:u(()=>[y(d(P.value.scenarios),1)]),_:1}),n(qe,{label:"调度资源"},{default:u(()=>[y(d(P.value.resources),1)]),_:1}),n(qe,{label:"执行步骤"},{default:u(()=>[y(d(P.value.steps),1)]),_:1})]),_:1})]),_:1},8,["open"]),n(je,{open:K.value,"onUpdate:open":a[7]||(a[7]=e=>K.value=e),title:"调度记录详情",width:"600px",footer:null},{default:u(()=>[n(ze,{column:1,bordered:""},{default:u(()=>[n(qe,{label:"调度任务"},{default:u(()=>[y(d(Q.value.taskName),1)]),_:1}),n(qe,{label:"调度类型"},{default:u(()=>[y(d(ue(Q.value.type)),1)]),_:1}),n(qe,{label:"执行状态"},{default:u(()=>[n(he,{color:de(Q.value.status)},{default:u(()=>[y(d(pe(Q.value.status)),1)]),_:1},8,["color"])]),_:1}),n(qe,{label:"开始时间"},{default:u(()=>[y(d(Q.value.startTime),1)]),_:1}),n(qe,{label:"结束时间"},{default:u(()=>[y(d(Q.value.endTime||"进行中"),1)]),_:1}),n(qe,{label:"执行人员"},{default:u(()=>[y(d(Q.value.executor),1)]),_:1}),n(qe,{label:"调度结果"},{default:u(()=>[y(d(Q.value.result||"执行中"),1)]),_:1})]),_:1})]),_:1},8,["open"])])}}}),[["__scopeId","data-v-1b169eee"]]);export{H as default};
