import{U as e,T as t,u as a,p as i}from"./icons-15893848.js";import{d as n,r as l,f as s,o as r,V as o,W as d,a0 as c,k as u,$ as p,X as m,u as y,G as v,_ as k,a3 as g,a7 as f,F as _,a1 as h}from"./vendor-f41c3cc7.js";import{m as w,P as b}from"./antd-fa5730cf.js";import{_ as T}from"./index-79992d92.js";const x={class:"permission-management"},N={class:"permission-overview"},z={class:"tab-header"},C={class:"tab-header"},L={class:"permission-config-content"},U=T(n({__name:"permission-management",setup(n){const T=l({totalUsers:247,totalRoles:12,totalPermissions:89,onlineUsers:183}),U=s([{id:1,name:"系统超级管理员",description:"拥有系统所有权限，包括用户管理、角色管理、系统配置等",status:"启用",createTime:"2025-08-01",permissions:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]},{id:2,name:"港口安全总监",description:"负责港口整体安全监控，包括视频监控、安全事件处理、应急预案等",status:"启用",createTime:"2025-08-03",permissions:[1,2,3,4,5,6,7,8,9,10,11]},{id:3,name:"监控中心主任",description:"负责监控中心日常运营，包括设备管理、人员调度、监控质量等",status:"启用",createTime:"2025-08-05",permissions:[1,2,3,4,5,6,7,8]},{id:4,name:"视频监控工程师",description:"负责视频监控系统技术维护，包括设备安装、调试、故障处理等",status:"启用",createTime:"2025-08-07",permissions:[2,3,4,5,6,7]},{id:5,name:"安全巡检员",description:"负责港口安全巡检，包括日常巡查、异常发现、事件报告等",status:"启用",createTime:"2025-08-09",permissions:[1,2,3,4,5]},{id:6,name:"运维技术员",description:"负责系统运维工作，包括设备维护、性能监控、故障排除等",status:"启用",createTime:"2025-08-11",permissions:[2,3,4,5,6]},{id:7,name:"数据分析师",description:"负责监控数据分析，包括数据挖掘、趋势分析、报告生成等",status:"启用",createTime:"2025-08-13",permissions:[1,2,3,4,8,9]},{id:8,name:"应急响应员",description:"负责突发事件应急响应，包括预案执行、现场协调、资源调度等",status:"启用",createTime:"2025-08-15",permissions:[1,2,3,4,5,6,7,8,9]},{id:9,name:"质量控制员",description:"负责监控质量检查，包括画面质量、设备状态、服务标准等",status:"启用",createTime:"2025-08-17",permissions:[2,3,4,5,6]},{id:10,name:"普通监控员",description:"基础监控操作权限，包括查看画面、基础操作、事件报告等",status:"启用",createTime:"2025-08-19",permissions:[1,2,3,4]},{id:11,name:"临时访客",description:"临时访问权限，仅限查看部分公开监控画面",status:"启用",createTime:"2025-08-21",permissions:[1]},{id:12,name:"审计员",description:"负责系统审计工作，包括操作日志审查、合规性检查等",status:"启用",createTime:"2025-08-23",permissions:[1,2,3,4,8,9,10]}]),I=e=>{const t=Date.now()-e,a=Math.floor(30*Math.random()),i=Math.floor(60*Math.random());return new Date(t+60*a*1e3+1e3*i).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-")},q=s([{id:1,username:"admin",realName:"陈志强",role:"系统超级管理员",department:"信息技术部",status:"在线",lastLoginTime:I(0)},{id:2,username:"security_director",realName:"李明华",role:"港口安全总监",department:"安全保卫部",status:"在线",lastLoginTime:I(18e5)},{id:3,username:"monitor_center_director",realName:"王建国",role:"监控中心主任",department:"监控中心",status:"在线",lastLoginTime:I(36e5)},{id:4,username:"video_engineer_001",realName:"张伟",role:"视频监控工程师",department:"技术维护部",status:"在线",lastLoginTime:I(54e5)},{id:5,username:"video_engineer_002",realName:"刘强",role:"视频监控工程师",department:"技术维护部",status:"离线",lastLoginTime:I(144e5)},{id:6,username:"security_inspector_001",realName:"赵敏",role:"安全巡检员",department:"安全保卫部",status:"在线",lastLoginTime:I(27e5)},{id:7,username:"security_inspector_002",realName:"孙丽",role:"安全巡检员",department:"安全保卫部",status:"在线",lastLoginTime:I(45e5)},{id:8,username:"ops_tech_001",realName:"周斌",role:"运维技术员",department:"运维部",status:"在线",lastLoginTime:I(72e5)},{id:9,username:"ops_tech_002",realName:"吴刚",role:"运维技术员",department:"运维部",status:"离线",lastLoginTime:I(216e5)},{id:10,username:"data_analyst_001",realName:"郑小红",role:"数据分析师",department:"数据分析部",status:"在线",lastLoginTime:I(63e5)},{id:11,username:"emergency_response_001",realName:"马超",role:"应急响应员",department:"应急响应部",status:"在线",lastLoginTime:I(81e5)},{id:12,username:"emergency_response_002",realName:"黄志强",role:"应急响应员",department:"应急响应部",status:"在线",lastLoginTime:I(9e6)},{id:13,username:"quality_control_001",realName:"林美玲",role:"质量控制员",department:"质量控制部",status:"在线",lastLoginTime:I(99e5)},{id:14,username:"monitor_operator_001",realName:"何建国",role:"普通监控员",department:"监控中心",status:"在线",lastLoginTime:I(108e5)},{id:15,username:"monitor_operator_002",realName:"罗小华",role:"普通监控员",department:"监控中心",status:"在线",lastLoginTime:I(117e5)},{id:16,username:"monitor_operator_003",realName:"梁志明",role:"普通监控员",department:"监控中心",status:"离线",lastLoginTime:I(288e5)},{id:17,username:"guest_001",realName:"临时访客",role:"临时访客",department:"访客部",status:"在线",lastLoginTime:I(126e5)},{id:18,username:"auditor_001",realName:"徐明",role:"审计员",department:"审计部",status:"在线",lastLoginTime:I(135e5)}]),j=s([{title:"视频广场",key:"video-plaza",children:[{title:"全景视图",key:"panoramic-view",description:"查看港口全景监控画面"},{title:"视频矩阵",key:"video-matrix",description:"多画面视频矩阵显示"},{title:"智能轮巡",key:"intelligent-patrol",description:"智能视频轮巡控制"},{title:"快速调用",key:"quick-call",description:"快速调用指定监控点"},{title:"云台控制",key:"ptz-control",description:"云台摄像机控制操作"},{title:"视频质量诊断",key:"video-quality",description:"视频质量检测分析"},{title:"视频回放",key:"video-playback",description:"历史视频回放查看"},{title:"视频下载",key:"video-download",description:"视频文件下载导出"}]},{title:"点位治理",key:"point-management",children:[{title:"资产台账管理",key:"asset-management",description:"监控设备资产信息管理"},{title:"地理信息标注",key:"geographic-annotation",description:"设备地理位置标注"},{title:"在线状态监测",key:"status-monitoring",description:"设备在线状态实时监测"},{title:"智能运维",key:"intelligent-maintenance",description:"设备智能运维管理"},{title:"覆盖分析",key:"coverage-analysis",description:"监控覆盖范围分析"},{title:"权限管理",key:"permission-management",description:"系统用户权限管理"},{title:"设备配置",key:"device-config",description:"监控设备参数配置"},{title:"故障处理",key:"fault-handling",description:"设备故障处理流程"}]},{title:"视频共享",key:"video-sharing",children:[{title:"共享资源池",key:"shared-resources",description:"视频资源共享管理"},{title:"标准协议接入",key:"protocol-access",description:"标准视频协议接入"},{title:"安全审计日志",key:"audit-logs",description:"操作安全审计记录"},{title:"临时授权",key:"temporary-auth",description:"临时访问权限授权"},{title:"共享策略",key:"sharing-policy",description:"视频共享策略配置"},{title:"访问控制",key:"access-control",description:"共享资源访问控制"}]},{title:"融合接入",key:"integrated-access",children:[{title:"多协议适配",key:"protocol-adaptation",description:"多种视频协议适配"},{title:"数据标准化",key:"data-standardization",description:"视频数据标准化处理"},{title:"API服务",key:"api-services",description:"视频服务API接口"},{title:"协议转换",key:"protocol-conversion",description:"不同协议间转换"},{title:"数据同步",key:"data-sync",description:"多系统数据同步"}]},{title:"事件回顾",key:"event-review",children:[{title:"多维事件检索",key:"multi-dimensional-search",description:"多维度事件检索查询"},{title:"全过程回溯",key:"full-process-traceability",description:"事件全过程回溯分析"},{title:"电子取证",key:"electronic-evidence",description:"电子证据收集保存"},{title:"统计分析",key:"statistical-analysis",description:"事件统计分析报告"},{title:"报告生成",key:"report-generation",description:"事件报告自动生成"},{title:"预案管理",key:"contingency-plan-management",description:"应急预案管理"},{title:"满意度分析",key:"satisfaction-analysis",description:"事件处理满意度分析"},{title:"趋势预测",key:"trend-prediction",description:"事件趋势预测分析"}]},{title:"视频调度",key:"video-dispatch",children:[{title:"预案管理",key:"dispatch-plan-management",description:"视频调度预案管理"},{title:"一键调度",key:"one-click-dispatch",description:"一键快速视频调度"},{title:"资源追踪",key:"resource-tracking",description:"调度资源实时追踪"},{title:"移动资源集成",key:"mobile-resource-integration",description:"移动监控资源集成"},{title:"调度记录",key:"dispatch-records",description:"视频调度操作记录"},{title:"调度配置",key:"dispatch-config",description:"调度系统参数配置"},{title:"优先级管理",key:"priority-management",description:"调度任务优先级管理"},{title:"资源分配",key:"resource-allocation",description:"监控资源智能分配"}]},{title:"协同会商",key:"collaborative-consultation",children:[{title:"多方音视频通话",key:"multi-party-call",description:"多方音视频会议通话"},{title:"桌面与资料共享",key:"desktop-sharing",description:"桌面和资料共享功能"},{title:"电子白板",key:"whiteboard",description:"电子白板协作功能"},{title:"会商记录与回溯",key:"consultation-records",description:"会商过程记录回溯"},{title:"通讯调度集成",key:"communication-integration",description:"通讯调度系统集成"},{title:"会议管理",key:"meeting-management",description:"会商会议管理功能"},{title:"权限控制",key:"consultation-auth",description:"会商权限访问控制"}]},{title:"通讯调度",key:"communication-dispatch",children:[{title:"融合通讯",key:"integrated-communication",description:"多种通讯方式融合"},{title:"一键呼叫/群呼",key:"quick-call",description:"一键呼叫和群呼功能"},{title:"分级分区广播",key:"broadcast-management",description:"分级分区广播管理"},{title:"通讯记录",key:"communication-records",description:"通讯操作记录管理"},{title:"智能路由",key:"intelligent-routing",description:"智能通讯路由选择"},{title:"业务联动",key:"business-integration",description:"业务系统联动集成"},{title:"紧急通讯",key:"emergency-communication",description:"紧急情况通讯处理"},{title:"通讯质量监控",key:"communication-quality",description:"通讯质量实时监控"}]},{title:"系统管理",key:"system-management",children:[{title:"用户管理",key:"user-management",description:"系统用户信息管理"},{title:"角色管理",key:"role-management",description:"用户角色权限管理"},{title:"系统配置",key:"system-config",description:"系统参数配置管理"},{title:"日志管理",key:"log-management",description:"系统日志记录管理"},{title:"备份恢复",key:"backup-restore",description:"系统数据备份恢复"},{title:"性能监控",key:"performance-monitor",description:"系统性能实时监控"},{title:"安全策略",key:"security-policy",description:"系统安全策略配置"}]}]),O=[{title:"角色名称",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"状态",dataIndex:"status",key:"status"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action",width:200}],D=[{title:"用户名",dataIndex:"username",key:"username"},{title:"真实姓名",dataIndex:"realName",key:"realName"},{title:"角色",dataIndex:"role",key:"role"},{title:"部门",dataIndex:"department",key:"department"},{title:"状态",dataIndex:"status",key:"status"},{title:"最后登录",dataIndex:"lastLoginTime",key:"lastLoginTime"},{title:"操作",key:"action",width:200}],F=s(!1),K=s(!1),P=s(!1),M=s(null),R=s(null),S=l({name:"",description:"",status:"启用"}),A=l({username:"",realName:"",role:"",department:"",status:"在线"}),G={name:[{required:!0,message:"请输入角色名称"}],status:[{required:!0,message:"请选择状态"}]},V={username:[{required:!0,message:"请输入用户名"}],realName:[{required:!0,message:"请输入真实姓名"}],role:[{required:!0,message:"请选择角色"}],department:[{required:!0,message:"请输入部门"}]},W=s("roles"),X=s(),$=s([]),B=s([]),E=s(null),H=s([]),J=s(),Q=s(),Y=e=>{const t=U.value.find(t=>t.id===e);if(t){const e=(e=>({"系统超级管理员":["video-plaza","point-management","video-sharing","integrated-access","event-review","video-dispatch","collaborative-consultation","communication-dispatch","system-management"],"港口安全总监":["video-plaza","point-management","video-sharing","integrated-access","event-review","video-dispatch","collaborative-consultation","communication-dispatch"],"监控中心主任":["video-plaza","point-management","video-sharing","integrated-access","video-dispatch"],"视频监控工程师":["video-plaza","point-management"],"安全巡检员":["video-plaza","point-management","event-review"],"运维技术员":["point-management"],"数据分析师":["video-plaza","point-management","event-review"],"应急响应员":["video-plaza","point-management","event-review"],"质量控制员":["video-plaza","point-management"],"普通监控员":["video-plaza","point-management"],"临时访客":["video-plaza"],"审计员":["video-plaza","point-management","system-management"]}[e]||[]))(t.name);$.value=e}},Z=e=>{$.value=e},ee=()=>{X.value?w.success("权限配置保存成功"):w.warning("请先选择角色")},te=async()=>{try{if(await J.value.validate(),M.value){const e=U.value.findIndex(e=>e.id===M.value.id);-1!==e&&(Object.assign(U.value[e],S),w.success("角色更新成功"))}else{const e={id:Date.now(),...S,createTime:(new Date).toISOString().split("T")[0],permissions:[]};U.value.push(e),w.success("角色创建成功")}F.value=!1}catch(e){console.error("表单验证失败:",e)}},ae=()=>{var e;F.value=!1,M.value=null,null==(e=J.value)||e.resetFields()},ie=async()=>{try{if(await Q.value.validate(),R.value){const e=q.value.findIndex(e=>e.id===R.value.id);-1!==e&&(Object.assign(q.value[e],A),w.success("用户更新成功"))}else{const e={id:Date.now(),...A,lastLoginTime:"-"};q.value.push(e),w.success("用户创建成功")}K.value=!1}catch(e){console.error("表单验证失败:",e)}},ne=()=>{var e;K.value=!1,R.value=null,null==(e=Q.value)||e.resetFields()};return r(()=>{B.value=j.value.map(e=>e.key)}),(n,l)=>{const s=m("a-statistic"),r=m("a-card"),I=m("a-col"),le=m("a-row"),se=m("a-button"),re=m("a-tag"),oe=m("a-popconfirm"),de=m("a-space"),ce=m("a-table"),ue=m("a-tab-pane"),pe=m("a-select-option"),me=m("a-select"),ye=m("a-divider"),ve=m("a-tree"),ke=m("a-tabs"),ge=m("a-input"),fe=m("a-form-item"),_e=m("a-textarea"),he=m("a-form"),we=m("a-modal"),be=m("a-descriptions-item"),Te=m("a-descriptions"),xe=m("a-list-item-meta"),Ne=m("a-list-item"),ze=m("a-list");return o(),d("div",x,[l[31]||(l[31]=c("div",{class:"page-header"},[c("h2",null,"权限管理"),c("p",null,"基于角色的权限控制，实现精细化的访问权限管理")],-1)),c("div",N,[u(le,{gutter:16},{default:p(()=>[u(I,{span:6},{default:p(()=>[u(r,null,{default:p(()=>[u(s,{title:"总用户数",value:T.totalUsers,"value-style":{color:"#1890ff"}},{prefix:p(()=>[u(y(e))]),_:1},8,["value"])]),_:1})]),_:1}),u(I,{span:6},{default:p(()=>[u(r,null,{default:p(()=>[u(s,{title:"总角色数",value:T.totalRoles,"value-style":{color:"#52c41a"}},{prefix:p(()=>[u(y(t))]),_:1},8,["value"])]),_:1})]),_:1}),u(I,{span:6},{default:p(()=>[u(r,null,{default:p(()=>[u(s,{title:"总权限数",value:T.totalPermissions,"value-style":{color:"#faad14"}},{prefix:p(()=>[u(y(a))]),_:1},8,["value"])]),_:1})]),_:1}),u(I,{span:6},{default:p(()=>[u(r,null,{default:p(()=>[u(s,{title:"在线用户",value:T.onlineUsers,"value-style":{color:"#f5222d"}},{prefix:p(()=>[u(y(i))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),u(r,{bordered:!1,class:"main-content"},{default:p(()=>[u(ke,{activeKey:W.value,"onUpdate:activeKey":l[5]||(l[5]=e=>W.value=e),type:"card"},{default:p(()=>[u(ue,{key:"roles",tab:"角色管理"},{default:p(()=>[c("div",z,[u(se,{type:"primary",onClick:l[0]||(l[0]=e=>F.value=!0)},{default:p(()=>[u(y(b)),l[17]||(l[17]=v(" 新增角色 ",-1))]),_:1})]),u(ce,{columns:O,"data-source":U.value,pagination:!1,size:"small","row-key":"id"},{bodyCell:p(({column:e,record:t})=>["status"===e.key?(o(),k(re,{key:0,color:"启用"===t.status?"green":"red"},{default:p(()=>[v(g(t.status),1)]),_:2},1032,["color"])):"action"===e.key?(o(),k(de,{key:1},{default:p(()=>[u(se,{type:"link",size:"small",onClick:e=>{return(a=t)?(M.value=a,Object.assign(S,a)):(M.value=null,Object.assign(S,{name:"",description:"",status:"启用"})),void(F.value=!0);var a}},{default:p(()=>[...l[18]||(l[18]=[v(" 编辑 ",-1)])]),_:2},1032,["onClick"]),u(se,{type:"link",size:"small",onClick:e=>{return a=t,E.value=a,H.value={"系统超级管理员":[{name:"视频广场-全景视图",type:"admin",description:"查看全景视图功能，拥有完全控制权限"},{name:"视频广场-视频矩阵",type:"admin",description:"查看视频矩阵功能，拥有完全控制权限"},{name:"点位治理-资产台账管理",type:"admin",description:"管理资产台账，拥有完全控制权限"},{name:"点位治理-地理信息标注",type:"admin",description:"管理地理信息，拥有完全控制权限"},{name:"系统管理-用户管理",type:"admin",description:"系统用户信息管理，拥有完全控制权限"},{name:"系统管理-角色管理",type:"admin",description:"用户角色权限管理，拥有完全控制权限"}],"港口安全总监":[{name:"视频广场-全景视图",type:"write",description:"查看全景视图功能，拥有编辑权限"},{name:"视频广场-视频矩阵",type:"write",description:"查看视频矩阵功能，拥有编辑权限"},{name:"点位治理-资产台账管理",type:"write",description:"管理资产台账，拥有编辑权限"},{name:"点位治理-地理信息标注",type:"write",description:"管理地理信息，拥有编辑权限"},{name:"事件回顾-多维事件检索",type:"write",description:"多维度事件检索查询，拥有编辑权限"},{name:"应急响应-预案管理",type:"write",description:"应急预案管理，拥有编辑权限"}],"监控中心主任":[{name:"视频广场-全景视图",type:"write",description:"查看全景视图功能，拥有编辑权限"},{name:"视频广场-视频矩阵",type:"write",description:"查看视频矩阵功能，拥有编辑权限"},{name:"点位治理-在线状态监测",type:"write",description:"设备在线状态实时监测，拥有编辑权限"},{name:"点位治理-智能运维",type:"write",description:"设备智能运维管理，拥有编辑权限"},{name:"视频调度-预案管理",type:"write",description:"视频调度预案管理，拥有编辑权限"}],"视频监控工程师":[{name:"视频广场-云台控制",type:"write",description:"云台摄像机控制操作，拥有编辑权限"},{name:"视频广场-视频质量诊断",type:"write",description:"视频质量检测分析，拥有编辑权限"},{name:"点位治理-设备配置",type:"write",description:"监控设备参数配置，拥有编辑权限"},{name:"点位治理-故障处理",type:"write",description:"设备故障处理流程，拥有编辑权限"}],"安全巡检员":[{name:"视频广场-全景视图",type:"read",description:"查看全景视图功能，拥有查看权限"},{name:"视频广场-快速调用",type:"read",description:"快速调用指定监控点，拥有查看权限"},{name:"点位治理-在线状态监测",type:"read",description:"设备在线状态实时监测，拥有查看权限"},{name:"事件回顾-多维事件检索",type:"read",description:"多维度事件检索查询，拥有查看权限"}],"运维技术员":[{name:"点位治理-在线状态监测",type:"write",description:"设备在线状态实时监测，拥有编辑权限"},{name:"点位治理-智能运维",type:"write",description:"设备智能运维管理，拥有编辑权限"},{name:"点位治理-设备配置",type:"write",description:"监控设备参数配置，拥有编辑权限"},{name:"点位治理-故障处理",type:"write",description:"设备故障处理流程，拥有编辑权限"}],"数据分析师":[{name:"视频广场-全景视图",type:"read",description:"查看全景视图功能，拥有查看权限"},{name:"点位治理-在线状态监测",type:"read",description:"设备在线状态实时监测，拥有查看权限"},{name:"事件回顾-统计分析",type:"write",description:"事件统计分析报告，拥有编辑权限"},{name:"事件回顾-报告生成",type:"write",description:"事件报告自动生成，拥有编辑权限"}],"应急响应员":[{name:"视频广场-全景视图",type:"write",description:"查看全景视图功能，拥有编辑权限"},{name:"视频广场-快速调用",type:"write",description:"快速调用指定监控点，拥有编辑权限"},{name:"事件回顾-多维事件检索",type:"write",description:"多维度事件检索查询，拥有编辑权限"},{name:"应急响应-预案管理",type:"write",description:"应急预案管理，拥有编辑权限"}],"质量控制员":[{name:"视频广场-视频质量诊断",type:"read",description:"视频质量检测分析，拥有查看权限"},{name:"点位治理-在线状态监测",type:"read",description:"设备在线状态实时监测，拥有查看权限"},{name:"点位治理-智能运维",type:"read",description:"设备智能运维管理，拥有查看权限"}],"普通监控员":[{name:"视频广场-全景视图",type:"read",description:"查看全景视图功能，拥有查看权限"},{name:"视频广场-快速调用",type:"read",description:"快速调用指定监控点，拥有查看权限"},{name:"点位治理-在线状态监测",type:"read",description:"设备在线状态实时监测，拥有查看权限"}],"临时访客":[{name:"视频广场-全景视图",type:"read",description:"查看全景视图功能，仅限查看公开画面"}],"审计员":[{name:"视频广场-全景视图",type:"read",description:"查看全景视图功能，拥有查看权限"},{name:"点位治理-在线状态监测",type:"read",description:"设备在线状态实时监测，拥有查看权限"},{name:"系统管理-日志管理",type:"read",description:"系统日志记录管理，拥有查看权限"},{name:"系统管理-安全策略",type:"read",description:"系统安全策略配置，拥有查看权限"}]}[a.name]||[],void(P.value=!0);var a}},{default:p(()=>[...l[19]||(l[19]=[v(" 权限 ",-1)])]),_:2},1032,["onClick"]),u(oe,{title:"确定要删除这个角色吗？",onConfirm:e=>(e=>{const t=U.value.findIndex(t=>t.id===e);-1!==t&&(U.value.splice(t,1),w.success("角色删除成功"))})(t.id)},{default:p(()=>[u(se,{type:"link",size:"small",danger:""},{default:p(()=>[...l[20]||(l[20]=[v(" 删除 ",-1)])]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):f("",!0)]),_:1},8,["data-source"])]),_:1}),u(ue,{key:"users",tab:"用户管理"},{default:p(()=>[c("div",C,[u(se,{type:"primary",onClick:l[1]||(l[1]=e=>K.value=!0)},{default:p(()=>[u(y(b)),l[21]||(l[21]=v(" 新增用户 ",-1))]),_:1})]),u(ce,{columns:D,"data-source":q.value,pagination:!1,size:"small","row-key":"id"},{bodyCell:p(({column:e,record:t})=>{return["status"===e.key?(o(),k(re,{key:0,color:"在线"===t.status?"green":"default"},{default:p(()=>[v(g(t.status),1)]),_:2},1032,["color"])):"role"===e.key?(o(),k(re,{key:1,color:(a=t.role,{"系统超级管理员":"red","港口安全总监":"purple","监控中心主任":"blue","视频监控工程师":"cyan","安全巡检员":"green","运维技术员":"orange","数据分析师":"geekblue","应急响应员":"volcano","质量控制员":"lime","普通监控员":"default","临时访客":"default","审计员":"gold"}[a]||"default")},{default:p(()=>[v(g(t.role),1)]),_:2},1032,["color"])):"action"===e.key?(o(),k(de,{key:2},{default:p(()=>[u(se,{type:"link",size:"small",onClick:e=>{return(a=t)?(R.value=a,Object.assign(A,a)):(R.value=null,Object.assign(A,{username:"",realName:"",role:"",department:"",status:"在线"})),void(K.value=!0);var a}},{default:p(()=>[...l[22]||(l[22]=[v(" 编辑 ",-1)])]),_:2},1032,["onClick"]),u(se,{type:"link",size:"small",onClick:e=>(t.id,void w.success("密码重置成功，新密码已发送到用户邮箱"))},{default:p(()=>[...l[23]||(l[23]=[v(" 重置密码 ",-1)])]),_:2},1032,["onClick"]),u(oe,{title:"确定要删除这个用户吗？",onConfirm:e=>(e=>{const t=q.value.findIndex(t=>t.id===e);-1!==t&&(q.value.splice(t,1),w.success("用户删除成功"))})(t.id)},{default:p(()=>[u(se,{type:"link",size:"small",danger:""},{default:p(()=>[...l[24]||(l[24]=[v(" 删除 ",-1)])]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):f("",!0)];var a}),_:1},8,["data-source"])]),_:1}),u(ue,{key:"permissions",tab:"权限配置"},{default:p(()=>[c("div",L,[u(le,{gutter:16},{default:p(()=>[u(I,{span:8},{default:p(()=>[u(me,{value:X.value,"onUpdate:value":l[2]||(l[2]=e=>X.value=e),placeholder:"选择角色",style:{width:"100%"},onChange:Y},{default:p(()=>[(o(!0),d(_,null,h(U.value,e=>(o(),k(pe,{key:e.id,value:e.id},{default:p(()=>[v(g(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),u(I,{span:8},{default:p(()=>[u(se,{type:"primary",onClick:ee},{default:p(()=>[...l[25]||(l[25]=[v(" 保存权限配置 ",-1)])]),_:1})]),_:1})]),_:1}),u(ye),X.value?(o(),k(ve,{key:0,"checked-keys":$.value,"onUpdate:checkedKeys":l[3]||(l[3]=e=>$.value=e),"expanded-keys":B.value,"onUpdate:expandedKeys":l[4]||(l[4]=e=>B.value=e),checkable:"","tree-data":j.value,"default-check-all":!1,onCheck:Z},null,8,["checked-keys","expanded-keys","tree-data"])):f("",!0)])]),_:1})]),_:1},8,["activeKey"])]),_:1}),u(we,{open:F.value,"onUpdate:open":l[9]||(l[9]=e=>F.value=e),title:M.value?"编辑角色":"新增角色",onOk:te,onCancel:ae},{default:p(()=>[u(he,{ref_key:"roleFormRef",ref:J,model:S,rules:G,layout:"vertical"},{default:p(()=>[u(fe,{label:"角色名称",name:"name"},{default:p(()=>[u(ge,{value:S.name,"onUpdate:value":l[6]||(l[6]=e=>S.name=e),placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),u(fe,{label:"角色描述",name:"description"},{default:p(()=>[u(_e,{value:S.description,"onUpdate:value":l[7]||(l[7]=e=>S.description=e),placeholder:"请输入角色描述",rows:3},null,8,["value"])]),_:1}),u(fe,{label:"状态",name:"status"},{default:p(()=>[u(me,{value:S.status,"onUpdate:value":l[8]||(l[8]=e=>S.status=e),placeholder:"请选择状态"},{default:p(()=>[u(pe,{value:"启用"},{default:p(()=>[...l[26]||(l[26]=[v("启用",-1)])]),_:1}),u(pe,{value:"禁用"},{default:p(()=>[...l[27]||(l[27]=[v("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),u(we,{open:K.value,"onUpdate:open":l[15]||(l[15]=e=>K.value=e),title:R.value?"编辑用户":"新增用户",onOk:ie,onCancel:ne},{default:p(()=>[u(he,{ref_key:"userFormRef",ref:Q,model:A,rules:V,layout:"vertical"},{default:p(()=>[u(fe,{label:"用户名",name:"username"},{default:p(()=>[u(ge,{value:A.username,"onUpdate:value":l[10]||(l[10]=e=>A.username=e),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),u(fe,{label:"真实姓名",name:"realName"},{default:p(()=>[u(ge,{value:A.realName,"onUpdate:value":l[11]||(l[11]=e=>A.realName=e),placeholder:"请输入真实姓名"},null,8,["value"])]),_:1}),u(fe,{label:"角色",name:"role"},{default:p(()=>[u(me,{value:A.role,"onUpdate:value":l[12]||(l[12]=e=>A.role=e),placeholder:"请选择角色"},{default:p(()=>[(o(!0),d(_,null,h(U.value,e=>(o(),k(pe,{key:e.id,value:e.name},{default:p(()=>[v(g(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),u(fe,{label:"部门",name:"department"},{default:p(()=>[u(ge,{value:A.department,"onUpdate:value":l[13]||(l[13]=e=>A.department=e),placeholder:"请输入部门"},null,8,["value"])]),_:1}),u(fe,{label:"状态",name:"status"},{default:p(()=>[u(me,{value:A.status,"onUpdate:value":l[14]||(l[14]=e=>A.status=e),placeholder:"请选择状态"},{default:p(()=>[u(pe,{value:"在线"},{default:p(()=>[...l[28]||(l[28]=[v("在线",-1)])]),_:1}),u(pe,{value:"离线"},{default:p(()=>[...l[29]||(l[29]=[v("离线",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),u(we,{open:P.value,"onUpdate:open":l[16]||(l[16]=e=>P.value=e),title:"角色权限详情",width:"800px",footer:null},{default:p(()=>[u(Te,{title:"角色信息",bordered:""},{default:p(()=>[u(be,{label:"角色名称"},{default:p(()=>{var e;return[v(g(null==(e=E.value)?void 0:e.name),1)]}),_:1}),u(be,{label:"角色描述"},{default:p(()=>{var e;return[v(g(null==(e=E.value)?void 0:e.description),1)]}),_:1}),u(be,{label:"创建时间"},{default:p(()=>{var e;return[v(g(null==(e=E.value)?void 0:e.createTime),1)]}),_:1}),u(be,{label:"状态"},{default:p(()=>{var e;return[u(re,{color:"启用"===(null==(e=E.value)?void 0:e.status)?"green":"red"},{default:p(()=>{var e;return[v(g(null==(e=E.value)?void 0:e.status),1)]}),_:1},8,["color"])]}),_:1})]),_:1}),u(ye),l[30]||(l[30]=c("h4",null,"权限列表",-1)),u(ze,{"data-source":H.value,size:"small"},{renderItem:p(({item:e})=>[u(Ne,null,{default:p(()=>[u(xe,null,{title:p(()=>{return[u(re,{color:(t=e.type,{read:"blue",write:"green",delete:"red",admin:"purple",execute:"orange",approve:"cyan",audit:"geekblue"}[t]||"default")},{default:p(()=>[v(g(e.name),1)]),_:2},1032,["color"])];var t}),description:p(()=>[v(g(e.description),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1},8,["open"])])}}}),[["__scopeId","data-v-b99634e3"]]);export{U as default};
