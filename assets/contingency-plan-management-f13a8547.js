import{d as e,f as a,r as l,o as t,V as s,W as n,a0 as u,k as i,$ as d,X as r,u as o,a3 as c,G as p,_ as v,a7 as f}from"./vendor-f41c3cc7.js";import{F as m,C as _,h as k,P as y,l as b,m as g}from"./antd-fa5730cf.js";import{h as x,R as h}from"./icons-15893848.js";import{_ as w}from"./index-781a1167.js";const C={class:"contingency-plan-management"},z={class:"plan-overview"},I={class:"card-content"},L={class:"icon-wrapper total"},D={class:"stats"},N={class:"number"},P={class:"card-content"},$={class:"icon-wrapper active"},U={class:"stats"},T={class:"number"},q={class:"card-content"},S={class:"icon-wrapper pending"},j={class:"stats"},A={class:"number"},Y={class:"card-content"},V={class:"icon-wrapper executed"},F={class:"stats"},M={class:"number"},R={class:"plan-creation"},E={class:"plan-management"},G={class:"approval-management"},J={class:"execution-records"},K=w(e({__name:"contingency-plan-management",setup(e){const w=a({totalPlans:45,activePlans:32,pendingPlans:8,executedPlans:15}),K=l({name:"",type:void 0,riskLevel:void 0,description:"",scope:"",department:void 0,responsible:"",effectiveDate:null}),O=a(!1),Q=a(!1),W=a(!1),X=a(null),B=a([]),H=l({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),Z=a([]),ee=l({selectedRowKeys:Z,onChange:e=>{Z.value=e}}),ae=a([]),le=a([]),te=[{label:"船舶碰撞应急预案",value:"船舶碰撞应急预案"},{label:"船舶搁浅应急预案",value:"船舶搁浅应急预案"},{label:"火灾事故应急预案",value:"火灾事故应急预案"},{label:"人员落水应急预案",value:"人员落水应急预案"},{label:"货物泄漏应急预案",value:"货物泄漏应急预案"}],se=[{label:"特别重大",value:"特别重大"},{label:"重大",value:"重大"},{label:"较大",value:"较大"},{label:"一般",value:"一般"}],ne=[{label:"海事局",value:"海事局"},{label:"港口管理局",value:"港口管理局"},{label:"航道管理处",value:"航道管理处"},{label:"应急救援中心",value:"应急救援中心"}],ue=[{title:"预案名称",dataIndex:"name",key:"name",width:200},{title:"预案类型",dataIndex:"type",key:"type",width:150},{title:"风险等级",dataIndex:"riskLevel",key:"riskLevel",width:100},{title:"责任部门",dataIndex:"department",key:"department",width:120},{title:"负责人",dataIndex:"responsible",key:"responsible",width:100},{title:"生效日期",dataIndex:"effectiveDate",key:"effectiveDate",width:120},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"操作",key:"action",width:200,fixed:"right"}],ie=[{title:"预案名称",dataIndex:"planName",key:"planName"},{title:"申请人",dataIndex:"applicant",key:"applicant"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime"},{title:"审批人",dataIndex:"approver",key:"approver"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",key:"action"}],de=[{title:"预案名称",dataIndex:"planName",key:"planName"},{title:"执行时间",dataIndex:"executeTime",key:"executeTime"},{title:"执行人",dataIndex:"executor",key:"executor"},{title:"执行结果",dataIndex:"result",key:"result"},{title:"操作",key:"action"}],re=()=>{Object.keys(K).forEach(e=>{Array.isArray(K[e])?K[e]=[]:K[e]=""}),K.effectiveDate=null},oe=()=>{O.value=!0,setTimeout(()=>{const e={id:`PLAN${Date.now()}`,name:K.name,type:K.type,riskLevel:K.riskLevel,description:K.description,scope:K.scope,department:K.department,responsible:K.responsible,effectiveDate:K.effectiveDate?K.effectiveDate.format("YYYY-MM-DD"):"",status:"待审批"};B.value.unshift(e),H.total++,O.value=!1,g.success("预案创建成功，等待审批")},2e3)},ce=()=>{re()},pe=()=>{K.name?g.info("预案预览功能开发中..."):g.warning("请先填写预案名称")},ve=()=>{Q.value=!0,setTimeout(()=>{Q.value=!1,g.success("预案列表已刷新")},1e3)},fe=()=>{0!==Z.value.length?g.success(`正在批量审批 ${Z.value.length} 个预案...`):g.warning("请选择要审批的预案")},me=()=>{g.success("预案导出中...")},_e=()=>{g.info("创建审批流程功能开发中...")},ke=e=>{H.current=e.current,H.pageSize=e.pageSize},ye=()=>{g.success("执行记录已刷新")};return t(()=>{console.log("预案管理页面已加载"),B.value=[{id:"PLAN001",name:"船舶碰撞应急预案V2.0",type:"船舶碰撞应急预案",riskLevel:"重大",description:"针对船舶碰撞事故的应急响应预案",scope:"长江口、黄浦江等主要航道",department:"海事局",responsible:"张主任",effectiveDate:"2025-08-01",status:"已生效"},{id:"PLAN002",name:"火灾事故应急预案",type:"火灾事故应急预案",riskLevel:"较大",description:"船舶火灾事故应急处理预案",scope:"所有港口和锚地",department:"港口管理局",responsible:"李经理",effectiveDate:"2025-08-15",status:"待审批"}],H.total=B.value.length,ae.value=[{planName:"火灾事故应急预案",applicant:"李经理",applyTime:"2025-08-15 14:30:25",approver:"王局长",status:"待审批"}],le.value=[{planName:"船舶碰撞应急预案V2.0",executeTime:"2025-08-10 16:45:12",executor:"张主任",result:"成功"}]}),(e,a)=>{const l=r("a-card"),t=r("a-col"),Z=r("a-row"),be=r("a-button"),ge=r("a-input"),xe=r("a-form-item"),he=r("a-select"),we=r("a-textarea"),Ce=r("a-date-picker"),ze=r("a-space"),Ie=r("a-form"),Le=r("a-tag"),De=r("a-table"),Ne=r("a-descriptions-item"),Pe=r("a-descriptions"),$e=r("a-modal");return s(),n("div",C,[a[31]||(a[31]=u("div",{class:"page-header"},[u("h2",null,"预案管理"),u("p",null,"应急预案管理，包含预案制定、审批流程、执行记录等")],-1)),u("div",z,[i(Z,{gutter:16},{default:d(()=>[i(t,{span:6},{default:d(()=>[i(l,{class:"overview-card"},{default:d(()=>[u("div",I,[u("div",L,[i(o(m))]),u("div",D,[u("div",N,c(w.value.totalPlans),1),a[9]||(a[9]=u("div",{class:"label"},"总预案数",-1))])])]),_:1})]),_:1}),i(t,{span:6},{default:d(()=>[i(l,{class:"overview-card"},{default:d(()=>[u("div",P,[u("div",$,[i(o(_))]),u("div",U,[u("div",T,c(w.value.activePlans),1),a[10]||(a[10]=u("div",{class:"label"},"生效预案",-1))])])]),_:1})]),_:1}),i(t,{span:6},{default:d(()=>[i(l,{class:"overview-card"},{default:d(()=>[u("div",q,[u("div",S,[i(o(k))]),u("div",j,[u("div",A,c(w.value.pendingPlans),1),a[11]||(a[11]=u("div",{class:"label"},"待审批",-1))])])]),_:1})]),_:1}),i(t,{span:6},{default:d(()=>[i(l,{class:"overview-card"},{default:d(()=>[u("div",Y,[u("div",V,[i(o(x))]),u("div",F,[u("div",M,c(w.value.executedPlans),1),a[12]||(a[12]=u("div",{class:"label"},"已执行",-1))])])]),_:1})]),_:1})]),_:1})]),u("div",R,[i(l,{title:"创建新预案",class:"creation-card"},{extra:d(()=>[i(be,{type:"primary",onClick:re},{default:d(()=>[i(o(y)),a[13]||(a[13]=p(" 创建预案 ",-1))]),_:1})]),default:d(()=>[i(Ie,{layout:"vertical",model:K,onFinish:oe},{default:d(()=>[i(Z,{gutter:16},{default:d(()=>[i(t,{span:8},{default:d(()=>[i(xe,{label:"预案名称",name:"name",rules:[{required:!0,message:"请输入预案名称"}]},{default:d(()=>[i(ge,{value:K.name,"onUpdate:value":a[0]||(a[0]=e=>K.name=e),placeholder:"请输入预案名称"},null,8,["value"])]),_:1})]),_:1}),i(t,{span:8},{default:d(()=>[i(xe,{label:"预案类型",name:"type",rules:[{required:!0,message:"请选择预案类型"}]},{default:d(()=>[i(he,{value:K.type,"onUpdate:value":a[1]||(a[1]=e=>K.type=e),placeholder:"请选择预案类型",options:te},null,8,["value"])]),_:1})]),_:1}),i(t,{span:8},{default:d(()=>[i(xe,{label:"风险等级",name:"riskLevel",rules:[{required:!0,message:"请选择风险等级"}]},{default:d(()=>[i(he,{value:K.riskLevel,"onUpdate:value":a[2]||(a[2]=e=>K.riskLevel=e),placeholder:"请选择风险等级",options:se},null,8,["value"])]),_:1})]),_:1})]),_:1}),i(Z,{gutter:16},{default:d(()=>[i(t,{span:12},{default:d(()=>[i(xe,{label:"预案描述",name:"description"},{default:d(()=>[i(we,{value:K.description,"onUpdate:value":a[3]||(a[3]=e=>K.description=e),rows:3,placeholder:"请输入预案描述"},null,8,["value"])]),_:1})]),_:1}),i(t,{span:12},{default:d(()=>[i(xe,{label:"适用范围",name:"scope"},{default:d(()=>[i(we,{value:K.scope,"onUpdate:value":a[4]||(a[4]=e=>K.scope=e),rows:3,placeholder:"请输入适用范围"},null,8,["value"])]),_:1})]),_:1})]),_:1}),i(Z,{gutter:16},{default:d(()=>[i(t,{span:8},{default:d(()=>[i(xe,{label:"责任部门",name:"department",rules:[{required:!0,message:"请选择责任部门"}]},{default:d(()=>[i(he,{value:K.department,"onUpdate:value":a[5]||(a[5]=e=>K.department=e),placeholder:"请选择责任部门",options:ne},null,8,["value"])]),_:1})]),_:1}),i(t,{span:8},{default:d(()=>[i(xe,{label:"负责人",name:"responsible",rules:[{required:!0,message:"请输入负责人"}]},{default:d(()=>[i(ge,{value:K.responsible,"onUpdate:value":a[6]||(a[6]=e=>K.responsible=e),placeholder:"请输入负责人"},null,8,["value"])]),_:1})]),_:1}),i(t,{span:8},{default:d(()=>[i(xe,{label:"生效日期",name:"effectiveDate",rules:[{required:!0,message:"请选择生效日期"}]},{default:d(()=>[i(Ce,{value:K.effectiveDate,"onUpdate:value":a[7]||(a[7]=e=>K.effectiveDate=e),style:{width:"100%"},placeholder:"请选择生效日期"},null,8,["value"])]),_:1})]),_:1})]),_:1}),i(Z,null,{default:d(()=>[i(t,{span:24},{default:d(()=>[i(xe,null,{default:d(()=>[i(ze,null,{default:d(()=>[i(be,{type:"primary","html-type":"submit",loading:O.value},{default:d(()=>[...a[14]||(a[14]=[p(" 提交预案 ",-1)])]),_:1},8,["loading"]),i(be,{onClick:ce},{default:d(()=>[...a[15]||(a[15]=[p(" 重置 ",-1)])]),_:1}),i(be,{onClick:pe},{default:d(()=>[...a[16]||(a[16]=[p(" 预览 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),u("div",E,[i(l,{title:"预案管理",class:"management-card"},{extra:d(()=>[i(ze,null,{default:d(()=>[i(be,{onClick:ve},{default:d(()=>[i(o(h)),a[17]||(a[17]=p(" 刷新 ",-1))]),_:1}),i(be,{onClick:fe},{default:d(()=>[i(o(_)),a[18]||(a[18]=p(" 批量审批 ",-1))]),_:1}),i(be,{onClick:me},{default:d(()=>[i(o(b)),a[19]||(a[19]=p(" 导出预案 ",-1))]),_:1})]),_:1})]),default:d(()=>[i(De,{columns:ue,"data-source":B.value,pagination:H,loading:Q.value,"row-key":"id",onChange:ke,"row-selection":ee},{bodyCell:d(({column:e,record:l})=>{return["type"===e.key?(s(),v(Le,{key:0,color:(u=l.type,{"船舶碰撞应急预案":"red","船舶搁浅应急预案":"orange","火灾事故应急预案":"volcano","人员落水应急预案":"blue","货物泄漏应急预案":"purple"}[u]||"default")},{default:d(()=>[p(c(l.type),1)]),_:2},1032,["color"])):"riskLevel"===e.key?(s(),v(Le,{key:1,color:(n=l.riskLevel,{"特别重大":"red","重大":"volcano","较大":"orange","一般":"blue"}[n]||"default")},{default:d(()=>[p(c(l.riskLevel),1)]),_:2},1032,["color"])):"status"===e.key?(s(),v(Le,{key:2,color:(t=l.status,{"待审批":"processing","已通过":"success","已驳回":"error","已生效":"default"}[t]||"default")},{default:d(()=>[p(c(l.status),1)]),_:2},1032,["color"])):"action"===e.key?(s(),v(ze,{key:3},{default:d(()=>[i(be,{size:"small",onClick:e=>(e=>{X.value=e,W.value=!0})(l)},{default:d(()=>[...a[20]||(a[20]=[p(" 查看 ",-1)])]),_:2},1032,["onClick"]),i(be,{size:"small",onClick:e=>(e=>{g.info(`编辑预案：${e.name}`)})(l)},{default:d(()=>[...a[21]||(a[21]=[p(" 编辑 ",-1)])]),_:2},1032,["onClick"]),i(be,{size:"small",onClick:e=>(e=>{"已生效"===e.status?g.success(`开始执行预案：${e.name}`):g.warning("预案尚未生效，无法执行")})(l)},{default:d(()=>[...a[22]||(a[22]=[p(" 执行 ",-1)])]),_:2},1032,["onClick"]),i(be,{size:"small",onClick:e=>(e=>{g.success(`删除预案：${e.name}`),B.value=B.value.filter(a=>a.id!==e.id),H.total--})(l),danger:""},{default:d(()=>[...a[23]||(a[23]=[p(" 删除 ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)):f("",!0)];var t,n,u}),_:1},8,["data-source","pagination","loading","row-selection"])]),_:1})]),u("div",G,[i(l,{title:"审批流程管理",class:"approval-card"},{extra:d(()=>[i(be,{type:"primary",onClick:_e},{default:d(()=>[i(o(y)),a[24]||(a[24]=p(" 创建审批流程 ",-1))]),_:1})]),default:d(()=>[i(De,{columns:ie,"data-source":ae.value,pagination:{pageSize:5},size:"small"},{bodyCell:d(({column:e,record:l})=>{return["status"===e.key?(s(),v(Le,{key:0,color:(t=l.status,{"待审批":"processing","已通过":"success","已驳回":"error"}[t]||"default")},{default:d(()=>[p(c(l.status),1)]),_:2},1032,["color"])):"action"===e.key?(s(),v(ze,{key:1},{default:d(()=>[i(be,{size:"small",onClick:e=>(e=>{g.info(`查看审批：${e.planName}`)})(l)},{default:d(()=>[...a[25]||(a[25]=[p(" 查看 ",-1)])]),_:2},1032,["onClick"]),"待审批"===l.status?(s(),v(be,{key:0,size:"small",onClick:e=>(e=>{e.status="已通过",g.success(`预案 ${e.planName} 审批通过`)})(l)},{default:d(()=>[...a[26]||(a[26]=[p(" 审批 ",-1)])]),_:2},1032,["onClick"])):f("",!0),"待审批"===l.status?(s(),v(be,{key:1,size:"small",onClick:e=>(e=>{e.status="已驳回",g.success(`预案 ${e.planName} 审批驳回`)})(l)},{default:d(()=>[...a[27]||(a[27]=[p(" 驳回 ",-1)])]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)):f("",!0)];var t}),_:1},8,["data-source"])]),_:1})]),u("div",J,[i(l,{title:"执行记录管理",class:"execution-card"},{extra:d(()=>[i(be,{onClick:ye},{default:d(()=>[i(o(h)),a[28]||(a[28]=p(" 刷新 ",-1))]),_:1})]),default:d(()=>[i(De,{columns:de,"data-source":le.value,pagination:{pageSize:5},size:"small"},{bodyCell:d(({column:e,record:l})=>{return["result"===e.key?(s(),v(Le,{key:0,color:(t=l.result,{"成功":"success","部分成功":"warning","失败":"error"}[t]||"default")},{default:d(()=>[p(c(l.result),1)]),_:2},1032,["color"])):"action"===e.key?(s(),v(ze,{key:1},{default:d(()=>[i(be,{size:"small",onClick:e=>(e=>{g.info(`查看执行详情：${e.planName}`)})(l)},{default:d(()=>[...a[29]||(a[29]=[p(" 查看详情 ",-1)])]),_:2},1032,["onClick"]),i(be,{size:"small",onClick:e=>(e=>{g.info(`评估执行结果：${e.planName}`)})(l)},{default:d(()=>[...a[30]||(a[30]=[p(" 评估 ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)):f("",!0)];var t}),_:1},8,["data-source"])]),_:1})]),i($e,{open:W.value,"onUpdate:open":a[8]||(a[8]=e=>W.value=e),title:"预案详情",width:"800px",footer:null},{default:d(()=>[i(Pe,{column:2,bordered:""},{default:d(()=>[i(Ne,{label:"预案名称"},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.name),1)]}),_:1}),i(Ne,{label:"预案类型"},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.type),1)]}),_:1}),i(Ne,{label:"风险等级"},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.riskLevel),1)]}),_:1}),i(Ne,{label:"责任部门"},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.department),1)]}),_:1}),i(Ne,{label:"负责人"},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.responsible),1)]}),_:1}),i(Ne,{label:"生效日期"},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.effectiveDate),1)]}),_:1}),i(Ne,{label:"预案描述",span:2},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.description),1)]}),_:1}),i(Ne,{label:"适用范围",span:2},{default:d(()=>{var e;return[p(c(null==(e=X.value)?void 0:e.scope),1)]}),_:1})]),_:1})]),_:1},8,["open"])])}}}),[["__scopeId","data-v-5ad05b9e"]]);export{K as default};
