import{i as e}from"./index-b344bc7d.js";import{h as t,C as a,E as l,p as s,S as i,l as r,m as u,M as o}from"./antd-fa5730cf.js";import{d,f as c,r as n,c as p,o as f,n as m,V as v,W as _,a0 as y,k as g,$ as k,X as h,u as x,G as w,a3 as b,_ as T,a7 as A}from"./vendor-f41c3cc7.js";import{T as S,G as C,w as N,s as z,R}from"./icons-15893848.js";import{_ as Y}from"./index-19e90cff.js";const D={class:"dispatch-records"},I={class:"records-overview"},M={class:"card-title"},O={class:"statistic-value"},U={class:"card-title"},j={class:"statistic-value success"},H={class:"card-title"},$={class:"statistic-value executing"},B={class:"card-title"},L={class:"statistic-value failed"},W={class:"card-title"},E={class:"statistic-value"},G={class:"card-title"},J={class:"statistic-value"},X={class:"card-title"},Q={class:"statistic-value"},V={class:"card-title"},q={class:"statistic-value success"},F={class:"records-filter"},K={class:"records-charts"},P={class:"chart-container"},Z={class:"chart-container"},ee={class:"records-list"},te=Y(d({__name:"dispatch-records",setup(d){const Y=c(!1),te=c(!1),ae=c({}),le=n({total:1247,success:1189,executing:23,failed:35}),se=n({emergency:234,routine:567,special:289,coordination:157}),ie=n({participants:89,areas:24,avgDuration:"2.5小时",successRate:95.3}),re=n({timeRange:[],type:"",status:"",priority:"",executor:"",targetArea:""}),ue=n({current:1,pageSize:10,total:12,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}),oe=c([{id:"1",taskName:"船舶碰撞应急响应",type:"emergency",status:"completed",priority:"high",startTime:"2025-08-20 14:30:00",endTime:"2025-08-20 16:45:00",executor:"陈志强",resources:"监控摄像头、无人机、救援船只",targetArea:"主航道A段",description:"立即启动船舶碰撞事故应急响应预案",result:"成功完成应急响应，无人员伤亡",remark:"响应及时，处置得当"},{id:"2",taskName:"日常航道巡查",type:"routine",status:"executing",priority:"medium",startTime:"2025-08-20 09:00:00",executor:"李明华",resources:"固定监控点、移动巡查设备",targetArea:"全航道范围",description:"执行日常航道安全巡查任务",result:"正在执行中"},{id:"3",taskName:"恶劣天气专项检查",type:"special",status:"completed",priority:"high",startTime:"2025-08-20 16:00:00",endTime:"2025-08-20 18:30:00",executor:"王建国",resources:"全天候监控设备、应急通讯设备",targetArea:"重点监控区域",description:"执行恶劣天气下的专项安全检查",result:"检查完成，发现3处安全隐患",remark:"及时发现问题，已安排整改"},{id:"4",taskName:"多部门协同调度",type:"coordination",status:"failed",priority:"medium",startTime:"2025-08-20 10:00:00",endTime:"2025-08-20 12:15:00",executor:"赵海军",resources:"各部门监控资源、通讯设备",targetArea:"协同区域",description:"启动多部门协同调度预案",result:"执行失败，通讯设备故障",remark:"需要更换通讯设备"},{id:"5",taskName:"港口安全巡检",type:"routine",status:"completed",priority:"medium",startTime:"2025-08-19 08:00:00",endTime:"2025-08-19 17:30:00",executor:"陈志强",resources:"港口监控系统、安全检测设备",targetArea:"港口作业区",description:"执行港口安全巡检任务",result:"巡检完成，发现2处安全隐患",remark:"已通知相关部门处理"},{id:"6",taskName:"船舶超速监控",type:"special",status:"completed",priority:"high",startTime:"2025-08-19 20:00:00",endTime:"2025-08-19 22:15:00",executor:"钱志明",resources:"雷达监控、AIS系统、视频监控",targetArea:"限速航道段",description:"监控船舶超速行为",result:"发现3艘船舶超速，已记录并处理",remark:"超速船舶已收到警告"},{id:"7",taskName:"应急通讯测试",type:"coordination",status:"completed",priority:"low",startTime:"2025-08-18 14:00:00",endTime:"2025-08-18 15:30:00",executor:"孙海洋",resources:"通讯设备、测试终端",targetArea:"通讯测试区域",description:"测试应急通讯系统功能",result:"测试完成，通讯系统正常",remark:"系统运行稳定"},{id:"8",taskName:"航道疏浚监控",type:"routine",status:"executing",priority:"medium",startTime:"2025-08-18 07:00:00",executor:"周建华",resources:"水下监控设备、疏浚船监控",targetArea:"疏浚作业区",description:"监控航道疏浚作业进度",result:"正在执行中"},{id:"9",taskName:"船舶靠泊引导",type:"emergency",status:"completed",priority:"high",startTime:"2025-08-17 16:00:00",endTime:"2025-08-17 18:30:00",executor:"吴志强",resources:"引导船、监控设备、通讯系统",targetArea:"靠泊区域",description:"引导大型船舶安全靠泊",result:"引导成功，船舶安全靠泊",remark:"操作规范，安全高效"},{id:"10",taskName:"夜间安全巡查",type:"special",status:"completed",priority:"medium",startTime:"2025-08-17 22:00:00",endTime:"2025-08-18 06:00:00",executor:"李晓光",resources:"夜视设备、红外监控、巡逻车",targetArea:"夜间重点区域",description:"执行夜间安全巡查任务",result:"巡查完成，未发现异常情况",remark:"夜间安全状况良好"},{id:"11",taskName:"船舶流量统计",type:"routine",status:"completed",priority:"low",startTime:"2025-08-16 00:00:00",endTime:"2025-08-16 23:59:59",executor:"赵明亮",resources:"流量统计系统、监控设备",targetArea:"统计监测点",description:"统计24小时船舶流量数据",result:"统计完成，共通过156艘船舶",remark:"数据准确，统计完整"},{id:"12",taskName:"设备维护检查",type:"coordination",status:"completed",priority:"medium",startTime:"2025-08-15 09:00:00",endTime:"2025-08-15 17:00:00",executor:"陈志强",resources:"维护工具、检测设备、备用设备",targetArea:"设备维护区",description:"执行设备定期维护检查",result:"维护完成，设备运行正常",remark:"维护质量良好，设备状态稳定"}]),de=[{title:"任务名称",dataIndex:"taskName",key:"taskName",width:200},{title:"调度类型",dataIndex:"type",key:"type",width:120},{title:"执行状态",dataIndex:"status",key:"status",width:100},{title:"优先级",dataIndex:"priority",key:"priority",width:100},{title:"开始时间",dataIndex:"startTime",key:"startTime",width:180},{title:"结束时间",dataIndex:"endTime",key:"endTime",width:180},{title:"执行人员",dataIndex:"executor",key:"executor",width:100},{title:"操作",key:"action",width:200,fixed:"right"}],ce=p(()=>{let e=oe.value;if(re.type&&(e=e.filter(e=>e.type===re.type)),re.status&&(e=e.filter(e=>e.status===re.status)),re.priority&&(e=e.filter(e=>e.priority===re.priority)),re.executor&&(e=e.filter(e=>e.executor===re.executor)),re.targetArea&&(e=e.filter(e=>e.targetArea===re.targetArea)),re.timeRange&&2===re.timeRange.length){const t=re.timeRange[0].format("YYYY-MM-DD HH:mm:ss"),a=re.timeRange[1].format("YYYY-MM-DD HH:mm:ss");e=e.filter(e=>e.startTime>=t&&e.startTime<=a)}return e}),ne=e=>({emergency:"red",routine:"blue",special:"orange",coordination:"green",maintenance:"purple",inspection:"cyan",training:"geekblue",drill:"lime"}[e]||"default"),pe=e=>({emergency:"紧急调度",routine:"例行调度",special:"专项调度",coordination:"协同调度",maintenance:"维护调度",inspection:"检查调度",training:"培训调度",drill:"演练调度"}[e]||e),fe=e=>({executing:"blue",completed:"green",failed:"red",cancelled:"default",paused:"orange",timeout:"volcano",interrupted:"magenta",pending:"cyan"}[e]||"default"),me=e=>({executing:"执行中",completed:"已完成",failed:"执行失败",cancelled:"已取消",paused:"已暂停",timeout:"超时",interrupted:"被中断",pending:"等待中"}[e]||e),ve=e=>({high:"red",medium:"orange",low:"blue",urgent:"volcano",normal:"green",routine:"cyan"}[e]||"default"),_e=e=>({high:"高",medium:"中",low:"低",urgent:"紧急",normal:"普通",routine:"例行"}[e]||e),ye=()=>{ue.current=1,u.info("执行查询操作")},ge=()=>{Object.assign(re,{timeRange:[],type:"",status:"",priority:"",executor:"",targetArea:""}),ue.current=1,u.info("筛选条件已重置")},ke=()=>{u.success("记录导出功能开发中")},he=e=>{ue.current=e.current,ue.pageSize=e.pageSize},xe=c(!0),we=c(null),be=c(null),Te=()=>{if(console.log("初始化调度类型分布图表"),console.log("图表容器引用:",we.value),we.value)try{const t=e(we.value);console.log("图表实例创建成功:",t);const a={title:{text:"调度类型分布",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",top:"middle"},series:[{name:"调度类型",type:"pie",radius:"50%",center:["60%","50%"],data:[{value:se.emergency,name:"紧急调度",itemStyle:{color:"#ff4d4f"}},{value:se.routine,name:"例行调度",itemStyle:{color:"#1890ff"}},{value:se.special,name:"专项调度",itemStyle:{color:"#52c41a"}},{value:se.coordination,name:"协同调度",itemStyle:{color:"#faad14"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};t.setOption(a),console.log("调度类型图表配置成功")}catch(t){console.error("初始化调度类型图表失败:",t)}else console.error("调度类型图表容器未找到")},Ae=()=>{if(console.log("初始化执行状态趋势图表"),console.log("图表容器引用:",be.value),be.value)try{const t=e(be.value);console.log("执行状态趋势图表实例创建成功:",t);const a={title:{text:"近7天执行趋势",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis"},legend:{data:["成功","失败"],bottom:10},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:["08-20","08-21","08-22","08-23","08-24","08-25","08-26"]},yAxis:{type:"value"},series:[{name:"成功",type:"line",smooth:!0,data:[12,15,18,14,16,13,17],itemStyle:{color:"#52c41a"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(82, 196, 26, 0.3)"},{offset:1,color:"rgba(82, 196, 26, 0.1)"}]}}},{name:"失败",type:"line",smooth:!0,data:[1,2,0,1,2,1,0],itemStyle:{color:"#ff4d4f"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255, 77, 79, 0.3)"},{offset:1,color:"rgba(255, 77, 79, 0.1)"}]}}}]};t.setOption(a),console.log("执行状态趋势图表配置成功")}catch(t){console.error("初始化执行状态趋势图表失败:",t)}else console.error("执行状态趋势图表容器未找到")},Se=()=>{console.log("刷新调度类型分布图表"),xe.value=!0,setTimeout(()=>{Te(),xe.value=!1},500)},Ce=()=>{console.log("刷新执行状态趋势图表"),xe.value=!0,setTimeout(()=>{Ae(),xe.value=!1},500)};return f(()=>{console.log("视频调度记录页面已加载"),setTimeout(()=>{m(()=>{Te(),Ae(),xe.value=!1})},100),window.addEventListener("resize",()=>{m(()=>{Te(),Ae()})})}),(e,d)=>{const c=h("a-card"),n=h("a-col"),p=h("a-row"),f=h("a-range-picker"),m=h("a-form-item"),se=h("a-select-option"),oe=h("a-select"),Te=h("a-button"),Ae=h("a-space"),Ne=h("a-form"),ze=h("a-spin"),Re=h("a-tag"),Ye=h("a-table"),De=h("a-descriptions-item"),Ie=h("a-descriptions"),Me=h("a-modal");return v(),_("div",D,[d[80]||(d[80]=y("div",{class:"page-header"},[y("h1",null,"调度记录"),y("p",null,"记录和管理所有视频调度任务的执行历史，支持查询、统计和分析")],-1)),y("div",I,[g(p,{gutter:16},{default:k(()=>[g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",M,[g(x(t)),d[7]||(d[7]=w(" 总调度次数 ",-1))])]),default:k(()=>[y("div",O,b(le.total),1),d[8]||(d[8]=y("div",{class:"statistic-desc"},"累计调度任务",-1))]),_:1})]),_:1}),g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",U,[g(x(a)),d[9]||(d[9]=w(" 成功完成 ",-1))])]),default:k(()=>[y("div",j,b(le.success),1),d[10]||(d[10]=y("div",{class:"statistic-desc"},"成功完成任务",-1))]),_:1})]),_:1}),g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",H,[g(x(l)),d[11]||(d[11]=w(" 执行中 ",-1))])]),default:k(()=>[y("div",$,b(le.executing),1),d[12]||(d[12]=y("div",{class:"statistic-desc"},"正在执行任务",-1))]),_:1})]),_:1}),g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",B,[g(x(s)),d[13]||(d[13]=w(" 执行失败 ",-1))])]),default:k(()=>[y("div",L,b(le.failed),1),d[14]||(d[14]=y("div",{class:"statistic-desc"},"执行失败任务",-1))]),_:1})]),_:1})]),_:1}),g(p,{gutter:16,style:{"margin-top":"16px"}},{default:k(()=>[g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",W,[g(x(S)),d[15]||(d[15]=w(" 参与人员 ",-1))])]),default:k(()=>[y("div",E,b(ie.participants),1),d[16]||(d[16]=y("div",{class:"statistic-desc"},"调度参与人员",-1))]),_:1})]),_:1}),g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",G,[g(x(C)),d[17]||(d[17]=w(" 覆盖区域 ",-1))])]),default:k(()=>[y("div",J,b(ie.areas),1),d[18]||(d[18]=y("div",{class:"statistic-desc"},"调度覆盖区域",-1))]),_:1})]),_:1}),g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",X,[g(x(N)),d[19]||(d[19]=w(" 平均耗时 ",-1))])]),default:k(()=>[y("div",Q,b(ie.avgDuration),1),d[20]||(d[20]=y("div",{class:"statistic-desc"},"任务平均耗时",-1))]),_:1})]),_:1}),g(n,{span:6},{default:k(()=>[g(c,{class:"overview-card"},{title:k(()=>[y("span",V,[g(x(z)),d[21]||(d[21]=w(" 成功率 ",-1))])]),default:k(()=>[y("div",q,b(ie.successRate)+"%",1),d[22]||(d[22]=y("div",{class:"statistic-desc"},"任务成功率",-1))]),_:1})]),_:1})]),_:1})]),y("div",F,[g(c,{title:"记录查询",class:"filter-card"},{default:k(()=>[g(Ne,{layout:"inline",model:re},{default:k(()=>[g(m,{label:"时间范围"},{default:k(()=>[g(f,{value:re.timeRange,"onUpdate:value":d[0]||(d[0]=e=>re.timeRange=e),"show-time":!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"['开始时间', '结束时间']"},null,8,["value"])]),_:1}),g(m,{label:"调度类型"},{default:k(()=>[g(oe,{value:re.type,"onUpdate:value":d[1]||(d[1]=e=>re.type=e),placeholder:"请选择调度类型",style:{width:"150px"}},{default:k(()=>[g(se,{value:""},{default:k(()=>[...d[23]||(d[23]=[w("全部类型",-1)])]),_:1}),g(se,{value:"emergency"},{default:k(()=>[...d[24]||(d[24]=[w("紧急调度",-1)])]),_:1}),g(se,{value:"routine"},{default:k(()=>[...d[25]||(d[25]=[w("例行调度",-1)])]),_:1}),g(se,{value:"special"},{default:k(()=>[...d[26]||(d[26]=[w("专项调度",-1)])]),_:1}),g(se,{value:"coordination"},{default:k(()=>[...d[27]||(d[27]=[w("协同调度",-1)])]),_:1}),g(se,{value:"maintenance"},{default:k(()=>[...d[28]||(d[28]=[w("维护调度",-1)])]),_:1}),g(se,{value:"inspection"},{default:k(()=>[...d[29]||(d[29]=[w("检查调度",-1)])]),_:1}),g(se,{value:"training"},{default:k(()=>[...d[30]||(d[30]=[w("培训调度",-1)])]),_:1}),g(se,{value:"drill"},{default:k(()=>[...d[31]||(d[31]=[w("演练调度",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),g(m,{label:"执行状态"},{default:k(()=>[g(oe,{value:re.status,"onUpdate:value":d[2]||(d[2]=e=>re.status=e),placeholder:"请选择执行状态",style:{width:"150px"}},{default:k(()=>[g(se,{value:""},{default:k(()=>[...d[32]||(d[32]=[w("全部状态",-1)])]),_:1}),g(se,{value:"executing"},{default:k(()=>[...d[33]||(d[33]=[w("执行中",-1)])]),_:1}),g(se,{value:"completed"},{default:k(()=>[...d[34]||(d[34]=[w("已完成",-1)])]),_:1}),g(se,{value:"failed"},{default:k(()=>[...d[35]||(d[35]=[w("执行失败",-1)])]),_:1}),g(se,{value:"paused"},{default:k(()=>[...d[36]||(d[36]=[w("已暂停",-1)])]),_:1}),g(se,{value:"cancelled"},{default:k(()=>[...d[37]||(d[37]=[w("已取消",-1)])]),_:1}),g(se,{value:"timeout"},{default:k(()=>[...d[38]||(d[38]=[w("超时",-1)])]),_:1}),g(se,{value:"interrupted"},{default:k(()=>[...d[39]||(d[39]=[w("被中断",-1)])]),_:1}),g(se,{value:"pending"},{default:k(()=>[...d[40]||(d[40]=[w("等待中",-1)])]),_:1}),g(se,{value:"cancelled"},{default:k(()=>[...d[41]||(d[41]=[w("已取消",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),g(m,{label:"优先级"},{default:k(()=>[g(oe,{value:re.priority,"onUpdate:value":d[3]||(d[3]=e=>re.priority=e),placeholder:"请选择优先级",style:{width:"120px"}},{default:k(()=>[g(se,{value:""},{default:k(()=>[...d[42]||(d[42]=[w("全部优先级",-1)])]),_:1}),g(se,{value:"high"},{default:k(()=>[...d[43]||(d[43]=[w("高",-1)])]),_:1}),g(se,{value:"medium"},{default:k(()=>[...d[44]||(d[44]=[w("中",-1)])]),_:1}),g(se,{value:"low"},{default:k(()=>[...d[45]||(d[45]=[w("低",-1)])]),_:1}),g(se,{value:"urgent"},{default:k(()=>[...d[46]||(d[46]=[w("紧急",-1)])]),_:1}),g(se,{value:"normal"},{default:k(()=>[...d[47]||(d[47]=[w("普通",-1)])]),_:1}),g(se,{value:"routine"},{default:k(()=>[...d[48]||(d[48]=[w("例行",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),g(m,{label:"执行人员"},{default:k(()=>[g(oe,{value:re.executor,"onUpdate:value":d[4]||(d[4]=e=>re.executor=e),placeholder:"请选择执行人员",style:{width:"150px"}},{default:k(()=>[g(se,{value:""},{default:k(()=>[...d[49]||(d[49]=[w("全部人员",-1)])]),_:1}),g(se,{value:"陈志强"},{default:k(()=>[...d[50]||(d[50]=[w("陈志强",-1)])]),_:1}),g(se,{value:"李明华"},{default:k(()=>[...d[51]||(d[51]=[w("李明华",-1)])]),_:1}),g(se,{value:"王建国"},{default:k(()=>[...d[52]||(d[52]=[w("王建国",-1)])]),_:1}),g(se,{value:"赵海军"},{default:k(()=>[...d[53]||(d[53]=[w("赵海军",-1)])]),_:1}),g(se,{value:"钱志明"},{default:k(()=>[...d[54]||(d[54]=[w("钱志明",-1)])]),_:1}),g(se,{value:"孙海洋"},{default:k(()=>[...d[55]||(d[55]=[w("孙海洋",-1)])]),_:1}),g(se,{value:"周建华"},{default:k(()=>[...d[56]||(d[56]=[w("周建华",-1)])]),_:1}),g(se,{value:"吴志强"},{default:k(()=>[...d[57]||(d[57]=[w("吴志强",-1)])]),_:1}),g(se,{value:"李晓光"},{default:k(()=>[...d[58]||(d[58]=[w("李晓光",-1)])]),_:1}),g(se,{value:"赵明亮"},{default:k(()=>[...d[59]||(d[59]=[w("赵明亮",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),g(m,{label:"目标区域"},{default:k(()=>[g(oe,{value:re.targetArea,"onUpdate:value":d[5]||(d[5]=e=>re.targetArea=e),placeholder:"请选择目标区域",style:{width:"150px"}},{default:k(()=>[g(se,{value:""},{default:k(()=>[...d[60]||(d[60]=[w("全部区域",-1)])]),_:1}),g(se,{value:"码头A区"},{default:k(()=>[...d[61]||(d[61]=[w("码头A区",-1)])]),_:1}),g(se,{value:"码头B区"},{default:k(()=>[...d[62]||(d[62]=[w("码头B区",-1)])]),_:1}),g(se,{value:"锚地1号"},{default:k(()=>[...d[63]||(d[63]=[w("锚地1号",-1)])]),_:1}),g(se,{value:"锚地2号"},{default:k(()=>[...d[64]||(d[64]=[w("锚地2号",-1)])]),_:1}),g(se,{value:"航道主段"},{default:k(()=>[...d[65]||(d[65]=[w("航道主段",-1)])]),_:1}),g(se,{value:"航道支段"},{default:k(()=>[...d[66]||(d[66]=[w("航道支段",-1)])]),_:1}),g(se,{value:"港池区域"},{default:k(()=>[...d[67]||(d[67]=[w("港池区域",-1)])]),_:1}),g(se,{value:"引航区域"},{default:k(()=>[...d[68]||(d[68]=[w("引航区域",-1)])]),_:1}),g(se,{value:"应急区域"},{default:k(()=>[...d[69]||(d[69]=[w("应急区域",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),g(m,null,{default:k(()=>[g(Ae,null,{default:k(()=>[g(Te,{type:"primary",onClick:ye},{default:k(()=>[g(x(i)),d[70]||(d[70]=w(" 查询 ",-1))]),_:1}),g(Te,{onClick:ge},{default:k(()=>[g(x(R)),d[71]||(d[71]=w(" 重置 ",-1))]),_:1}),g(Te,{onClick:ke},{default:k(()=>[g(x(r)),d[72]||(d[72]=w(" 导出 ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),y("div",K,[g(p,{gutter:16},{default:k(()=>[g(n,{span:12},{default:k(()=>[g(c,{title:"调度类型分布",class:"chart-card"},{extra:k(()=>[g(Te,{type:"link",size:"small",onClick:Se},{default:k(()=>[g(x(R)),d[73]||(d[73]=w(" 刷新 ",-1))]),_:1})]),default:k(()=>[y("div",P,[g(ze,{spinning:xe.value,tip:"图表加载中..."},{default:k(()=>[y("div",{ref_key:"dispatchTypeChartRef",ref:we,class:"chart-wrapper"},null,512)]),_:1},8,["spinning"])])]),_:1})]),_:1}),g(n,{span:12},{default:k(()=>[g(c,{title:"执行状态趋势",class:"chart-card"},{extra:k(()=>[g(Te,{type:"link",size:"small",onClick:Ce},{default:k(()=>[g(x(R)),d[74]||(d[74]=w(" 刷新 ",-1))]),_:1})]),default:k(()=>[y("div",Z,[g(ze,{spinning:xe.value,tip:"图表加载中..."},{default:k(()=>[y("div",{ref_key:"executionStatusChartRef",ref:be,class:"chart-wrapper"},null,512)]),_:1},8,["spinning"])])]),_:1})]),_:1})]),_:1})]),y("div",ee,[g(c,{title:"调度记录列表",class:"list-card"},{default:k(()=>[g(Ye,{columns:de,"data-source":ce.value,pagination:ue,loading:Y.value,onChange:he},{bodyCell:k(({column:e,record:t})=>["type"===e.key?(v(),T(Re,{key:0,color:ne(t.type)},{default:k(()=>[w(b(pe(t.type)),1)]),_:2},1032,["color"])):"status"===e.key?(v(),T(Re,{key:1,color:fe(t.status)},{default:k(()=>[w(b(me(t.status)),1)]),_:2},1032,["color"])):"priority"===e.key?(v(),T(Re,{key:2,color:ve(t.priority)},{default:k(()=>[w(b(_e(t.priority)),1)]),_:2},1032,["color"])):"action"===e.key?(v(),T(Ae,{key:3},{default:k(()=>[g(Te,{type:"link",size:"small",onClick:e=>(e=>{ae.value=e,te.value=!0})(t)},{default:k(()=>[...d[75]||(d[75]=[w(" 查看 ",-1)])]),_:2},1032,["onClick"]),"executing"===t.status?(v(),T(Te,{key:0,type:"link",size:"small",onClick:e=>(e=>{o.confirm({title:"确认停止调度",content:`确定要停止调度任务"${e.taskName}"吗？`,onOk:()=>{e.status="cancelled",e.endTime=(new Date).toLocaleString(),e.result="手动停止",u.success("调度任务已停止")}})})(t)},{default:k(()=>[...d[76]||(d[76]=[w(" 停止 ",-1)])]),_:2},1032,["onClick"])):A("",!0),"executing"===t.status?(v(),T(Te,{key:1,type:"link",size:"small",onClick:e=>(e=>{o.confirm({title:"确认暂停调度",content:`确定要暂停调度任务"${e.taskName}"吗？`,onOk:()=>{e.status="paused",u.success("调度任务已暂停")}})})(t)},{default:k(()=>[...d[77]||(d[77]=[w(" 暂停 ",-1)])]),_:2},1032,["onClick"])):A("",!0),"paused"===t.status?(v(),T(Te,{key:2,type:"link",size:"small",onClick:e=>(e=>{o.confirm({title:"确认恢复调度",content:`确定要恢复调度任务"${e.taskName}"吗？`,onOk:()=>{e.status="executing",u.success("调度任务已恢复")}})})(t)},{default:k(()=>[...d[78]||(d[78]=[w(" 恢复 ",-1)])]),_:2},1032,["onClick"])):A("",!0),g(Te,{type:"link",size:"small",onClick:e=>(e=>{u.success(`记录"${e.taskName}"导出功能开发中`)})(t)},{default:k(()=>[...d[79]||(d[79]=[w(" 导出 ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["data-source","pagination","loading"])]),_:1})]),g(Me,{open:te.value,"onUpdate:open":d[6]||(d[6]=e=>te.value=e),title:"调度记录详情",width:"800px",footer:null},{default:k(()=>[g(Ie,{column:2,bordered:""},{default:k(()=>[g(De,{label:"任务名称"},{default:k(()=>[w(b(ae.value.taskName),1)]),_:1}),g(De,{label:"调度类型"},{default:k(()=>[g(Re,{color:ne(ae.value.type)},{default:k(()=>[w(b(pe(ae.value.type)),1)]),_:1},8,["color"])]),_:1}),g(De,{label:"执行状态"},{default:k(()=>[g(Re,{color:fe(ae.value.status)},{default:k(()=>[w(b(me(ae.value.status)),1)]),_:1},8,["color"])]),_:1}),g(De,{label:"优先级"},{default:k(()=>[g(Re,{color:ve(ae.value.priority)},{default:k(()=>[w(b(_e(ae.value.priority)),1)]),_:1},8,["color"])]),_:1}),g(De,{label:"开始时间"},{default:k(()=>[w(b(ae.value.startTime),1)]),_:1}),g(De,{label:"结束时间"},{default:k(()=>[w(b(ae.value.endTime||"进行中"),1)]),_:1}),g(De,{label:"执行人员"},{default:k(()=>[w(b(ae.value.executor),1)]),_:1}),g(De,{label:"调度资源"},{default:k(()=>[w(b(ae.value.resources),1)]),_:1}),g(De,{label:"目标区域"},{default:k(()=>[w(b(ae.value.targetArea),1)]),_:1}),g(De,{label:"任务描述"},{default:k(()=>[w(b(ae.value.description),1)]),_:1}),g(De,{label:"执行结果",span:2},{default:k(()=>[w(b(ae.value.result||"执行中"),1)]),_:1}),g(De,{label:"备注",span:2},{default:k(()=>[w(b(ae.value.remark||"无"),1)]),_:1})]),_:1})]),_:1},8,["open"])])}}}),[["__scopeId","data-v-0a7daeb9"]]);export{te as default};
